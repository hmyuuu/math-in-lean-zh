

<!DOCTYPE html>
<html class="writer-html5" lang="en" data-content_root="./">
<head>
  <meta charset="utf-8" /><meta name="viewport" content="width=device-width, initial-scale=1" />

  <meta name="viewport" content="width=device-width, initial-scale=1.0" />
  <title>4. &#38598;&#21512;&#21644;&#20989;&#25968; &mdash; Mathematics in Lean 0.1 documentation</title>
      <link rel="stylesheet" type="text/css" href="_static/pygments.css?v=80d5e7a1" />
      <link rel="stylesheet" type="text/css" href="_static/css/theme.css?v=e59714d7" />
      <link rel="stylesheet" type="text/css" href="_static/css/custom.css?v=0731ccc3" />

  
    <link rel="shortcut icon" href="_static/favicon.ico"/>
      <script src="_static/jquery.js?v=5d32c60e"></script>
      <script src="_static/_sphinx_javascript_frameworks_compat.js?v=2cd50e6c"></script>
      <script src="_static/documentation_options.js?v=2709fde1"></script>
      <script src="_static/doctools.js?v=9a2dae69"></script>
      <script src="_static/sphinx_highlight.js?v=dc90522c"></script>
      <script async="async" src="https://cdn.jsdelivr.net/npm/mathjax@3/es5/tex-mml-chtml.js"></script>
    <script src="_static/js/theme.js"></script>
    <link rel="index" title="Index" href="genindex.html" />
    <link rel="search" title="Search" href="search.html" />
    <link rel="next" title="5. Elementary Number Theory" href="C05_Elementary_Number_Theory.html" />
    <link rel="prev" title="3. &#36923;&#36753;" href="C03_Logic.html" /> 
</head>

<body class="wy-body-for-nav"> 
  <div class="wy-grid-for-nav">
    <nav data-toggle="wy-nav-shift" class="wy-nav-side">
      <div class="wy-side-scroll">
        <div class="wy-side-nav-search" >

          
          
          <a href="index.html" class="icon icon-home">
            Mathematics in Lean
          </a>
<div role="search">
  <form id="rtd-search-form" class="wy-form" action="search.html" method="get">
    <input type="text" name="q" placeholder="Search docs" aria-label="Search docs" />
    <input type="hidden" name="check_keywords" value="yes" />
    <input type="hidden" name="area" value="default" />
  </form>
</div>
        </div><div class="wy-menu wy-menu-vertical" data-spy="affix" role="navigation" aria-label="Navigation menu">
              <ul class="current">
<li class="toctree-l1"><a class="reference internal" href="C01_Introduction.html">1. &#24341;&#35328;</a></li>
<li class="toctree-l1"><a class="reference internal" href="C02_Basics.html">2. &#22522;&#30784;</a></li>
<li class="toctree-l1"><a class="reference internal" href="C03_Logic.html">3. &#36923;&#36753;</a></li>
<li class="toctree-l1 current"><a class="current reference internal" href="#">4. &#38598;&#21512;&#21644;&#20989;&#25968;</a><ul>
<li class="toctree-l2"><a class="reference internal" href="#sets">4.1. &#38598;&#21512;</a></li>
<li class="toctree-l2"><a class="reference internal" href="#functions">4.2. Functions</a></li>
<li class="toctree-l2"><a class="reference internal" href="#the-schroeder-bernstein-theorem">4.3. &#26045;&#32599;&#24503;-&#20271;&#24681;&#26031;&#22374;&#23450;&#29702;</a></li>
</ul>
</li>
<li class="toctree-l1"><a class="reference internal" href="C05_Elementary_Number_Theory.html">5. Elementary Number Theory</a></li>
<li class="toctree-l1"><a class="reference internal" href="C06_Structures.html">6. &#32467;&#26500;&#20307;&#65288;Structures&#65289;</a></li>
<li class="toctree-l1"><a class="reference internal" href="C07_Hierarchies.html">7. Hierarchies</a></li>
<li class="toctree-l1"><a class="reference internal" href="C08_Groups_and_Rings.html">8. &#32676;&#19982;&#29615;</a></li>
<li class="toctree-l1"><a class="reference internal" href="C09_Linear_Algebra.html">9. &#32447;&#24615;&#20195;&#25968;</a></li>
<li class="toctree-l1"><a class="reference internal" href="C10_Topology.html">10. Topology</a></li>
<li class="toctree-l1"><a class="reference internal" href="C11_Differential_Calculus.html">11. Differential Calculus</a></li>
<li class="toctree-l1"><a class="reference internal" href="C12_Integration_and_Measure_Theory.html">12. &#31215;&#20998;&#21644;&#27979;&#24230;&#35770;</a></li>
</ul>
<ul>
<li class="toctree-l1"><a class="reference internal" href="genindex.html">Index</a></li>
</ul>

        </div>
      </div>
    </nav>

    <section data-toggle="wy-nav-shift" class="wy-nav-content-wrap"><nav class="wy-nav-top" aria-label="Mobile navigation menu" >
          <i data-toggle="wy-nav-top" class="fa fa-bars"></i>
          <a href="index.html">Mathematics in Lean</a>
      </nav>

      <div class="wy-nav-content">
        <div class="rst-content">
          <div role="navigation" aria-label="Page navigation">
  <ul class="wy-breadcrumbs">
      <li><a href="index.html" class="icon icon-home" aria-label="Home"></a></li>
      <li class="breadcrumb-item active"><span class="section-number">4. </span>&#38598;&#21512;&#21644;&#20989;&#25968;</li>
      <li class="wy-breadcrumbs-aside">
            <a href="_sources/C04_Sets_and_Functions.rst.txt" rel="nofollow"> View page source</a>
      </li>
  </ul>
  <hr/>
</div>
          <div role="main" class="document" itemscope="itemscope" itemtype="http://schema.org/Article">
           <div itemprop="articleBody">
             
  <section id="sets-and-functions">
<span id="id1"></span><h1><span class="section-number">4. </span>&#38598;&#21512;&#21644;&#20989;&#25968;<a class="headerlink" href="#sets-and-functions" title="Link to this heading">&#61633;</a></h1>
<p>&#38598;&#21512;&#12289;&#20851;&#31995;&#21644;&#20989;&#25968;&#20026;&#25152;&#26377;&#25968;&#23398;&#20998;&#25903;&#30340;&#26500;&#36896;&#25552;&#20379;&#20102;&#32479;&#19968;&#30340;&#35821;&#35328;&#12290;&#30001;&#20110;&#20989;&#25968;&#21644;&#20851;&#31995;&#21487;&#20197;&#29992;&#38598;&#21512;&#26469;&#23450;&#20041;&#65292;&#22240;&#27492;&#20844;&#29702;&#38598;&#21512;&#35770;&#21487;&#20197;&#20316;&#20026;&#25968;&#23398;&#30340;&#22522;&#30784;&#12290;</p>
<p>&#20316;&#20026; Lean &#22522;&#30784;&#30340;&#21407;&#22987;&#27010;&#24565;&#21017;&#26159; <strong>&#31867;&#22411;</strong>&#65292;&#21253;&#25324;&#22312;&#31867;&#22411;&#38388;&#23450;&#20041;&#20989;&#25968;&#30340;&#26041;&#27861;&#12290;Lean &#20013;&#30340;&#27599;&#20010;&#34920;&#36798;&#24335;&#37117;&#26377;&#19968;&#20010;&#31867;&#22411;&#65306;&#33258;&#28982;&#25968;&#12289;&#23454;&#25968;&#12289;&#20174;&#23454;&#25968;&#21040;&#23454;&#25968;&#30340;&#20989;&#25968;&#12289;&#32676;&#12289;&#21521;&#37327;&#31354;&#38388;&#31561;&#31561;&#12290;&#20063;&#26377;&#30340;&#34920;&#36798;&#24335;&#26159;&#31867;&#22411;&#65292;&#20063;&#23601;&#26159;&#35828;&#65292;&#23427;&#20204;&#30340;&#31867;&#22411;&#26159; <code class="docutils literal notranslate"><span class="pre">Type</span></code> &#12290;Lean &#21644; Mathlib &#25552;&#20379;&#23450;&#20041;&#26032;&#31867;&#22411;&#30340;&#26041;&#24335;&#65292;&#20197;&#21450;&#23450;&#20041;&#36825;&#20123;&#31867;&#22411;&#30340;&#23545;&#35937;&#30340;&#26041;&#24335;&#12290;</p>
<p>&#20174;&#27010;&#24565;&#19978;&#35762;&#65292;&#20320;&#21487;&#20197;&#25226;&#31867;&#22411;&#30475;&#20316;&#26159;&#19968;&#32452;&#23545;&#35937;&#30340;&#38598;&#21512;&#12290;&#35201;&#27714;&#27599;&#20010;&#23545;&#35937;&#37117;&#26377;&#19968;&#20010;&#31867;&#22411;&#26377;&#19968;&#20123;&#22909;&#22788;&#12290;&#20363;&#22914;&#65292;&#23427;&#20351;&#24471;&#37325;&#36733;&#20687; <code class="docutils literal notranslate"><span class="pre">+</span></code> &#36825;&#26679;&#30340;&#31526;&#21495;&#25104;&#20026;&#21487;&#33021;&#65292;&#26377;&#26102;&#23427;&#36824;&#33021;&#32553;&#20943;&#20887;&#38271;&#30340;&#36755;&#20837;&#65292;&#22240;&#20026; Lean &#21487;&#20197;&#20174;&#23545;&#35937;&#30340;&#31867;&#22411;&#20013;&#25512;&#26029;&#20986;&#22823;&#37327;&#20449;&#24687;&#12290;&#24403;&#20320;&#23558;&#20989;&#25968;&#24212;&#29992;&#20110;&#38169;&#35823;&#30340;&#21442;&#25968;&#20010;&#25968;&#65292;&#25110;&#23558;&#20989;&#25968;&#24212;&#29992;&#20110;&#38169;&#35823;&#31867;&#22411;&#30340;&#21442;&#25968;&#26102;&#65292;&#31867;&#22411;&#31995;&#32479;&#35753; Lean &#21487;&#20197;&#26631;&#35760;&#38169;&#35823;&#12290;</p>
<p>Lean &#30340;&#24211;&#30830;&#23454;&#23450;&#20041;&#20102;&#21021;&#31561;&#38598;&#21512;&#35770;&#27010;&#24565;&#12290;&#19982;&#38598;&#21512;&#35770;&#19981;&#21516;&#30340;&#26159;&#65292;&#22312; Lean &#20013;&#65292;&#38598;&#21512;&#24635;&#26159;&#26576;&#31181;&#31867;&#22411;&#30340;&#23545;&#35937;&#21644;&#38598;&#21512;&#65292;&#20363;&#22914;&#33258;&#28982;&#25968;&#38598;&#21512;&#25110;&#20174;&#23454;&#25968;&#21040;&#23454;&#25968;&#30340;&#20989;&#25968;&#30340;&#38598;&#21512;&#12290;&#31867;&#22411;&#21644;&#38598;&#21512;&#20043;&#38388;&#30340;&#21306;&#21035;&#38656;&#35201;&#19968;&#20123;&#26102;&#38388;&#26469;&#36866;&#24212;&#65292;&#26412;&#31456;&#23558;&#24102;&#20320;&#20102;&#35299;&#20854;&#20013;&#30340;&#35201;&#28857;&#12290;</p>
<section id="sets">
<span id="id2"></span><h2><span class="section-number">4.1. </span>&#38598;&#21512;<a class="headerlink" href="#sets" title="Link to this heading">&#61633;</a></h2>
<p id="index-0">&#35774; <code class="docutils literal notranslate"><span class="pre">&#945;</span></code> &#26159;&#20219;&#24847;&#31867;&#22411;&#65292;&#21017;&#31867;&#22411; <code class="docutils literal notranslate"><span class="pre">Set</span> <span class="pre">&#945;</span></code> &#26159; <code class="docutils literal notranslate"><span class="pre">&#945;</span></code> &#20013;&#30340;&#20803;&#32032;&#32452;&#25104;&#30340;&#38598;&#21512;&#12290;&#36825;&#19968;&#31867;&#22411;&#25903;&#25345;&#24120;&#35268;&#30340;&#38598;&#21512;&#35770;&#36816;&#31639;&#21644;&#20851;&#31995;&#12290;&#20363;&#22914;&#65292; <code class="docutils literal notranslate"><span class="pre">s</span> <span class="pre">&#8838;</span> <span class="pre">t</span></code> &#34920;&#31034; <code class="docutils literal notranslate"><span class="pre">s</span></code> &#26159; <code class="docutils literal notranslate"><span class="pre">t</span></code> &#30340;&#23376;&#38598;&#65288; <code class="docutils literal notranslate"><span class="pre">&#8838;</span></code> &#31526;&#21495;&#26159; <code class="docutils literal notranslate"><span class="pre">\ss</span></code> &#25110; <code class="docutils literal notranslate"><span class="pre">\sub</span></code>&#65289;&#65292;<code class="docutils literal notranslate"><span class="pre">s</span> <span class="pre">&#8745;</span> <span class="pre">t</span></code> &#25351;&#20132;&#38598;&#65288; <code class="docutils literal notranslate"><span class="pre">\i</span></code> &#25110; <code class="docutils literal notranslate"><span class="pre">\cap</span></code> &#65289;&#65292; <code class="docutils literal notranslate"><span class="pre">s</span> <span class="pre">&#8746;</span> <span class="pre">t</span></code> &#25351;&#24182;&#38598;&#65288; <code class="docutils literal notranslate"><span class="pre">\un</span></code> &#25110; <code class="docutils literal notranslate"><span class="pre">\cup</span></code> &#65289;&#12290;&#24211;&#20013;&#20063;&#23450;&#20041;&#20102;&#38598;&#21512; <code class="docutils literal notranslate"><span class="pre">univ</span></code>, &#23427;&#21253;&#21547;&#31867;&#22411; <code class="docutils literal notranslate"><span class="pre">&#945;</span></code> &#30340;&#20840;&#37096;&#20803;&#32032;&#65292;&#20197;&#21450;&#31354;&#38598; <code class="docutils literal notranslate"><span class="pre">&#8709;</span></code> &#65288; <code class="docutils literal notranslate"><span class="pre">\empty</span></code> &#65289;&#12290;&#32473;&#23450; <code class="docutils literal notranslate"><span class="pre">x</span> <span class="pre">:</span> <span class="pre">&#945;</span></code> &#21644; <code class="docutils literal notranslate"><span class="pre">s</span> <span class="pre">:</span> <span class="pre">Set</span> <span class="pre">&#945;</span></code>, <code class="docutils literal notranslate"><span class="pre">x</span> <span class="pre">&#8712;</span> <span class="pre">s</span></code> &#34920;&#31034; <code class="docutils literal notranslate"><span class="pre">x</span></code> &#23646;&#20110; <code class="docutils literal notranslate"><span class="pre">s</span></code> &#65288; <code class="docutils literal notranslate"><span class="pre">\in</span></code> &#25110; <code class="docutils literal notranslate"><span class="pre">\mem</span></code> &#65292;&#28041;&#21450;&#38598;&#21512;&#25104;&#21592;&#20851;&#31995;&#30340;&#23450;&#29702;&#30340;&#21517;&#23383;&#32463;&#24120;&#21547;&#26377; <code class="docutils literal notranslate"><span class="pre">mem</span></code>&#65289;&#12290; <code class="docutils literal notranslate"><span class="pre">x</span> <span class="pre">&#8713;</span> <span class="pre">s</span></code> &#65288; <code class="docutils literal notranslate"><span class="pre">\notin</span></code> &#65289;&#26159; <code class="docutils literal notranslate"><span class="pre">&#172;</span> <span class="pre">x</span> <span class="pre">&#8712;</span> <span class="pre">s</span></code> &#30340;&#32553;&#20889;&#12290;</p>
<p id="index-1">&#35777;&#26126;&#20851;&#20110;&#38598;&#21512;&#30340;&#21629;&#39064;&#30340;&#19968;&#31181;&#26041;&#27861;&#26159;&#20351;&#29992; <code class="docutils literal notranslate"><span class="pre">rw</span></code> &#25110; <code class="docutils literal notranslate"><span class="pre">simp</span></code> &#26469;&#23637;&#24320;&#23450;&#20041;&#12290;&#22312;&#19979;&#38754;&#30340;&#31532;&#20108;&#20010;&#20363;&#23376;&#20013;&#65292;&#25105;&#20204;&#20351;&#29992; <code class="docutils literal notranslate"><span class="pre">simp</span> <span class="pre">only</span></code> &#21578;&#35785;&#21270;&#31616;&#22120;&#21482;&#20351;&#29992;&#25105;&#20204;&#25552;&#20379;&#30340;&#21015;&#34920;&#20013;&#30340;&#31561;&#24335;&#65292;&#32780;&#19981;&#26159;&#25972;&#20010;&#25968;&#25454;&#24211;&#20013;&#30340;&#31561;&#24335;&#12290;&#19981;&#21516;&#20110; <code class="docutils literal notranslate"><span class="pre">rw</span></code>, <code class="docutils literal notranslate"><span class="pre">simp</span></code> &#21487;&#20197;&#22312;&#20840;&#31216;&#25110;&#23384;&#22312;&#37327;&#35789;&#20869;&#23454;&#26045;&#21270;&#31616;&#12290;</p>
<div class="highlight-lean notranslate"><div class="highlight"><pre><span></span><span class="kd">variable</span><span class="w"> </span><span class="o">{</span><span class="n">&#945;</span><span class="w"> </span><span class="o">:</span><span class="w"> </span><span class="kt">Type</span><span class="bp">*</span><span class="o">}</span>
<span class="kd">variable</span><span class="w"> </span><span class="o">(</span><span class="n">s</span><span class="w"> </span><span class="n">t</span><span class="w"> </span><span class="n">u</span><span class="w"> </span><span class="o">:</span><span class="w"> </span><span class="n">Set</span><span class="w"> </span><span class="n">&#945;</span><span class="o">)</span>
<span class="kn">open</span><span class="w"> </span><span class="n">Set</span>

<span class="kd">example</span><span class="w"> </span><span class="o">(</span><span class="n">h</span><span class="w"> </span><span class="o">:</span><span class="w"> </span><span class="n">s</span><span class="w"> </span><span class="bp">&#8838;</span><span class="w"> </span><span class="n">t</span><span class="o">)</span><span class="w"> </span><span class="o">:</span><span class="w"> </span><span class="n">s</span><span class="w"> </span><span class="bp">&#8745;</span><span class="w"> </span><span class="n">u</span><span class="w"> </span><span class="bp">&#8838;</span><span class="w"> </span><span class="n">t</span><span class="w"> </span><span class="bp">&#8745;</span><span class="w"> </span><span class="n">u</span><span class="w"> </span><span class="o">:=</span><span class="w"> </span><span class="kd">by</span>
<span class="w">  </span><span class="n">rw</span><span class="w"> </span><span class="o">[</span><span class="n">subset_def</span><span class="o">,</span><span class="w"> </span><span class="n">inter_def</span><span class="o">,</span><span class="w"> </span><span class="n">inter_def</span><span class="o">]</span>
<span class="w">  </span><span class="n">rw</span><span class="w"> </span><span class="o">[</span><span class="n">subset_def</span><span class="o">]</span><span class="w"> </span><span class="n">at</span><span class="w"> </span><span class="n">h</span>
<span class="w">  </span><span class="n">simp</span><span class="w"> </span><span class="n">only</span><span class="w"> </span><span class="o">[</span><span class="n">mem_setOf</span><span class="o">]</span>
<span class="w">  </span><span class="n">rintro</span><span class="w"> </span><span class="n">x</span><span class="w"> </span><span class="o">&#10216;</span><span class="n">xs</span><span class="o">,</span><span class="w"> </span><span class="n">xu</span><span class="o">&#10217;</span>
<span class="w">  </span><span class="n">exact</span><span class="w"> </span><span class="o">&#10216;</span><span class="n">h</span><span class="w"> </span><span class="n">_</span><span class="w"> </span><span class="n">xs</span><span class="o">,</span><span class="w"> </span><span class="n">xu</span><span class="o">&#10217;</span>

<span class="kd">example</span><span class="w"> </span><span class="o">(</span><span class="n">h</span><span class="w"> </span><span class="o">:</span><span class="w"> </span><span class="n">s</span><span class="w"> </span><span class="bp">&#8838;</span><span class="w"> </span><span class="n">t</span><span class="o">)</span><span class="w"> </span><span class="o">:</span><span class="w"> </span><span class="n">s</span><span class="w"> </span><span class="bp">&#8745;</span><span class="w"> </span><span class="n">u</span><span class="w"> </span><span class="bp">&#8838;</span><span class="w"> </span><span class="n">t</span><span class="w"> </span><span class="bp">&#8745;</span><span class="w"> </span><span class="n">u</span><span class="w"> </span><span class="o">:=</span><span class="w"> </span><span class="kd">by</span>
<span class="w">  </span><span class="n">simp</span><span class="w"> </span><span class="n">only</span><span class="w"> </span><span class="o">[</span><span class="n">subset_def</span><span class="o">,</span><span class="w"> </span><span class="n">mem_inter_iff</span><span class="o">]</span><span class="w"> </span><span class="n">at</span><span class="w"> </span><span class="bp">*</span>
<span class="w">  </span><span class="n">rintro</span><span class="w"> </span><span class="n">x</span><span class="w"> </span><span class="o">&#10216;</span><span class="n">xs</span><span class="o">,</span><span class="w"> </span><span class="n">xu</span><span class="o">&#10217;</span>
<span class="w">  </span><span class="n">exact</span><span class="w"> </span><span class="o">&#10216;</span><span class="n">h</span><span class="w"> </span><span class="n">_</span><span class="w"> </span><span class="n">xs</span><span class="o">,</span><span class="w"> </span><span class="n">xu</span><span class="o">&#10217;</span>
</pre></div>
</div>
<p>&#26412;&#20363;&#20013;&#65292;&#25105;&#20204;&#25171;&#24320;&#20102; <code class="docutils literal notranslate"><span class="pre">Set</span></code> &#21629;&#21517;&#31354;&#38388;&#20197;&#29992;&#26356;&#30701;&#30340;&#23450;&#29702;&#21517;&#35775;&#38382;&#23450;&#29702;&#12290;&#20107;&#23454;&#19978;&#65292;&#25105;&#20204;&#23436;&#20840;&#21487;&#20197;&#19981;&#29992; <code class="docutils literal notranslate"><span class="pre">rw</span></code> &#21644; <code class="docutils literal notranslate"><span class="pre">simp</span></code> &#65306;</p>
<div class="highlight-lean notranslate"><div class="highlight"><pre><span></span><span class="kd">example</span><span class="w"> </span><span class="o">(</span><span class="n">h</span><span class="w"> </span><span class="o">:</span><span class="w"> </span><span class="n">s</span><span class="w"> </span><span class="bp">&#8838;</span><span class="w"> </span><span class="n">t</span><span class="o">)</span><span class="w"> </span><span class="o">:</span><span class="w"> </span><span class="n">s</span><span class="w"> </span><span class="bp">&#8745;</span><span class="w"> </span><span class="n">u</span><span class="w"> </span><span class="bp">&#8838;</span><span class="w"> </span><span class="n">t</span><span class="w"> </span><span class="bp">&#8745;</span><span class="w"> </span><span class="n">u</span><span class="w"> </span><span class="o">:=</span><span class="w"> </span><span class="kd">by</span>
<span class="w">  </span><span class="n">intro</span><span class="w"> </span><span class="n">x</span><span class="w"> </span><span class="n">xsu</span>
<span class="w">  </span><span class="n">exact</span><span class="w"> </span><span class="o">&#10216;</span><span class="n">h</span><span class="w"> </span><span class="n">xsu</span><span class="bp">.</span><span class="mi">1</span><span class="o">,</span><span class="w"> </span><span class="n">xsu</span><span class="bp">.</span><span class="mi">2</span><span class="o">&#10217;</span>
</pre></div>
</div>
<p>&#36825;&#21483;&#20570; <strong>&#23450;&#20041;&#35268;&#32422;&#65288;definitional reduction&#65289;</strong> &#65306;&#20026;&#20102;&#29702;&#35299; <code class="docutils literal notranslate"><span class="pre">intro</span></code> &#21629;&#20196;&#21644;&#21311;&#21517;&#26500;&#36896;&#23376;&#65292;Lean &#19981;&#24471;&#19981;&#23637;&#24320;&#23450;&#20041;&#12290;&#19979;&#38754;&#30340;&#20363;&#23376;&#20063;&#35828;&#26126;&#20102;&#36825;&#19968;&#29616;&#35937;&#65306;</p>
<div class="highlight-lean notranslate"><div class="highlight"><pre><span></span><span class="kd">example</span><span class="w"> </span><span class="o">(</span><span class="n">h</span><span class="w"> </span><span class="o">:</span><span class="w"> </span><span class="n">s</span><span class="w"> </span><span class="bp">&#8838;</span><span class="w"> </span><span class="n">t</span><span class="o">)</span><span class="w"> </span><span class="o">:</span><span class="w"> </span><span class="n">s</span><span class="w"> </span><span class="bp">&#8745;</span><span class="w"> </span><span class="n">u</span><span class="w"> </span><span class="bp">&#8838;</span><span class="w"> </span><span class="n">t</span><span class="w"> </span><span class="bp">&#8745;</span><span class="w"> </span><span class="n">u</span><span class="w"> </span><span class="o">:=</span>
<span class="w">  </span><span class="k">fun</span><span class="w"> </span><span class="n">x</span><span class="w"> </span><span class="o">&#10216;</span><span class="n">xs</span><span class="o">,</span><span class="w"> </span><span class="n">xu</span><span class="o">&#10217;</span><span class="w"> </span><span class="bp">&#8614;</span><span class="w"> </span><span class="o">&#10216;</span><span class="n">h</span><span class="w"> </span><span class="n">xs</span><span class="o">,</span><span class="w"> </span><span class="n">xu</span><span class="o">&#10217;</span>
</pre></div>
</div>
<p>&#20026;&#20102;&#22788;&#29702;&#24182;&#38598;&#65292;&#25105;&#20204;&#21487;&#20197;&#20351;&#29992; <code class="docutils literal notranslate"><span class="pre">Set.union_def</span></code> &#21644; <code class="docutils literal notranslate"><span class="pre">Set.mem_union</span></code> &#12290;&#30001;&#20110; <code class="docutils literal notranslate"><span class="pre">x</span> <span class="pre">&#8712;</span> <span class="pre">s</span> <span class="pre">&#8746;</span> <span class="pre">t</span></code> &#23637;&#24320;&#20026; <code class="docutils literal notranslate"><span class="pre">x</span> <span class="pre">&#8712;</span> <span class="pre">s</span> <span class="pre">&#8744;</span> <span class="pre">x</span> <span class="pre">&#8712;</span> <span class="pre">t</span></code>, &#25105;&#20204;&#20063;&#21487;&#20197;&#20351;&#29992; <code class="docutils literal notranslate"><span class="pre">cases</span></code> &#31574;&#30053;&#24378;&#21046;&#35201;&#27714;&#23450;&#20041;&#35268;&#32422;&#12290;</p>
<div class="highlight-lean notranslate"><div class="highlight"><pre><span></span><span class="kd">example</span><span class="w"> </span><span class="o">:</span><span class="w"> </span><span class="n">s</span><span class="w"> </span><span class="bp">&#8745;</span><span class="w"> </span><span class="o">(</span><span class="n">t</span><span class="w"> </span><span class="bp">&#8746;</span><span class="w"> </span><span class="n">u</span><span class="o">)</span><span class="w"> </span><span class="bp">&#8838;</span><span class="w"> </span><span class="n">s</span><span class="w"> </span><span class="bp">&#8745;</span><span class="w"> </span><span class="n">t</span><span class="w"> </span><span class="bp">&#8746;</span><span class="w"> </span><span class="n">s</span><span class="w"> </span><span class="bp">&#8745;</span><span class="w"> </span><span class="n">u</span><span class="w"> </span><span class="o">:=</span><span class="w"> </span><span class="kd">by</span>
<span class="w">  </span><span class="n">intro</span><span class="w"> </span><span class="n">x</span><span class="w"> </span><span class="n">hx</span>
<span class="w">  </span><span class="k">have</span><span class="w"> </span><span class="n">xs</span><span class="w"> </span><span class="o">:</span><span class="w"> </span><span class="n">x</span><span class="w"> </span><span class="bp">&#8712;</span><span class="w"> </span><span class="n">s</span><span class="w"> </span><span class="o">:=</span><span class="w"> </span><span class="n">hx</span><span class="bp">.</span><span class="mi">1</span>
<span class="w">  </span><span class="k">have</span><span class="w"> </span><span class="n">xtu</span><span class="w"> </span><span class="o">:</span><span class="w"> </span><span class="n">x</span><span class="w"> </span><span class="bp">&#8712;</span><span class="w"> </span><span class="n">t</span><span class="w"> </span><span class="bp">&#8746;</span><span class="w"> </span><span class="n">u</span><span class="w"> </span><span class="o">:=</span><span class="w"> </span><span class="n">hx</span><span class="bp">.</span><span class="mi">2</span>
<span class="w">  </span><span class="n">rcases</span><span class="w"> </span><span class="n">xtu</span><span class="w"> </span><span class="k">with</span><span class="w"> </span><span class="n">xt</span><span class="w"> </span><span class="bp">|</span><span class="w"> </span><span class="n">xu</span>
<span class="w">  </span><span class="bp">&#183;</span><span class="w"> </span><span class="n">left</span>
<span class="w">    </span><span class="k">show</span><span class="w"> </span><span class="n">x</span><span class="w"> </span><span class="bp">&#8712;</span><span class="w"> </span><span class="n">s</span><span class="w"> </span><span class="bp">&#8745;</span><span class="w"> </span><span class="n">t</span>
<span class="w">    </span><span class="n">exact</span><span class="w"> </span><span class="o">&#10216;</span><span class="n">xs</span><span class="o">,</span><span class="w"> </span><span class="n">xt</span><span class="o">&#10217;</span>
<span class="w">  </span><span class="bp">&#183;</span><span class="w"> </span><span class="n">right</span>
<span class="w">    </span><span class="k">show</span><span class="w"> </span><span class="n">x</span><span class="w"> </span><span class="bp">&#8712;</span><span class="w"> </span><span class="n">s</span><span class="w"> </span><span class="bp">&#8745;</span><span class="w"> </span><span class="n">u</span>
<span class="w">    </span><span class="n">exact</span><span class="w"> </span><span class="o">&#10216;</span><span class="n">xs</span><span class="o">,</span><span class="w"> </span><span class="n">xu</span><span class="o">&#10217;</span>
</pre></div>
</div>
<p>&#20132;&#38598;&#27604;&#24182;&#38598;&#20248;&#20808;&#32423;&#26356;&#39640;&#65292;&#34920;&#36798;&#24335; <code class="docutils literal notranslate"><span class="pre">(s</span> <span class="pre">&#8745;</span> <span class="pre">t)</span> <span class="pre">&#8746;</span> <span class="pre">(s</span> <span class="pre">&#8745;</span> <span class="pre">u)</span></code> &#20013;&#19981;&#24517;&#38656;&#20351;&#29992;&#25324;&#21495;&#65292;&#20294;&#20351;&#29992;&#25324;&#21495;&#20250;&#26356;&#26131;&#35835;&#12290;&#19979;&#38754;&#26159;&#26356;&#31616;&#30701;&#30340;&#35777;&#26126;&#12290;&#20351;&#29992; <code class="docutils literal notranslate"><span class="pre">rintro</span></code> &#26102;&#65292;&#26377;&#26102;&#25105;&#20204;&#38656;&#35201;&#20351;&#29992;&#25324;&#21495;&#21253;&#22260;&#26512;&#21462;&#27169;&#24335; <code class="docutils literal notranslate"><span class="pre">h1</span> <span class="pre">|</span> <span class="pre">h2</span></code> &#20351;&#24471; Lean &#33021;&#27491;&#30830;&#35299;&#26512;&#23427;&#12290;</p>
<div class="highlight-lean notranslate"><div class="highlight"><pre><span></span><span class="kd">example</span><span class="w"> </span><span class="o">:</span><span class="w"> </span><span class="n">s</span><span class="w"> </span><span class="bp">&#8745;</span><span class="w"> </span><span class="o">(</span><span class="n">t</span><span class="w"> </span><span class="bp">&#8746;</span><span class="w"> </span><span class="n">u</span><span class="o">)</span><span class="w"> </span><span class="bp">&#8838;</span><span class="w"> </span><span class="n">s</span><span class="w"> </span><span class="bp">&#8745;</span><span class="w"> </span><span class="n">t</span><span class="w"> </span><span class="bp">&#8746;</span><span class="w"> </span><span class="n">s</span><span class="w"> </span><span class="bp">&#8745;</span><span class="w"> </span><span class="n">u</span><span class="w"> </span><span class="o">:=</span><span class="w"> </span><span class="kd">by</span>
<span class="w">  </span><span class="n">rintro</span><span class="w"> </span><span class="n">x</span><span class="w"> </span><span class="o">&#10216;</span><span class="n">xs</span><span class="o">,</span><span class="w"> </span><span class="n">xt</span><span class="w"> </span><span class="bp">|</span><span class="w"> </span><span class="n">xu</span><span class="o">&#10217;</span>
<span class="w">  </span><span class="bp">&#183;</span><span class="w"> </span><span class="n">left</span><span class="bp">;</span><span class="w"> </span><span class="n">exact</span><span class="w"> </span><span class="o">&#10216;</span><span class="n">xs</span><span class="o">,</span><span class="w"> </span><span class="n">xt</span><span class="o">&#10217;</span>
<span class="w">  </span><span class="bp">&#183;</span><span class="w"> </span><span class="n">right</span><span class="bp">;</span><span class="w"> </span><span class="n">exact</span><span class="w"> </span><span class="o">&#10216;</span><span class="n">xs</span><span class="o">,</span><span class="w"> </span><span class="n">xu</span><span class="o">&#10217;</span>
</pre></div>
</div>
<p>&#20316;&#20026;&#32451;&#20064;&#65292;&#35797;&#30528;&#35777;&#26126;&#21453;&#21521;&#30340;&#21253;&#21547;&#20851;&#31995;&#65306;</p>
<div class="highlight-lean notranslate"><div class="highlight"><pre><span></span><span class="kd">example</span><span class="w"> </span><span class="o">:</span><span class="w"> </span><span class="n">s</span><span class="w"> </span><span class="bp">&#8745;</span><span class="w"> </span><span class="n">t</span><span class="w"> </span><span class="bp">&#8746;</span><span class="w"> </span><span class="n">s</span><span class="w"> </span><span class="bp">&#8745;</span><span class="w"> </span><span class="n">u</span><span class="w"> </span><span class="bp">&#8838;</span><span class="w"> </span><span class="n">s</span><span class="w"> </span><span class="bp">&#8745;</span><span class="w"> </span><span class="o">(</span><span class="n">t</span><span class="w"> </span><span class="bp">&#8746;</span><span class="w"> </span><span class="n">u</span><span class="o">)</span><span class="w"> </span><span class="o">:=</span><span class="w"> </span><span class="kd">by</span>
<span class="w">  </span><span class="gr">sorry</span>
</pre></div>
</div>
<p>&#24211;&#37324;&#20063;&#23450;&#20041;&#20102;&#24046;&#38598; <code class="docutils literal notranslate"><span class="pre">s</span> <span class="pre">\</span> <span class="pre">t</span></code> &#65288;&#21453;&#26012;&#32447;&#20197; <code class="docutils literal notranslate"><span class="pre">\\</span></code> &#36755;&#20837;&#65289;&#12290;&#34920;&#36798;&#24335; <code class="docutils literal notranslate"><span class="pre">x</span> <span class="pre">&#8712;</span> <span class="pre">s</span> <span class="pre">\</span> <span class="pre">t</span></code> &#23637;&#24320;&#20026; <code class="docutils literal notranslate"><span class="pre">x</span> <span class="pre">&#8712;</span> <span class="pre">s</span> <span class="pre">&#8743;</span> <span class="pre">x</span> <span class="pre">&#8713;</span> <span class="pre">t</span></code> &#12290;&#21487;&#20197;&#20351;&#29992; <code class="docutils literal notranslate"><span class="pre">Set.diff_eq</span></code> &#21644; <code class="docutils literal notranslate"><span class="pre">dsimp</span></code> &#25110; <code class="docutils literal notranslate"><span class="pre">Set.mem_diff</span></code> &#25163;&#21160;&#37325;&#20889;&#23427;&#65292;&#32780;&#19979;&#38754;&#30340;&#20004;&#20010;&#35777;&#26126;&#23637;&#31034;&#20102;&#36825;&#19968;&#28857;&#21644;&#26356;&#31616;&#27905;&#30340;&#26041;&#26696;&#12290;</p>
<div class="highlight-lean notranslate"><div class="highlight"><pre><span></span><span class="kd">example</span><span class="w"> </span><span class="o">:</span><span class="w"> </span><span class="o">(</span><span class="n">s</span><span class="w"> </span><span class="bp">\</span><span class="w"> </span><span class="n">t</span><span class="o">)</span><span class="w"> </span><span class="bp">\</span><span class="w"> </span><span class="n">u</span><span class="w"> </span><span class="bp">&#8838;</span><span class="w"> </span><span class="n">s</span><span class="w"> </span><span class="bp">\</span><span class="w"> </span><span class="o">(</span><span class="n">t</span><span class="w"> </span><span class="bp">&#8746;</span><span class="w"> </span><span class="n">u</span><span class="o">)</span><span class="w"> </span><span class="o">:=</span><span class="w"> </span><span class="kd">by</span>
<span class="w">  </span><span class="n">intro</span><span class="w"> </span><span class="n">x</span><span class="w"> </span><span class="n">xstu</span>
<span class="w">  </span><span class="k">have</span><span class="w"> </span><span class="n">xs</span><span class="w"> </span><span class="o">:</span><span class="w"> </span><span class="n">x</span><span class="w"> </span><span class="bp">&#8712;</span><span class="w"> </span><span class="n">s</span><span class="w"> </span><span class="o">:=</span><span class="w"> </span><span class="n">xstu</span><span class="bp">.</span><span class="mi">1</span><span class="bp">.</span><span class="mi">1</span>
<span class="w">  </span><span class="k">have</span><span class="w"> </span><span class="n">xnt</span><span class="w"> </span><span class="o">:</span><span class="w"> </span><span class="n">x</span><span class="w"> </span><span class="bp">&#8713;</span><span class="w"> </span><span class="n">t</span><span class="w"> </span><span class="o">:=</span><span class="w"> </span><span class="n">xstu</span><span class="bp">.</span><span class="mi">1</span><span class="bp">.</span><span class="mi">2</span>
<span class="w">  </span><span class="k">have</span><span class="w"> </span><span class="n">xnu</span><span class="w"> </span><span class="o">:</span><span class="w"> </span><span class="n">x</span><span class="w"> </span><span class="bp">&#8713;</span><span class="w"> </span><span class="n">u</span><span class="w"> </span><span class="o">:=</span><span class="w"> </span><span class="n">xstu</span><span class="bp">.</span><span class="mi">2</span>
<span class="w">  </span><span class="n">constructor</span>
<span class="w">  </span><span class="bp">&#183;</span><span class="w"> </span><span class="n">exact</span><span class="w"> </span><span class="n">xs</span>
<span class="w">  </span><span class="n">intro</span><span class="w"> </span><span class="n">xtu</span>
<span class="w">  </span><span class="c1">-- x &#8712; t &#8744; x &#8712; u</span>
<span class="w">  </span><span class="n">rcases</span><span class="w"> </span><span class="n">xtu</span><span class="w"> </span><span class="k">with</span><span class="w"> </span><span class="n">xt</span><span class="w"> </span><span class="bp">|</span><span class="w"> </span><span class="n">xu</span>
<span class="w">  </span><span class="bp">&#183;</span><span class="w"> </span><span class="k">show</span><span class="w"> </span><span class="n">False</span><span class="bp">;</span><span class="w"> </span><span class="n">exact</span><span class="w"> </span><span class="n">xnt</span><span class="w"> </span><span class="n">xt</span>
<span class="w">  </span><span class="bp">&#183;</span><span class="w"> </span><span class="k">show</span><span class="w"> </span><span class="n">False</span><span class="bp">;</span><span class="w"> </span><span class="n">exact</span><span class="w"> </span><span class="n">xnu</span><span class="w"> </span><span class="n">xu</span>

<span class="kd">example</span><span class="w"> </span><span class="o">:</span><span class="w"> </span><span class="o">(</span><span class="n">s</span><span class="w"> </span><span class="bp">\</span><span class="w"> </span><span class="n">t</span><span class="o">)</span><span class="w"> </span><span class="bp">\</span><span class="w"> </span><span class="n">u</span><span class="w"> </span><span class="bp">&#8838;</span><span class="w"> </span><span class="n">s</span><span class="w"> </span><span class="bp">\</span><span class="w"> </span><span class="o">(</span><span class="n">t</span><span class="w"> </span><span class="bp">&#8746;</span><span class="w"> </span><span class="n">u</span><span class="o">)</span><span class="w"> </span><span class="o">:=</span><span class="w"> </span><span class="kd">by</span>
<span class="w">  </span><span class="n">rintro</span><span class="w"> </span><span class="n">x</span><span class="w"> </span><span class="o">&#10216;&#10216;</span><span class="n">xs</span><span class="o">,</span><span class="w"> </span><span class="n">xnt</span><span class="o">&#10217;,</span><span class="w"> </span><span class="n">xnu</span><span class="o">&#10217;</span>
<span class="w">  </span><span class="n">use</span><span class="w"> </span><span class="n">xs</span>
<span class="w">  </span><span class="n">rintro</span><span class="w"> </span><span class="o">(</span><span class="n">xt</span><span class="w"> </span><span class="bp">|</span><span class="w"> </span><span class="n">xu</span><span class="o">)</span><span class="w"> </span><span class="bp">&lt;;&gt;</span><span class="w"> </span><span class="n">contradiction</span>
</pre></div>
</div>
<p>&#20316;&#20026;&#32451;&#20064;&#65292;&#35777;&#26126;&#21453;&#21521;&#30340;&#21253;&#21547;&#20851;&#31995;&#65306;</p>
<div class="highlight-lean notranslate"><div class="highlight"><pre><span></span><span class="kd">example</span><span class="w"> </span><span class="o">:</span><span class="w"> </span><span class="n">s</span><span class="w"> </span><span class="bp">\</span><span class="w"> </span><span class="o">(</span><span class="n">t</span><span class="w"> </span><span class="bp">&#8746;</span><span class="w"> </span><span class="n">u</span><span class="o">)</span><span class="w"> </span><span class="bp">&#8838;</span><span class="w"> </span><span class="o">(</span><span class="n">s</span><span class="w"> </span><span class="bp">\</span><span class="w"> </span><span class="n">t</span><span class="o">)</span><span class="w"> </span><span class="bp">\</span><span class="w"> </span><span class="n">u</span><span class="w"> </span><span class="o">:=</span><span class="w"> </span><span class="kd">by</span>
<span class="w">  </span><span class="gr">sorry</span>
</pre></div>
</div>
<p>&#35201;&#35777;&#26126;&#20004;&#20010;&#38598;&#21512;&#30456;&#31561;&#65292;&#21482;&#38656;&#35777;&#26126;&#20219;&#19968;&#38598;&#21512;&#20013;&#30340;&#27599;&#20010;&#20803;&#32032;&#37117;&#26159;&#21478;&#19968;&#20010;&#38598;&#21512;&#20013;&#30340;&#20803;&#32032;&#12290;&#36825;&#20010;&#21407;&#29702;&#31216;&#20026;&#8220;&#22806;&#24310;&#24615;&#8221;&#65292; <code class="docutils literal notranslate"><span class="pre">ext</span></code> &#31574;&#30053;&#21487;&#20197;&#29992;&#20110;&#22788;&#29702;&#23427;&#12290;</p>
<div class="highlight-lean notranslate"><div class="highlight"><pre><span></span><span class="kd">example</span><span class="w"> </span><span class="o">:</span><span class="w"> </span><span class="n">s</span><span class="w"> </span><span class="bp">&#8745;</span><span class="w"> </span><span class="n">t</span><span class="w"> </span><span class="bp">=</span><span class="w"> </span><span class="n">t</span><span class="w"> </span><span class="bp">&#8745;</span><span class="w"> </span><span class="n">s</span><span class="w"> </span><span class="o">:=</span><span class="w"> </span><span class="kd">by</span>
<span class="w">  </span><span class="n">ext</span><span class="w"> </span><span class="n">x</span>
<span class="w">  </span><span class="n">simp</span><span class="w"> </span><span class="n">only</span><span class="w"> </span><span class="o">[</span><span class="n">mem_inter_iff</span><span class="o">]</span>
<span class="w">  </span><span class="n">constructor</span>
<span class="w">  </span><span class="bp">&#183;</span><span class="w"> </span><span class="n">rintro</span><span class="w"> </span><span class="o">&#10216;</span><span class="n">xs</span><span class="o">,</span><span class="w"> </span><span class="n">xt</span><span class="o">&#10217;</span><span class="bp">;</span><span class="w"> </span><span class="n">exact</span><span class="w"> </span><span class="o">&#10216;</span><span class="n">xt</span><span class="o">,</span><span class="w"> </span><span class="n">xs</span><span class="o">&#10217;</span>
<span class="w">  </span><span class="bp">&#183;</span><span class="w"> </span><span class="n">rintro</span><span class="w"> </span><span class="o">&#10216;</span><span class="n">xt</span><span class="o">,</span><span class="w"> </span><span class="n">xs</span><span class="o">&#10217;</span><span class="bp">;</span><span class="w"> </span><span class="n">exact</span><span class="w"> </span><span class="o">&#10216;</span><span class="n">xs</span><span class="o">,</span><span class="w"> </span><span class="n">xt</span><span class="o">&#10217;</span>
</pre></div>
</div>
<p>&#21024;&#38500; <code class="docutils literal notranslate"><span class="pre">simp</span> <span class="pre">only</span> <span class="pre">[mem_inter_iff]</span></code> &#19968;&#34892;&#24182;&#19981;&#20250;&#24433;&#21709;&#35777;&#26126;&#12290;&#19979;&#38754;&#30340;&#21333;&#34892;&#35777;&#26126;&#26356;&#31616;&#27905;&#20294;&#38590;&#35835;&#65306;</p>
<div class="highlight-lean notranslate"><div class="highlight"><pre><span></span><span class="kd">example</span><span class="w"> </span><span class="o">:</span><span class="w"> </span><span class="n">s</span><span class="w"> </span><span class="bp">&#8745;</span><span class="w"> </span><span class="n">t</span><span class="w"> </span><span class="bp">=</span><span class="w"> </span><span class="n">t</span><span class="w"> </span><span class="bp">&#8745;</span><span class="w"> </span><span class="n">s</span><span class="w"> </span><span class="o">:=</span>
<span class="w">  </span><span class="n">Set.ext</span><span class="w"> </span><span class="k">fun</span><span class="w"> </span><span class="n">x</span><span class="w"> </span><span class="bp">&#8614;</span><span class="w"> </span><span class="o">&#10216;</span><span class="k">fun</span><span class="w"> </span><span class="o">&#10216;</span><span class="n">xs</span><span class="o">,</span><span class="w"> </span><span class="n">xt</span><span class="o">&#10217;</span><span class="w"> </span><span class="bp">&#8614;</span><span class="w"> </span><span class="o">&#10216;</span><span class="n">xt</span><span class="o">,</span><span class="w"> </span><span class="n">xs</span><span class="o">&#10217;,</span><span class="w"> </span><span class="k">fun</span><span class="w"> </span><span class="o">&#10216;</span><span class="n">xt</span><span class="o">,</span><span class="w"> </span><span class="n">xs</span><span class="o">&#10217;</span><span class="w"> </span><span class="bp">&#8614;</span><span class="w"> </span><span class="o">&#10216;</span><span class="n">xs</span><span class="o">,</span><span class="w"> </span><span class="n">xt</span><span class="o">&#10217;&#10217;</span>
</pre></div>
</div>
<p>&#29978;&#33267;&#36824;&#33021;&#26356;&#30701;&#65306;</p>
<div class="highlight-lean notranslate"><div class="highlight"><pre><span></span><span class="kd">example</span><span class="w"> </span><span class="o">:</span><span class="w"> </span><span class="n">s</span><span class="w"> </span><span class="bp">&#8745;</span><span class="w"> </span><span class="n">t</span><span class="w"> </span><span class="bp">=</span><span class="w"> </span><span class="n">t</span><span class="w"> </span><span class="bp">&#8745;</span><span class="w"> </span><span class="n">s</span><span class="w"> </span><span class="o">:=</span><span class="w"> </span><span class="kd">by</span><span class="w"> </span><span class="n">ext</span><span class="w"> </span><span class="n">x</span><span class="bp">;</span><span class="w"> </span><span class="n">simp</span><span class="w"> </span><span class="o">[</span><span class="n">and_comm</span><span class="o">]</span>
</pre></div>
</div>
<p>&#38500;&#20102;&#20351;&#29992; <code class="docutils literal notranslate"><span class="pre">ext</span></code> &#20043;&#22806;&#65292;&#25105;&#20204;&#36824;&#21487;&#20197;&#20351;&#29992; <code class="docutils literal notranslate"><span class="pre">Subset.antisymm</span></code> &#36825;&#20010;&#23450;&#29702;&#65292;&#23427;&#21487;&#20197;&#36890;&#36807;&#35777;&#26126; <code class="docutils literal notranslate"><span class="pre">s</span> <span class="pre">&#8838;</span> <span class="pre">t</span></code> &#21644; <code class="docutils literal notranslate"><span class="pre">t</span> <span class="pre">&#8838;</span> <span class="pre">s</span></code> &#26469;&#35777;&#26126;&#38598;&#21512;&#38388;&#30340;&#31561;&#24335; <code class="docutils literal notranslate"><span class="pre">s</span> <span class="pre">=</span> <span class="pre">t</span></code> &#12290;</p>
<div class="highlight-lean notranslate"><div class="highlight"><pre><span></span><span class="kd">example</span><span class="w"> </span><span class="o">:</span><span class="w"> </span><span class="n">s</span><span class="w"> </span><span class="bp">&#8745;</span><span class="w"> </span><span class="n">t</span><span class="w"> </span><span class="bp">=</span><span class="w"> </span><span class="n">t</span><span class="w"> </span><span class="bp">&#8745;</span><span class="w"> </span><span class="n">s</span><span class="w"> </span><span class="o">:=</span><span class="w"> </span><span class="kd">by</span>
<span class="w">  </span><span class="n">apply</span><span class="w"> </span><span class="n">Subset.antisymm</span>
<span class="w">  </span><span class="bp">&#183;</span><span class="w"> </span><span class="n">rintro</span><span class="w"> </span><span class="n">x</span><span class="w"> </span><span class="o">&#10216;</span><span class="n">xs</span><span class="o">,</span><span class="w"> </span><span class="n">xt</span><span class="o">&#10217;</span><span class="bp">;</span><span class="w"> </span><span class="n">exact</span><span class="w"> </span><span class="o">&#10216;</span><span class="n">xt</span><span class="o">,</span><span class="w"> </span><span class="n">xs</span><span class="o">&#10217;</span>
<span class="w">  </span><span class="bp">&#183;</span><span class="w"> </span><span class="n">rintro</span><span class="w"> </span><span class="n">x</span><span class="w"> </span><span class="o">&#10216;</span><span class="n">xt</span><span class="o">,</span><span class="w"> </span><span class="n">xs</span><span class="o">&#10217;</span><span class="bp">;</span><span class="w"> </span><span class="n">exact</span><span class="w"> </span><span class="o">&#10216;</span><span class="n">xs</span><span class="o">,</span><span class="w"> </span><span class="n">xt</span><span class="o">&#10217;</span>
</pre></div>
</div>
<p>&#32451;&#20064;&#65306;</p>
<div class="highlight-lean notranslate"><div class="highlight"><pre><span></span><span class="kd">example</span><span class="w"> </span><span class="o">:</span><span class="w"> </span><span class="n">s</span><span class="w"> </span><span class="bp">&#8745;</span><span class="w"> </span><span class="n">t</span><span class="w"> </span><span class="bp">=</span><span class="w"> </span><span class="n">t</span><span class="w"> </span><span class="bp">&#8745;</span><span class="w"> </span><span class="n">s</span><span class="w"> </span><span class="o">:=</span>
<span class="w">    </span><span class="n">Subset.antisymm</span><span class="w"> </span><span class="gr">sorry</span><span class="w"> </span><span class="gr">sorry</span>
</pre></div>
</div>
<p>&#25216;&#24039;&#65306;&#20320;&#21487;&#20197;&#29992;&#19979;&#21010;&#32447;&#20195;&#26367; <code class="docutils literal notranslate"><span class="pre">sorry</span></code> &#65292;&#24182;&#23558;&#40736;&#26631;&#24748;&#20572;&#22312;&#23427;&#19978;&#38754;&#65292;Lean &#20250;&#21521;&#20320;&#26174;&#31034;&#23427;&#22312;&#36825;&#19968;&#20301;&#32622;&#30340;&#39044;&#26399;&#12290;</p>
<p>&#19979;&#38754;&#26159;&#19968;&#20123;&#20320;&#21487;&#33021;&#20250;&#21916;&#27426;&#30340;&#38598;&#21512;&#35770;&#24615;&#36136;&#65306;</p>
<div class="highlight-lean notranslate"><div class="highlight"><pre><span></span><span class="kd">example</span><span class="w"> </span><span class="o">:</span><span class="w"> </span><span class="n">s</span><span class="w"> </span><span class="bp">&#8745;</span><span class="w"> </span><span class="o">(</span><span class="n">s</span><span class="w"> </span><span class="bp">&#8746;</span><span class="w"> </span><span class="n">t</span><span class="o">)</span><span class="w"> </span><span class="bp">=</span><span class="w"> </span><span class="n">s</span><span class="w"> </span><span class="o">:=</span><span class="w"> </span><span class="kd">by</span>
<span class="w">  </span><span class="gr">sorry</span>

<span class="kd">example</span><span class="w"> </span><span class="o">:</span><span class="w"> </span><span class="n">s</span><span class="w"> </span><span class="bp">&#8746;</span><span class="w"> </span><span class="n">s</span><span class="w"> </span><span class="bp">&#8745;</span><span class="w"> </span><span class="n">t</span><span class="w"> </span><span class="bp">=</span><span class="w"> </span><span class="n">s</span><span class="w"> </span><span class="o">:=</span><span class="w"> </span><span class="kd">by</span>
<span class="w">  </span><span class="gr">sorry</span>

<span class="kd">example</span><span class="w"> </span><span class="o">:</span><span class="w"> </span><span class="n">s</span><span class="w"> </span><span class="bp">\</span><span class="w"> </span><span class="n">t</span><span class="w"> </span><span class="bp">&#8746;</span><span class="w"> </span><span class="n">t</span><span class="w"> </span><span class="bp">=</span><span class="w"> </span><span class="n">s</span><span class="w"> </span><span class="bp">&#8746;</span><span class="w"> </span><span class="n">t</span><span class="w"> </span><span class="o">:=</span><span class="w"> </span><span class="kd">by</span>
<span class="w">  </span><span class="gr">sorry</span>

<span class="kd">example</span><span class="w"> </span><span class="o">:</span><span class="w"> </span><span class="n">s</span><span class="w"> </span><span class="bp">\</span><span class="w"> </span><span class="n">t</span><span class="w"> </span><span class="bp">&#8746;</span><span class="w"> </span><span class="n">t</span><span class="w"> </span><span class="bp">\</span><span class="w"> </span><span class="n">s</span><span class="w"> </span><span class="bp">=</span><span class="w"> </span><span class="o">(</span><span class="n">s</span><span class="w"> </span><span class="bp">&#8746;</span><span class="w"> </span><span class="n">t</span><span class="o">)</span><span class="w"> </span><span class="bp">\</span><span class="w"> </span><span class="o">(</span><span class="n">s</span><span class="w"> </span><span class="bp">&#8745;</span><span class="w"> </span><span class="n">t</span><span class="o">)</span><span class="w"> </span><span class="o">:=</span><span class="w"> </span><span class="kd">by</span>
<span class="w">  </span><span class="gr">sorry</span>
</pre></div>
</div>
<p>&#35828;&#21040;&#38598;&#21512;&#30340;&#34920;&#31034;&#65292;&#19979;&#38754;&#23601;&#20026;&#22823;&#23478;&#25581;&#31192;&#32972;&#21518;&#30340;&#26426;&#21046;&#12290;&#22312;&#31867;&#22411;&#35770;&#20013;&#65292;&#31867;&#22411; <code class="docutils literal notranslate"><span class="pre">&#945;</span></code> &#19978;&#30340; <strong>&#24615;&#36136;</strong> &#25110; <strong>&#35859;&#35789;</strong> &#21482;&#26159;&#19968;&#20010;&#20989;&#25968; <code class="docutils literal notranslate"><span class="pre">P</span> <span class="pre">:</span> <span class="pre">&#945;</span> <span class="pre">&#8594;</span> <span class="pre">Prop</span></code> &#12290;&#36825;&#26159;&#26377;&#24847;&#20041;&#30340;&#65306;&#32473;&#23450; <code class="docutils literal notranslate"><span class="pre">a</span> <span class="pre">:</span> <span class="pre">&#945;</span></code>, <code class="docutils literal notranslate"><span class="pre">P</span> <span class="pre">a</span></code> &#23601;&#26159; <code class="docutils literal notranslate"><span class="pre">P</span></code> &#23545; <code class="docutils literal notranslate"><span class="pre">a</span></code> &#25104;&#31435;&#36825;&#19968;&#21629;&#39064;&#12290;&#22312;&#24211;&#20013;&#65292; <code class="docutils literal notranslate"><span class="pre">Set</span> <span class="pre">&#945;</span></code> &#23450;&#20041;&#20026; <code class="docutils literal notranslate"><span class="pre">&#945;</span> <span class="pre">&#8594;</span> <span class="pre">Prop</span></code> &#32780; <code class="docutils literal notranslate"><span class="pre">x</span> <span class="pre">&#8712;</span> <span class="pre">s</span></code> &#23450;&#20041;&#20026; <code class="docutils literal notranslate"><span class="pre">s</span> <span class="pre">x</span></code> &#12290;&#25442;&#21477;&#35805;&#35828;&#65292;&#38598;&#21512;&#23454;&#38469;&#19978;&#23601;&#26159;&#24615;&#36136;&#65292;&#21482;&#26159;&#34987;&#24403;&#25104;&#23545;&#35937;&#12290;</p>
<p>&#24211;&#20013;&#20063;&#23450;&#20041;&#20102;&#38598;&#21512;&#26500;&#36896;&#22120;&#30340;&#31526;&#21495;&#12290;&#34920;&#36798;&#24335; <code class="docutils literal notranslate"><span class="pre">{</span> <span class="pre">y</span> <span class="pre">|</span> <span class="pre">P</span> <span class="pre">y</span> <span class="pre">}</span></code> &#23637;&#24320;&#23601;&#26159; <code class="docutils literal notranslate"><span class="pre">(fun</span> <span class="pre">y</span> <span class="pre">&#8614;</span> <span class="pre">P</span> <span class="pre">y)</span></code> &#12290;&#22240;&#27492; <code class="docutils literal notranslate"><span class="pre">x</span> <span class="pre">&#8712;</span> <span class="pre">{</span> <span class="pre">y</span> <span class="pre">|</span> <span class="pre">P</span> <span class="pre">y</span> <span class="pre">}</span></code> &#35268;&#32422;&#20026; <code class="docutils literal notranslate"><span class="pre">P</span> <span class="pre">x</span></code> &#12290;&#22240;&#27492;&#25105;&#20204;&#21487;&#20197;&#25226;&#20598;&#25968;&#24615;&#36136;&#36716;&#21270;&#20026;&#20598;&#25968;&#38598;&#21512;&#65306;</p>
<div class="highlight-lean notranslate"><div class="highlight"><pre><span></span><span class="kd">def</span><span class="w"> </span><span class="n">evens</span><span class="w"> </span><span class="o">:</span><span class="w"> </span><span class="n">Set</span><span class="w"> </span><span class="n">&#8469;</span><span class="w"> </span><span class="o">:=</span>
<span class="w">  </span><span class="o">{</span><span class="w"> </span><span class="n">n</span><span class="w"> </span><span class="bp">|</span><span class="w"> </span><span class="n">Even</span><span class="w"> </span><span class="n">n</span><span class="w"> </span><span class="o">}</span>

<span class="kd">def</span><span class="w"> </span><span class="n">odds</span><span class="w"> </span><span class="o">:</span><span class="w"> </span><span class="n">Set</span><span class="w"> </span><span class="n">&#8469;</span><span class="w"> </span><span class="o">:=</span>
<span class="w">  </span><span class="o">{</span><span class="w"> </span><span class="n">n</span><span class="w"> </span><span class="bp">|</span><span class="w"> </span><span class="bp">&#172;</span><span class="n">Even</span><span class="w"> </span><span class="n">n</span><span class="w"> </span><span class="o">}</span>

<span class="kd">example</span><span class="w"> </span><span class="o">:</span><span class="w"> </span><span class="n">evens</span><span class="w"> </span><span class="bp">&#8746;</span><span class="w"> </span><span class="n">odds</span><span class="w"> </span><span class="bp">=</span><span class="w"> </span><span class="n">univ</span><span class="w"> </span><span class="o">:=</span><span class="w"> </span><span class="kd">by</span>
<span class="w">  </span><span class="n">rw</span><span class="w"> </span><span class="o">[</span><span class="n">evens</span><span class="o">,</span><span class="w"> </span><span class="n">odds</span><span class="o">]</span>
<span class="w">  </span><span class="n">ext</span><span class="w"> </span><span class="n">n</span>
<span class="w">  </span><span class="n">simp</span><span class="w"> </span><span class="o">[</span><span class="bp">-</span><span class="n">Nat.not_even_iff_odd</span><span class="o">]</span>
<span class="w">  </span><span class="n">apply</span><span class="w"> </span><span class="n">Classical.em</span>
</pre></div>
</div>
<p>&#20320;&#26368;&#22909;&#33021;&#19968;&#21477;&#19968;&#21477;&#30475;&#30475;&#36825;&#20010;&#35777;&#26126;&#12290;&#23581;&#35797;&#21024;&#38500; <code class="docutils literal notranslate"><span class="pre">rw</span> <span class="pre">[evens,</span> <span class="pre">odds]</span></code> &#36825;&#19968;&#34892;&#65292;&#35777;&#26126;&#20173;&#28982;&#25104;&#31435;&#12290;</p>
<p>&#20107;&#23454;&#19978;&#65292;&#38598;&#21512;&#26500;&#36896;&#22120;&#31526;&#21495;&#23450;&#20041;</p>
<ul class="simple">
<li><p><code class="docutils literal notranslate"><span class="pre">s</span> <span class="pre">&#8745;</span> <span class="pre">t</span></code> &#20026; <code class="docutils literal notranslate"><span class="pre">{x</span> <span class="pre">|</span> <span class="pre">x</span> <span class="pre">&#8712;</span> <span class="pre">s</span> <span class="pre">&#8743;</span> <span class="pre">x</span> <span class="pre">&#8712;</span> <span class="pre">t}</span></code></p></li>
<li><p><code class="docutils literal notranslate"><span class="pre">s</span> <span class="pre">&#8746;</span> <span class="pre">t</span></code> &#20026; <code class="docutils literal notranslate"><span class="pre">{x</span> <span class="pre">|</span> <span class="pre">x</span> <span class="pre">&#8712;</span> <span class="pre">s</span> <span class="pre">&#8744;</span> <span class="pre">x</span> <span class="pre">&#8712;</span> <span class="pre">t}</span></code></p></li>
<li><p><code class="docutils literal notranslate"><span class="pre">&#8709;</span></code> &#20026; <code class="docutils literal notranslate"><span class="pre">{x</span> <span class="pre">|</span> <span class="pre">False}</span></code></p></li>
<li><p><code class="docutils literal notranslate"><span class="pre">univ</span></code> &#20026; <code class="docutils literal notranslate"><span class="pre">{x</span> <span class="pre">|</span> <span class="pre">True}</span></code></p></li>
</ul>
<p>&#25105;&#20204;&#32463;&#24120;&#38656;&#35201;&#31934;&#30830;&#25351;&#23450; <code class="docutils literal notranslate"><span class="pre">&#8709;</span></code> &#21644; <code class="docutils literal notranslate"><span class="pre">univ</span></code> &#30340;&#31867;&#22411;&#65292;&#22240;&#20026; Lean &#24456;&#38590;&#29468;&#20986;&#25105;&#20204;&#25351;&#30340;&#26159;&#21738;&#31181;&#31867;&#22411;&#12290;&#19979;&#38754;&#30340;&#20363;&#23376;&#28436;&#31034;&#20102;&#24403;&#38656;&#35201;&#30340;&#26102;&#20505; Lean &#22914;&#20309;&#23637;&#24320;&#26368;&#21518;&#20004;&#20010;&#23450;&#20041;&#12290;&#22312;&#31532;&#20108;&#20010;&#20363;&#23376;&#20013;&#65292;<code class="docutils literal notranslate"><span class="pre">trivial</span></code> &#26159;&#24211;&#20013;&#23545; <code class="docutils literal notranslate"><span class="pre">True</span></code> &#30340;&#26631;&#20934;&#35777;&#26126;&#12290;</p>
<div class="highlight-lean notranslate"><div class="highlight"><pre><span></span><span class="kd">example</span><span class="w"> </span><span class="o">(</span><span class="n">x</span><span class="w"> </span><span class="o">:</span><span class="w"> </span><span class="n">&#8469;</span><span class="o">)</span><span class="w"> </span><span class="o">(</span><span class="n">h</span><span class="w"> </span><span class="o">:</span><span class="w"> </span><span class="n">x</span><span class="w"> </span><span class="bp">&#8712;</span><span class="w"> </span><span class="o">(</span><span class="bp">&#8709;</span><span class="w"> </span><span class="o">:</span><span class="w"> </span><span class="n">Set</span><span class="w"> </span><span class="n">&#8469;</span><span class="o">))</span><span class="w"> </span><span class="o">:</span><span class="w"> </span><span class="n">False</span><span class="w"> </span><span class="o">:=</span>
<span class="w">  </span><span class="n">h</span>

<span class="kd">example</span><span class="w"> </span><span class="o">(</span><span class="n">x</span><span class="w"> </span><span class="o">:</span><span class="w"> </span><span class="n">&#8469;</span><span class="o">)</span><span class="w"> </span><span class="o">:</span><span class="w"> </span><span class="n">x</span><span class="w"> </span><span class="bp">&#8712;</span><span class="w"> </span><span class="o">(</span><span class="n">univ</span><span class="w"> </span><span class="o">:</span><span class="w"> </span><span class="n">Set</span><span class="w"> </span><span class="n">&#8469;</span><span class="o">)</span><span class="w"> </span><span class="o">:=</span>
<span class="w">  </span><span class="n">trivial</span>
</pre></div>
</div>
<p>&#20316;&#20026;&#32451;&#20064;&#65292;&#35777;&#26126;&#19979;&#21015;&#21253;&#21547;&#20851;&#31995;&#12290;&#20351;&#29992; <code class="docutils literal notranslate"><span class="pre">intro</span> <span class="pre">n</span></code> &#20197;&#23637;&#24320;&#23376;&#38598;&#23450;&#20041;&#65292;&#20351;&#29992; <code class="docutils literal notranslate"><span class="pre">simp</span></code> &#25226;&#38598;&#21512;&#35770;&#26500;&#36896;&#32422;&#21270;&#20026;&#36923;&#36753;&#12290;&#25105;&#20204;&#20063;&#25512;&#33616;&#20351;&#29992;&#23450;&#29702; <code class="docutils literal notranslate"><span class="pre">Nat.Prime.eq_two_or_odd</span></code> &#21644; <code class="docutils literal notranslate"><span class="pre">Nat.even_iff</span></code> &#12290;</p>
<div class="highlight-lean notranslate"><div class="highlight"><pre><span></span><span class="kd">example</span><span class="w"> </span><span class="o">:</span><span class="w"> </span><span class="o">{</span><span class="w"> </span><span class="n">n</span><span class="w"> </span><span class="bp">|</span><span class="w"> </span><span class="n">Nat.Prime</span><span class="w"> </span><span class="n">n</span><span class="w"> </span><span class="o">}</span><span class="w"> </span><span class="bp">&#8745;</span><span class="w"> </span><span class="o">{</span><span class="w"> </span><span class="n">n</span><span class="w"> </span><span class="bp">|</span><span class="w"> </span><span class="n">n</span><span class="w"> </span><span class="bp">&gt;</span><span class="w"> </span><span class="mi">2</span><span class="w"> </span><span class="o">}</span><span class="w"> </span><span class="bp">&#8838;</span><span class="w"> </span><span class="o">{</span><span class="w"> </span><span class="n">n</span><span class="w"> </span><span class="bp">|</span><span class="w"> </span><span class="bp">&#172;</span><span class="n">Even</span><span class="w"> </span><span class="n">n</span><span class="w"> </span><span class="o">}</span><span class="w"> </span><span class="o">:=</span><span class="w"> </span><span class="kd">by</span>
<span class="w">  </span><span class="gr">sorry</span>
</pre></div>
</div>
<p>&#26377;&#28857;&#20196;&#20154;&#22256;&#24785;&#30340;&#26159;&#65292;&#24211;&#20013;&#26377;&#22810;&#20010;&#29256;&#26412;&#30340;&#35859;&#35789; <code class="docutils literal notranslate"><span class="pre">Prime</span></code> &#12290;&#26368;&#36890;&#29992;&#30340;&#35859;&#35789;&#23545;&#20219;&#20309;&#26377;&#38646;&#20803;&#32032;&#30340;&#20132;&#25442;&#24186;&#21322;&#32676;&#37117;&#26377;&#24847;&#20041;&#12290;&#35859;&#35789; <code class="docutils literal notranslate"><span class="pre">Nat.Prime</span></code> &#26159;&#38024;&#23545;&#33258;&#28982;&#25968;&#30340;&#12290;&#24184;&#36816;&#30340;&#26159;&#65292;&#26377;&#19968;&#20010;&#23450;&#29702;&#25351;&#20986;&#65292;&#22312;&#29305;&#23450;&#24773;&#20917;&#19979;&#36825;&#20004;&#20010;&#27010;&#24565;&#26159;&#19968;&#33268;&#30340;&#65292;&#25152;&#20197;&#20320;&#24635;&#26159;&#21487;&#20197;&#25226;&#19968;&#20010;&#35859;&#35789;&#25913;&#20889;&#25104;&#21478;&#19968;&#20010;&#35859;&#35789;&#12290;</p>
<div class="highlight-lean notranslate"><div class="highlight"><pre><span></span><span class="k">#print</span><span class="w"> </span><span class="n">Prime</span>

<span class="k">#print</span><span class="w"> </span><span class="n">Nat.Prime</span>

<span class="kd">example</span><span class="w"> </span><span class="o">(</span><span class="n">n</span><span class="w"> </span><span class="o">:</span><span class="w"> </span><span class="n">&#8469;</span><span class="o">)</span><span class="w"> </span><span class="o">:</span><span class="w"> </span><span class="n">Prime</span><span class="w"> </span><span class="n">n</span><span class="w"> </span><span class="bp">&#8596;</span><span class="w"> </span><span class="n">Nat.Prime</span><span class="w"> </span><span class="n">n</span><span class="w"> </span><span class="o">:=</span>
<span class="w">  </span><span class="n">Nat.prime_iff.symm</span>

<span class="kd">example</span><span class="w"> </span><span class="o">(</span><span class="n">n</span><span class="w"> </span><span class="o">:</span><span class="w"> </span><span class="n">&#8469;</span><span class="o">)</span><span class="w"> </span><span class="o">(</span><span class="n">h</span><span class="w"> </span><span class="o">:</span><span class="w"> </span><span class="n">Prime</span><span class="w"> </span><span class="n">n</span><span class="o">)</span><span class="w"> </span><span class="o">:</span><span class="w"> </span><span class="n">Nat.Prime</span><span class="w"> </span><span class="n">n</span><span class="w"> </span><span class="o">:=</span><span class="w"> </span><span class="kd">by</span>
<span class="w">  </span><span class="n">rw</span><span class="w"> </span><span class="o">[</span><span class="n">Nat.prime_iff</span><span class="o">]</span>
<span class="w">  </span><span class="n">exact</span><span class="w"> </span><span class="n">h</span>
</pre></div>
</div>
<p id="index-2"><code class="docutils literal notranslate"><span class="pre">rwa</span></code> &#31574;&#30053;&#26159;&#22312; <code class="docutils literal notranslate"><span class="pre">rw</span></code> &#21518;&#36319;&#30528;&#19968;&#20010; <code class="docutils literal notranslate"><span class="pre">assumption</span></code> &#31574;&#30053;&#12290;</p>
<div class="highlight-lean notranslate"><div class="highlight"><pre><span></span><span class="kd">example</span><span class="w"> </span><span class="o">(</span><span class="n">n</span><span class="w"> </span><span class="o">:</span><span class="w"> </span><span class="n">&#8469;</span><span class="o">)</span><span class="w"> </span><span class="o">(</span><span class="n">h</span><span class="w"> </span><span class="o">:</span><span class="w"> </span><span class="n">Prime</span><span class="w"> </span><span class="n">n</span><span class="o">)</span><span class="w"> </span><span class="o">:</span><span class="w"> </span><span class="n">Nat.Prime</span><span class="w"> </span><span class="n">n</span><span class="w"> </span><span class="o">:=</span><span class="w"> </span><span class="kd">by</span>
<span class="w">  </span><span class="n">rwa</span><span class="w"> </span><span class="o">[</span><span class="n">Nat.prime_iff</span><span class="o">]</span>
</pre></div>
</div>
<p id="index-3">Lean &#24341;&#20837;&#20102;&#35760;&#21495; <code class="docutils literal notranslate"><span class="pre">&#8704;</span> <span class="pre">x</span> <span class="pre">&#8712;</span> <span class="pre">s,</span> <span class="pre">...</span></code>, &#31561;&#20215;&#20110; <code class="docutils literal notranslate"><span class="pre">&#8704;</span> <span class="pre">x,</span> <span class="pre">x</span> <span class="pre">&#8712;</span> <span class="pre">s</span> <span class="pre">&#8594;</span> <span class="pre">...</span></code> &#65292;&#31867;&#20284;&#22320;&#20063;&#24341;&#20837;&#20102; <code class="docutils literal notranslate"><span class="pre">&#8707;</span> <span class="pre">x</span> <span class="pre">&#8712;</span> <span class="pre">s,</span> <span class="pre">...,</span></code> &#12290;&#26377;&#26102;&#23427;&#20204;&#34987;&#31216;&#20026; <strong>&#32422;&#26463;&#37327;&#35789;&#65288;bounded quantifier&#65289;</strong> &#65292;&#22240;&#20026;&#36825;&#31181;&#26500;&#36896;&#23558; <code class="docutils literal notranslate"><span class="pre">x</span></code> &#30340;&#24847;&#20041;&#32422;&#26463;&#22312;&#38598;&#21512; <code class="docutils literal notranslate"><span class="pre">s</span></code> &#20869;&#12290;&#22240;&#27492;&#65292;&#24211;&#20013;&#20351;&#29992;&#36825;&#20123;&#37327;&#35789;&#30340;&#23450;&#29702;&#36890;&#24120;&#22312;&#21517;&#31216;&#20013;&#21253;&#21547; <code class="docutils literal notranslate"><span class="pre">ball</span></code> &#25110; <code class="docutils literal notranslate"><span class="pre">bex</span></code> &#12290;&#23450;&#29702; <code class="docutils literal notranslate"><span class="pre">bex_def</span></code> &#26029;&#35328; <code class="docutils literal notranslate"><span class="pre">&#8707;</span> <span class="pre">x</span> <span class="pre">&#8712;</span> <span class="pre">s,</span> <span class="pre">...</span></code> &#31561;&#20215;&#20110; <code class="docutils literal notranslate"><span class="pre">&#8707;</span> <span class="pre">x,</span> <span class="pre">x</span> <span class="pre">&#8712;</span> <span class="pre">s</span> <span class="pre">&#8743;</span> <span class="pre">...,</span></code> &#65292;&#20294;&#24403;&#23427;&#20204;&#21644; <code class="docutils literal notranslate"><span class="pre">rintro</span></code>, <code class="docutils literal notranslate"><span class="pre">use</span></code> &#20197;&#21450;&#21311;&#21517;&#26500;&#36896;&#23376;&#19968;&#36215;&#20351;&#29992;&#26102;&#65292;&#36825;&#20004;&#31181;&#37327;&#35789;&#34920;&#36798;&#24335;&#30340;&#34892;&#20026;&#22823;&#33268;&#30456;&#21516;&#12290;&#22240;&#27492;&#65292;&#25105;&#20204;&#36890;&#24120;&#19981;&#38656;&#35201;&#20351;&#29992; <code class="docutils literal notranslate"><span class="pre">bex_def</span></code> &#26469;&#31934;&#30830;&#36716;&#25442;&#23427;&#20204;&#12290;&#29992;&#20363;&#65306;</p>
<div class="highlight-lean notranslate"><div class="highlight"><pre><span></span><span class="kd">variable</span><span class="w"> </span><span class="o">(</span><span class="n">s</span><span class="w"> </span><span class="n">t</span><span class="w"> </span><span class="o">:</span><span class="w"> </span><span class="n">Set</span><span class="w"> </span><span class="n">&#8469;</span><span class="o">)</span>

<span class="kd">example</span><span class="w"> </span><span class="o">(</span><span class="n">h&#8320;</span><span class="w"> </span><span class="o">:</span><span class="w"> </span><span class="bp">&#8704;</span><span class="w"> </span><span class="n">x</span><span class="w"> </span><span class="bp">&#8712;</span><span class="w"> </span><span class="n">s</span><span class="o">,</span><span class="w"> </span><span class="bp">&#172;</span><span class="n">Even</span><span class="w"> </span><span class="n">x</span><span class="o">)</span><span class="w"> </span><span class="o">(</span><span class="n">h&#8321;</span><span class="w"> </span><span class="o">:</span><span class="w"> </span><span class="bp">&#8704;</span><span class="w"> </span><span class="n">x</span><span class="w"> </span><span class="bp">&#8712;</span><span class="w"> </span><span class="n">s</span><span class="o">,</span><span class="w"> </span><span class="n">Prime</span><span class="w"> </span><span class="n">x</span><span class="o">)</span><span class="w"> </span><span class="o">:</span><span class="w"> </span><span class="bp">&#8704;</span><span class="w"> </span><span class="n">x</span><span class="w"> </span><span class="bp">&#8712;</span><span class="w"> </span><span class="n">s</span><span class="o">,</span><span class="w"> </span><span class="bp">&#172;</span><span class="n">Even</span><span class="w"> </span><span class="n">x</span><span class="w"> </span><span class="bp">&#8743;</span><span class="w"> </span><span class="n">Prime</span><span class="w"> </span><span class="n">x</span><span class="w"> </span><span class="o">:=</span><span class="w"> </span><span class="kd">by</span>
<span class="w">  </span><span class="n">intro</span><span class="w"> </span><span class="n">x</span><span class="w"> </span><span class="n">xs</span>
<span class="w">  </span><span class="n">constructor</span>
<span class="w">  </span><span class="bp">&#183;</span><span class="w"> </span><span class="n">apply</span><span class="w"> </span><span class="n">h&#8320;</span><span class="w"> </span><span class="n">x</span><span class="w"> </span><span class="n">xs</span>
<span class="w">  </span><span class="n">apply</span><span class="w"> </span><span class="n">h&#8321;</span><span class="w"> </span><span class="n">x</span><span class="w"> </span><span class="n">xs</span>

<span class="kd">example</span><span class="w"> </span><span class="o">(</span><span class="n">h</span><span class="w"> </span><span class="o">:</span><span class="w"> </span><span class="bp">&#8707;</span><span class="w"> </span><span class="n">x</span><span class="w"> </span><span class="bp">&#8712;</span><span class="w"> </span><span class="n">s</span><span class="o">,</span><span class="w"> </span><span class="bp">&#172;</span><span class="n">Even</span><span class="w"> </span><span class="n">x</span><span class="w"> </span><span class="bp">&#8743;</span><span class="w"> </span><span class="n">Prime</span><span class="w"> </span><span class="n">x</span><span class="o">)</span><span class="w"> </span><span class="o">:</span><span class="w"> </span><span class="bp">&#8707;</span><span class="w"> </span><span class="n">x</span><span class="w"> </span><span class="bp">&#8712;</span><span class="w"> </span><span class="n">s</span><span class="o">,</span><span class="w"> </span><span class="n">Prime</span><span class="w"> </span><span class="n">x</span><span class="w"> </span><span class="o">:=</span><span class="w"> </span><span class="kd">by</span>
<span class="w">  </span><span class="n">rcases</span><span class="w"> </span><span class="n">h</span><span class="w"> </span><span class="k">with</span><span class="w"> </span><span class="o">&#10216;</span><span class="n">x</span><span class="o">,</span><span class="w"> </span><span class="n">xs</span><span class="o">,</span><span class="w"> </span><span class="n">_</span><span class="o">,</span><span class="w"> </span><span class="n">prime_x</span><span class="o">&#10217;</span>
<span class="w">  </span><span class="n">use</span><span class="w"> </span><span class="n">x</span><span class="o">,</span><span class="w"> </span><span class="n">xs</span>
</pre></div>
</div>
<p>&#23581;&#35797;&#19979;&#36825;&#20123;&#30053;&#26377;&#19981;&#21516;&#30340;&#21629;&#39064;&#65306;</p>
<div class="highlight-lean notranslate"><div class="highlight"><pre><span></span><span class="kn">section</span>
<span class="kd">variable</span><span class="w"> </span><span class="o">(</span><span class="n">ssubt</span><span class="w"> </span><span class="o">:</span><span class="w"> </span><span class="n">s</span><span class="w"> </span><span class="bp">&#8838;</span><span class="w"> </span><span class="n">t</span><span class="o">)</span>

<span class="kd">example</span><span class="w"> </span><span class="o">(</span><span class="n">h&#8320;</span><span class="w"> </span><span class="o">:</span><span class="w"> </span><span class="bp">&#8704;</span><span class="w"> </span><span class="n">x</span><span class="w"> </span><span class="bp">&#8712;</span><span class="w"> </span><span class="n">t</span><span class="o">,</span><span class="w"> </span><span class="bp">&#172;</span><span class="n">Even</span><span class="w"> </span><span class="n">x</span><span class="o">)</span><span class="w"> </span><span class="o">(</span><span class="n">h&#8321;</span><span class="w"> </span><span class="o">:</span><span class="w"> </span><span class="bp">&#8704;</span><span class="w"> </span><span class="n">x</span><span class="w"> </span><span class="bp">&#8712;</span><span class="w"> </span><span class="n">t</span><span class="o">,</span><span class="w"> </span><span class="n">Prime</span><span class="w"> </span><span class="n">x</span><span class="o">)</span><span class="w"> </span><span class="o">:</span><span class="w"> </span><span class="bp">&#8704;</span><span class="w"> </span><span class="n">x</span><span class="w"> </span><span class="bp">&#8712;</span><span class="w"> </span><span class="n">s</span><span class="o">,</span><span class="w"> </span><span class="bp">&#172;</span><span class="n">Even</span><span class="w"> </span><span class="n">x</span><span class="w"> </span><span class="bp">&#8743;</span><span class="w"> </span><span class="n">Prime</span><span class="w"> </span><span class="n">x</span><span class="w"> </span><span class="o">:=</span><span class="w"> </span><span class="kd">by</span>
<span class="w">  </span><span class="gr">sorry</span>

<span class="kd">example</span><span class="w"> </span><span class="o">(</span><span class="n">h</span><span class="w"> </span><span class="o">:</span><span class="w"> </span><span class="bp">&#8707;</span><span class="w"> </span><span class="n">x</span><span class="w"> </span><span class="bp">&#8712;</span><span class="w"> </span><span class="n">s</span><span class="o">,</span><span class="w"> </span><span class="bp">&#172;</span><span class="n">Even</span><span class="w"> </span><span class="n">x</span><span class="w"> </span><span class="bp">&#8743;</span><span class="w"> </span><span class="n">Prime</span><span class="w"> </span><span class="n">x</span><span class="o">)</span><span class="w"> </span><span class="o">:</span><span class="w"> </span><span class="bp">&#8707;</span><span class="w"> </span><span class="n">x</span><span class="w"> </span><span class="bp">&#8712;</span><span class="w"> </span><span class="n">t</span><span class="o">,</span><span class="w"> </span><span class="n">Prime</span><span class="w"> </span><span class="n">x</span><span class="w"> </span><span class="o">:=</span><span class="w"> </span><span class="kd">by</span>
<span class="w">  </span><span class="gr">sorry</span>

<span class="kd">end</span>
</pre></div>
</div>
<p>&#24102;&#19979;&#26631;&#30340;&#24182;&#38598;&#21644;&#20132;&#38598;&#26159;&#21478;&#19968;&#31181;&#37325;&#35201;&#30340;&#38598;&#21512;&#35770;&#26500;&#36896;&#12290;&#25105;&#20204;&#21487;&#20197;&#25226; <code class="docutils literal notranslate"><span class="pre">&#945;</span></code> &#20013;&#30340;&#20803;&#32032;&#32452;&#25104;&#30340;&#38598;&#21512;&#30340;&#24207;&#21015; <span class="math notranslate nohighlight">\(A_0, A_1, A_2, \ldots\)</span> &#24314;&#27169;&#20026;&#20989;&#25968; <code class="docutils literal notranslate"><span class="pre">A</span> <span class="pre">:</span> <span class="pre">&#8469;</span> <span class="pre">&#8594;</span> <span class="pre">Set</span> <span class="pre">&#945;</span></code> &#65292;&#27492;&#26102; <code class="docutils literal notranslate"><span class="pre">&#8899;</span> <span class="pre">i,</span> <span class="pre">A</span> <span class="pre">i</span></code> &#34920;&#31034;&#23427;&#20204;&#30340;&#24182;&#38598;&#65292;&#32780; <code class="docutils literal notranslate"><span class="pre">&#8898;</span> <span class="pre">i,</span> <span class="pre">A</span> <span class="pre">i</span></code> &#34920;&#31034;&#23427;&#20204;&#30340;&#20132;&#38598;&#12290;&#36825;&#37324;&#33258;&#28982;&#25968;&#27809;&#26377;&#20160;&#20040;&#29305;&#21035;&#20043;&#22788;&#65292;&#22240;&#27492; <code class="docutils literal notranslate"><span class="pre">&#8469;</span></code> &#21487;&#20197;&#26367;&#25442;&#20026;&#20219;&#24847;&#20316;&#20026;&#25351;&#26631;&#38598;&#30340;&#31867;&#22411; <code class="docutils literal notranslate"><span class="pre">I</span></code>&#12290;&#19979;&#38754;&#35828;&#26126;&#23427;&#20204;&#30340;&#29992;&#27861;&#12290;</p>
<div class="highlight-lean notranslate"><div class="highlight"><pre><span></span><span class="kd">variable</span><span class="w"> </span><span class="o">{</span><span class="n">&#945;</span><span class="w"> </span><span class="n">I</span><span class="w"> </span><span class="o">:</span><span class="w"> </span><span class="kt">Type</span><span class="bp">*</span><span class="o">}</span>
<span class="kd">variable</span><span class="w"> </span><span class="o">(</span><span class="n">A</span><span class="w"> </span><span class="n">B</span><span class="w"> </span><span class="o">:</span><span class="w"> </span><span class="n">I</span><span class="w"> </span><span class="bp">&#8594;</span><span class="w"> </span><span class="n">Set</span><span class="w"> </span><span class="n">&#945;</span><span class="o">)</span>
<span class="kd">variable</span><span class="w"> </span><span class="o">(</span><span class="n">s</span><span class="w"> </span><span class="o">:</span><span class="w"> </span><span class="n">Set</span><span class="w"> </span><span class="n">&#945;</span><span class="o">)</span>

<span class="kn">open</span><span class="w"> </span><span class="n">Set</span>

<span class="kd">example</span><span class="w"> </span><span class="o">:</span><span class="w"> </span><span class="o">(</span><span class="n">s</span><span class="w"> </span><span class="bp">&#8745;</span><span class="w"> </span><span class="bp">&#8899;</span><span class="w"> </span><span class="n">i</span><span class="o">,</span><span class="w"> </span><span class="n">A</span><span class="w"> </span><span class="n">i</span><span class="o">)</span><span class="w"> </span><span class="bp">=</span><span class="w"> </span><span class="bp">&#8899;</span><span class="w"> </span><span class="n">i</span><span class="o">,</span><span class="w"> </span><span class="n">A</span><span class="w"> </span><span class="n">i</span><span class="w"> </span><span class="bp">&#8745;</span><span class="w"> </span><span class="n">s</span><span class="w"> </span><span class="o">:=</span><span class="w"> </span><span class="kd">by</span>
<span class="w">  </span><span class="n">ext</span><span class="w"> </span><span class="n">x</span>
<span class="w">  </span><span class="n">simp</span><span class="w"> </span><span class="n">only</span><span class="w"> </span><span class="o">[</span><span class="n">mem_inter_iff</span><span class="o">,</span><span class="w"> </span><span class="n">mem_iUnion</span><span class="o">]</span>
<span class="w">  </span><span class="n">constructor</span>
<span class="w">  </span><span class="bp">&#183;</span><span class="w"> </span><span class="n">rintro</span><span class="w"> </span><span class="o">&#10216;</span><span class="n">xs</span><span class="o">,</span><span class="w"> </span><span class="o">&#10216;</span><span class="n">i</span><span class="o">,</span><span class="w"> </span><span class="n">xAi</span><span class="o">&#10217;&#10217;</span>
<span class="w">    </span><span class="n">exact</span><span class="w"> </span><span class="o">&#10216;</span><span class="n">i</span><span class="o">,</span><span class="w"> </span><span class="n">xAi</span><span class="o">,</span><span class="w"> </span><span class="n">xs</span><span class="o">&#10217;</span>
<span class="w">  </span><span class="n">rintro</span><span class="w"> </span><span class="o">&#10216;</span><span class="n">i</span><span class="o">,</span><span class="w"> </span><span class="n">xAi</span><span class="o">,</span><span class="w"> </span><span class="n">xs</span><span class="o">&#10217;</span>
<span class="w">  </span><span class="n">exact</span><span class="w"> </span><span class="o">&#10216;</span><span class="n">xs</span><span class="o">,</span><span class="w"> </span><span class="o">&#10216;</span><span class="n">i</span><span class="o">,</span><span class="w"> </span><span class="n">xAi</span><span class="o">&#10217;&#10217;</span>

<span class="kd">example</span><span class="w"> </span><span class="o">:</span><span class="w"> </span><span class="o">(</span><span class="bp">&#8898;</span><span class="w"> </span><span class="n">i</span><span class="o">,</span><span class="w"> </span><span class="n">A</span><span class="w"> </span><span class="n">i</span><span class="w"> </span><span class="bp">&#8745;</span><span class="w"> </span><span class="n">B</span><span class="w"> </span><span class="n">i</span><span class="o">)</span><span class="w"> </span><span class="bp">=</span><span class="w"> </span><span class="o">(</span><span class="bp">&#8898;</span><span class="w"> </span><span class="n">i</span><span class="o">,</span><span class="w"> </span><span class="n">A</span><span class="w"> </span><span class="n">i</span><span class="o">)</span><span class="w"> </span><span class="bp">&#8745;</span><span class="w"> </span><span class="bp">&#8898;</span><span class="w"> </span><span class="n">i</span><span class="o">,</span><span class="w"> </span><span class="n">B</span><span class="w"> </span><span class="n">i</span><span class="w"> </span><span class="o">:=</span><span class="w"> </span><span class="kd">by</span>
<span class="w">  </span><span class="n">ext</span><span class="w"> </span><span class="n">x</span>
<span class="w">  </span><span class="n">simp</span><span class="w"> </span><span class="n">only</span><span class="w"> </span><span class="o">[</span><span class="n">mem_inter_iff</span><span class="o">,</span><span class="w"> </span><span class="n">mem_iInter</span><span class="o">]</span>
<span class="w">  </span><span class="n">constructor</span>
<span class="w">  </span><span class="bp">&#183;</span><span class="w"> </span><span class="n">intro</span><span class="w"> </span><span class="n">h</span>
<span class="w">    </span><span class="n">constructor</span>
<span class="w">    </span><span class="bp">&#183;</span><span class="w"> </span><span class="n">intro</span><span class="w"> </span><span class="n">i</span>
<span class="w">      </span><span class="n">exact</span><span class="w"> </span><span class="o">(</span><span class="n">h</span><span class="w"> </span><span class="n">i</span><span class="o">)</span><span class="bp">.</span><span class="mi">1</span>
<span class="w">    </span><span class="n">intro</span><span class="w"> </span><span class="n">i</span>
<span class="w">    </span><span class="n">exact</span><span class="w"> </span><span class="o">(</span><span class="n">h</span><span class="w"> </span><span class="n">i</span><span class="o">)</span><span class="bp">.</span><span class="mi">2</span>
<span class="w">  </span><span class="n">rintro</span><span class="w"> </span><span class="o">&#10216;</span><span class="n">h1</span><span class="o">,</span><span class="w"> </span><span class="n">h2</span><span class="o">&#10217;</span><span class="w"> </span><span class="n">i</span>
<span class="w">  </span><span class="n">constructor</span>
<span class="w">  </span><span class="bp">&#183;</span><span class="w"> </span><span class="n">exact</span><span class="w"> </span><span class="n">h1</span><span class="w"> </span><span class="n">i</span>
<span class="w">  </span><span class="n">exact</span><span class="w"> </span><span class="n">h2</span><span class="w"> </span><span class="n">i</span>
</pre></div>
</div>
<p>&#24102;&#19979;&#26631;&#30340;&#24182;&#38598;&#25110;&#20132;&#38598;&#36890;&#24120;&#38656;&#35201;&#20351;&#29992;&#25324;&#21495;&#65292;&#22240;&#20026;&#19982;&#37327;&#35789;&#19968;&#26679;&#65292;&#32465;&#23450;&#21464;&#37327;&#30340;&#33539;&#22260;&#20250;&#23613;&#21487;&#33021;&#22320;&#25193;&#23637;&#12290;</p>
<p>&#23581;&#35797;&#35777;&#26126;&#19979;&#21015;&#24658;&#31561;&#24335;&#12290;&#20854;&#20013;&#19968;&#20010;&#26041;&#21521;&#38656;&#35201;&#32463;&#20856;&#36923;&#36753;&#65281;&#25105;&#20204;&#24314;&#35758;&#22312;&#35777;&#26126;&#30340;&#36866;&#24403;&#20301;&#32622;&#20351;&#29992; <code class="docutils literal notranslate"><span class="pre">by_cases</span> <span class="pre">xs</span> <span class="pre">:</span> <span class="pre">x</span> <span class="pre">&#8712;</span> <span class="pre">s</span></code> &#12290;</p>
<div class="highlight-lean notranslate"><div class="highlight"><pre><span></span><span class="kd">example</span><span class="w"> </span><span class="o">:</span><span class="w"> </span><span class="o">(</span><span class="n">s</span><span class="w"> </span><span class="bp">&#8746;</span><span class="w"> </span><span class="bp">&#8898;</span><span class="w"> </span><span class="n">i</span><span class="o">,</span><span class="w"> </span><span class="n">A</span><span class="w"> </span><span class="n">i</span><span class="o">)</span><span class="w"> </span><span class="bp">=</span><span class="w"> </span><span class="bp">&#8898;</span><span class="w"> </span><span class="n">i</span><span class="o">,</span><span class="w"> </span><span class="n">A</span><span class="w"> </span><span class="n">i</span><span class="w"> </span><span class="bp">&#8746;</span><span class="w"> </span><span class="n">s</span><span class="w"> </span><span class="o">:=</span><span class="w"> </span><span class="kd">by</span>
<span class="w">  </span><span class="gr">sorry</span>
</pre></div>
</div>
<p>Mathlib &#20063;&#25903;&#25345;&#22312;&#33258;&#23450;&#20041;&#30340;&#19979;&#26631;&#38598;&#20013;&#20570;&#24182;&#38598;&#21644;&#20132;&#38598;&#65292;&#31867;&#20284;&#20110;&#32422;&#26463;&#37327;&#35789;&#12290;&#20320;&#21487;&#20197;&#20351;&#29992; <code class="docutils literal notranslate"><span class="pre">mem_iUnion&#8322;</span></code> &#21644; <code class="docutils literal notranslate"><span class="pre">mem_iInter&#8322;</span></code> &#35299;&#21253;&#23427;&#20204;&#30340;&#21547;&#20041;&#12290;&#27491;&#22914;&#19979;&#38754;&#30340;&#31034;&#20363;&#25152;&#31034;&#65292;Lean &#30340;&#21270;&#31616;&#22120;&#20063;&#21487;&#20197;&#25191;&#34892;&#36825;&#20123;&#26367;&#25442;&#12290;</p>
<div class="highlight-lean notranslate"><div class="highlight"><pre><span></span><span class="kd">def</span><span class="w"> </span><span class="n">primes</span><span class="w"> </span><span class="o">:</span><span class="w"> </span><span class="n">Set</span><span class="w"> </span><span class="n">&#8469;</span><span class="w"> </span><span class="o">:=</span>
<span class="w">  </span><span class="o">{</span><span class="w"> </span><span class="n">x</span><span class="w"> </span><span class="bp">|</span><span class="w"> </span><span class="n">Nat.Prime</span><span class="w"> </span><span class="n">x</span><span class="w"> </span><span class="o">}</span>

<span class="kd">example</span><span class="w"> </span><span class="o">:</span><span class="w"> </span><span class="o">(</span><span class="bp">&#8899;</span><span class="w"> </span><span class="n">p</span><span class="w"> </span><span class="bp">&#8712;</span><span class="w"> </span><span class="n">primes</span><span class="o">,</span><span class="w"> </span><span class="o">{</span><span class="w"> </span><span class="n">x</span><span class="w"> </span><span class="bp">|</span><span class="w"> </span><span class="n">p</span><span class="w"> </span><span class="bp">^</span><span class="w"> </span><span class="mi">2</span><span class="w"> </span><span class="bp">&#8739;</span><span class="w"> </span><span class="n">x</span><span class="w"> </span><span class="o">})</span><span class="w"> </span><span class="bp">=</span><span class="w"> </span><span class="o">{</span><span class="w"> </span><span class="n">x</span><span class="w"> </span><span class="bp">|</span><span class="w"> </span><span class="bp">&#8707;</span><span class="w"> </span><span class="n">p</span><span class="w"> </span><span class="bp">&#8712;</span><span class="w"> </span><span class="n">primes</span><span class="o">,</span><span class="w"> </span><span class="n">p</span><span class="w"> </span><span class="bp">^</span><span class="w"> </span><span class="mi">2</span><span class="w"> </span><span class="bp">&#8739;</span><span class="w"> </span><span class="n">x</span><span class="w"> </span><span class="o">}</span><span class="w"> </span><span class="o">:=</span><span class="kd">by</span>
<span class="w">  </span><span class="n">ext</span>
<span class="w">  </span><span class="n">rw</span><span class="w"> </span><span class="o">[</span><span class="n">mem_iUnion&#8322;</span><span class="o">]</span>
<span class="w">  </span><span class="n">simp</span>

<span class="kd">example</span><span class="w"> </span><span class="o">:</span><span class="w"> </span><span class="o">(</span><span class="bp">&#8899;</span><span class="w"> </span><span class="n">p</span><span class="w"> </span><span class="bp">&#8712;</span><span class="w"> </span><span class="n">primes</span><span class="o">,</span><span class="w"> </span><span class="o">{</span><span class="w"> </span><span class="n">x</span><span class="w"> </span><span class="bp">|</span><span class="w"> </span><span class="n">p</span><span class="w"> </span><span class="bp">^</span><span class="w"> </span><span class="mi">2</span><span class="w"> </span><span class="bp">&#8739;</span><span class="w"> </span><span class="n">x</span><span class="w"> </span><span class="o">})</span><span class="w"> </span><span class="bp">=</span><span class="w"> </span><span class="o">{</span><span class="w"> </span><span class="n">x</span><span class="w"> </span><span class="bp">|</span><span class="w"> </span><span class="bp">&#8707;</span><span class="w"> </span><span class="n">p</span><span class="w"> </span><span class="bp">&#8712;</span><span class="w"> </span><span class="n">primes</span><span class="o">,</span><span class="w"> </span><span class="n">p</span><span class="w"> </span><span class="bp">^</span><span class="w"> </span><span class="mi">2</span><span class="w"> </span><span class="bp">&#8739;</span><span class="w"> </span><span class="n">x</span><span class="w"> </span><span class="o">}</span><span class="w"> </span><span class="o">:=</span><span class="w"> </span><span class="kd">by</span>
<span class="w">  </span><span class="n">ext</span>
<span class="w">  </span><span class="n">simp</span>

<span class="kd">example</span><span class="w"> </span><span class="o">:</span><span class="w"> </span><span class="o">(</span><span class="bp">&#8898;</span><span class="w"> </span><span class="n">p</span><span class="w"> </span><span class="bp">&#8712;</span><span class="w"> </span><span class="n">primes</span><span class="o">,</span><span class="w"> </span><span class="o">{</span><span class="w"> </span><span class="n">x</span><span class="w"> </span><span class="bp">|</span><span class="w"> </span><span class="bp">&#172;</span><span class="n">p</span><span class="w"> </span><span class="bp">&#8739;</span><span class="w"> </span><span class="n">x</span><span class="w"> </span><span class="o">})</span><span class="w"> </span><span class="bp">&#8838;</span><span class="w"> </span><span class="o">{</span><span class="w"> </span><span class="n">x</span><span class="w"> </span><span class="bp">|</span><span class="w"> </span><span class="n">x</span><span class="w"> </span><span class="bp">=</span><span class="w"> </span><span class="mi">1</span><span class="w"> </span><span class="o">}</span><span class="w"> </span><span class="o">:=</span><span class="w"> </span><span class="kd">by</span>
<span class="w">  </span><span class="n">intro</span><span class="w"> </span><span class="n">x</span>
<span class="w">  </span><span class="n">contrapose</span><span class="bp">!</span>
<span class="w">  </span><span class="n">simp</span>
<span class="w">  </span><span class="n">apply</span><span class="w"> </span><span class="n">Nat.exists_prime_and_dvd</span>
</pre></div>
</div>
<p>&#35797;&#30528;&#35299;&#20915;&#19979;&#38754;&#36825;&#20010;&#31867;&#20284;&#30340;&#20363;&#23376;&#12290;&#22914;&#26524;&#20320;&#24320;&#22987;&#36755;&#20837; <code class="docutils literal notranslate"><span class="pre">eq_univ</span></code> &#65292;&#26631;&#31614;&#34917;&#20840;&#22120;&#20250;&#21578;&#35785;&#20320; <code class="docutils literal notranslate"><span class="pre">apply</span> <span class="pre">eq_univ_of_forall</span></code> &#26159;&#24320;&#22987;&#35777;&#26126;&#30340;&#22909;&#26041;&#27861;&#12290;&#21478;&#22806;&#25512;&#33616;&#20351;&#29992; <code class="docutils literal notranslate"><span class="pre">Nat.exists_infinite_primes</span></code> &#23450;&#29702;&#12290;</p>
<div class="highlight-lean notranslate"><div class="highlight"><pre><span></span><span class="kd">example</span><span class="w"> </span><span class="o">:</span><span class="w"> </span><span class="o">(</span><span class="bp">&#8899;</span><span class="w"> </span><span class="n">p</span><span class="w"> </span><span class="bp">&#8712;</span><span class="w"> </span><span class="n">primes</span><span class="o">,</span><span class="w"> </span><span class="o">{</span><span class="w"> </span><span class="n">x</span><span class="w"> </span><span class="bp">|</span><span class="w"> </span><span class="n">x</span><span class="w"> </span><span class="bp">&#8804;</span><span class="w"> </span><span class="n">p</span><span class="w"> </span><span class="o">})</span><span class="w"> </span><span class="bp">=</span><span class="w"> </span><span class="n">univ</span><span class="w"> </span><span class="o">:=</span><span class="w"> </span><span class="kd">by</span>
<span class="w">  </span><span class="gr">sorry</span>
</pre></div>
</div>
<p>&#32473;&#23450;&#19968;&#32452;&#38598;&#21512; <code class="docutils literal notranslate"><span class="pre">s</span> <span class="pre">:</span> <span class="pre">Set</span> <span class="pre">(Set</span> <span class="pre">&#945;)</span></code> &#65292;&#23427;&#20204;&#30340;&#24182;&#38598; <code class="docutils literal notranslate"><span class="pre">&#8899;&#8320;</span> <span class="pre">s</span></code> &#20855;&#26377;&#31867;&#22411; <code class="docutils literal notranslate"><span class="pre">Set</span> <span class="pre">&#945;</span></code> &#65292;&#23450;&#20041;&#20026; <code class="docutils literal notranslate"><span class="pre">{x</span> <span class="pre">|</span> <span class="pre">&#8707;</span> <span class="pre">t</span> <span class="pre">&#8712;</span> <span class="pre">s,</span> <span class="pre">x</span> <span class="pre">&#8712;</span> <span class="pre">t}</span></code> &#12290;&#31867;&#20284;&#22320;&#65292;&#23427;&#20204;&#30340;&#20132;&#38598; <code class="docutils literal notranslate"><span class="pre">&#8898;&#8320;</span> <span class="pre">s</span></code> &#23450;&#20041;&#20026; <code class="docutils literal notranslate"><span class="pre">{x</span> <span class="pre">|</span> <span class="pre">&#8704;</span> <span class="pre">t</span> <span class="pre">&#8712;</span> <span class="pre">s,</span> <span class="pre">x</span> <span class="pre">&#8712;</span> <span class="pre">t}</span></code> &#12290;&#36825;&#20123;&#36816;&#31639;&#20998;&#21035;&#31216;&#20026; <code class="docutils literal notranslate"><span class="pre">sUnion</span></code> &#21644; <code class="docutils literal notranslate"><span class="pre">sInter</span></code> &#12290;&#19979;&#38754;&#30340;&#20363;&#23376;&#23637;&#31034;&#20102;&#23427;&#20204;&#19982;&#19979;&#26631;&#38598;&#21512;&#19978;&#24182;&#38598;&#21644;&#20132;&#38598;&#30340;&#20851;&#31995;&#65292;&#22312;&#24211;&#20013;&#23427;&#20204;&#31216;&#20026; <code class="docutils literal notranslate"><span class="pre">sUnion_eq_biUnion</span></code> &#21644; <code class="docutils literal notranslate"><span class="pre">sInter_eq_biInter</span></code> &#12290;</p>
<div class="highlight-lean notranslate"><div class="highlight"><pre><span></span><span class="kd">variable</span><span class="w"> </span><span class="o">{</span><span class="n">&#945;</span><span class="w"> </span><span class="o">:</span><span class="w"> </span><span class="kt">Type</span><span class="bp">*</span><span class="o">}</span><span class="w"> </span><span class="o">(</span><span class="n">s</span><span class="w"> </span><span class="o">:</span><span class="w"> </span><span class="n">Set</span><span class="w"> </span><span class="o">(</span><span class="n">Set</span><span class="w"> </span><span class="n">&#945;</span><span class="o">))</span>

<span class="kd">example</span><span class="w"> </span><span class="o">:</span><span class="w"> </span><span class="bp">&#8899;&#8320;</span><span class="w"> </span><span class="n">s</span><span class="w"> </span><span class="bp">=</span><span class="w"> </span><span class="bp">&#8899;</span><span class="w"> </span><span class="n">t</span><span class="w"> </span><span class="bp">&#8712;</span><span class="w"> </span><span class="n">s</span><span class="o">,</span><span class="w"> </span><span class="n">t</span><span class="w"> </span><span class="o">:=</span><span class="w"> </span><span class="kd">by</span>
<span class="w">  </span><span class="n">ext</span><span class="w"> </span><span class="n">x</span>
<span class="w">  </span><span class="n">rw</span><span class="w"> </span><span class="o">[</span><span class="n">mem_iUnion&#8322;</span><span class="o">]</span>
<span class="w">  </span><span class="n">simp</span>

<span class="kd">example</span><span class="w"> </span><span class="o">:</span><span class="w"> </span><span class="bp">&#8898;&#8320;</span><span class="w"> </span><span class="n">s</span><span class="w"> </span><span class="bp">=</span><span class="w"> </span><span class="bp">&#8898;</span><span class="w"> </span><span class="n">t</span><span class="w"> </span><span class="bp">&#8712;</span><span class="w"> </span><span class="n">s</span><span class="o">,</span><span class="w"> </span><span class="n">t</span><span class="w"> </span><span class="o">:=</span><span class="w"> </span><span class="kd">by</span>
<span class="w">  </span><span class="n">ext</span><span class="w"> </span><span class="n">x</span>
<span class="w">  </span><span class="n">rw</span><span class="w"> </span><span class="o">[</span><span class="n">mem_iInter&#8322;</span><span class="o">]</span>
<span class="w">  </span><span class="n">rfl</span>
</pre></div>
</div>
</section>
<section id="functions">
<span id="id3"></span><h2><span class="section-number">4.2. </span>Functions<a class="headerlink" href="#functions" title="Link to this heading">&#61633;</a></h2>
<p>If <code class="docutils literal notranslate"><span class="pre">f</span> <span class="pre">:</span> <span class="pre">&#945;</span> <span class="pre">&#8594;</span> <span class="pre">&#946;</span></code> is a function and  <code class="docutils literal notranslate"><span class="pre">p</span></code> is a set of
elements of type <code class="docutils literal notranslate"><span class="pre">&#946;</span></code>,
the library defines <code class="docutils literal notranslate"><span class="pre">preimage</span> <span class="pre">f</span> <span class="pre">p</span></code>, written <code class="docutils literal notranslate"><span class="pre">f</span> <span class="pre">&#8315;&#185;'</span> <span class="pre">p</span></code>,
to be <code class="docutils literal notranslate"><span class="pre">{x</span> <span class="pre">|</span> <span class="pre">f</span> <span class="pre">x</span> <span class="pre">&#8712;</span> <span class="pre">p}</span></code>.
The expression <code class="docutils literal notranslate"><span class="pre">x</span> <span class="pre">&#8712;</span> <span class="pre">f</span> <span class="pre">&#8315;&#185;'</span> <span class="pre">p</span></code> reduces to <code class="docutils literal notranslate"><span class="pre">f</span> <span class="pre">x</span> <span class="pre">&#8712;</span> <span class="pre">p</span></code>.
This is often convenient, as in the following example:</p>
<div class="highlight-lean notranslate"><div class="highlight"><pre><span></span><span class="kd">variable</span><span class="w"> </span><span class="o">{</span><span class="n">&#945;</span><span class="w"> </span><span class="n">&#946;</span><span class="w"> </span><span class="o">:</span><span class="w"> </span><span class="kt">Type</span><span class="bp">*</span><span class="o">}</span>
<span class="kd">variable</span><span class="w"> </span><span class="o">(</span><span class="n">f</span><span class="w"> </span><span class="o">:</span><span class="w"> </span><span class="n">&#945;</span><span class="w"> </span><span class="bp">&#8594;</span><span class="w"> </span><span class="n">&#946;</span><span class="o">)</span>
<span class="kd">variable</span><span class="w"> </span><span class="o">(</span><span class="n">s</span><span class="w"> </span><span class="n">t</span><span class="w"> </span><span class="o">:</span><span class="w"> </span><span class="n">Set</span><span class="w"> </span><span class="n">&#945;</span><span class="o">)</span>
<span class="kd">variable</span><span class="w"> </span><span class="o">(</span><span class="n">u</span><span class="w"> </span><span class="n">v</span><span class="w"> </span><span class="o">:</span><span class="w"> </span><span class="n">Set</span><span class="w"> </span><span class="n">&#946;</span><span class="o">)</span>

<span class="kn">open</span><span class="w"> </span><span class="n">Function</span>
<span class="kn">open</span><span class="w"> </span><span class="n">Set</span>

<span class="kd">example</span><span class="w"> </span><span class="o">:</span><span class="w"> </span><span class="n">f</span><span class="w"> </span><span class="bp">&#8315;&#185;&#39;</span><span class="w"> </span><span class="o">(</span><span class="n">u</span><span class="w"> </span><span class="bp">&#8745;</span><span class="w"> </span><span class="n">v</span><span class="o">)</span><span class="w"> </span><span class="bp">=</span><span class="w"> </span><span class="n">f</span><span class="w"> </span><span class="bp">&#8315;&#185;&#39;</span><span class="w"> </span><span class="n">u</span><span class="w"> </span><span class="bp">&#8745;</span><span class="w"> </span><span class="n">f</span><span class="w"> </span><span class="bp">&#8315;&#185;&#39;</span><span class="w"> </span><span class="n">v</span><span class="w"> </span><span class="o">:=</span><span class="w"> </span><span class="kd">by</span>
<span class="w">  </span><span class="n">ext</span>
<span class="w">  </span><span class="n">rfl</span>
</pre></div>
</div>
<p>If <code class="docutils literal notranslate"><span class="pre">s</span></code> is a set of elements of type <code class="docutils literal notranslate"><span class="pre">&#945;</span></code>,
the library also defines <code class="docutils literal notranslate"><span class="pre">image</span> <span class="pre">f</span> <span class="pre">s</span></code>,
written <code class="docutils literal notranslate"><span class="pre">f</span> <span class="pre">''</span> <span class="pre">s</span></code>,
to be <code class="docutils literal notranslate"><span class="pre">{y</span> <span class="pre">|</span> <span class="pre">&#8707;</span> <span class="pre">x,</span> <span class="pre">x</span> <span class="pre">&#8712;</span> <span class="pre">s</span> <span class="pre">&#8743;</span> <span class="pre">f</span> <span class="pre">x</span> <span class="pre">=</span> <span class="pre">y}</span></code>.
So a hypothesis  <code class="docutils literal notranslate"><span class="pre">y</span> <span class="pre">&#8712;</span> <span class="pre">f</span> <span class="pre">''</span> <span class="pre">s</span></code> decomposes to a triple
<code class="docutils literal notranslate"><span class="pre">&#10216;x,</span> <span class="pre">xs,</span> <span class="pre">xeq&#10217;</span></code> with <code class="docutils literal notranslate"><span class="pre">x</span> <span class="pre">:</span> <span class="pre">&#945;</span></code> satisfying the hypotheses <code class="docutils literal notranslate"><span class="pre">xs</span> <span class="pre">:</span> <span class="pre">x</span> <span class="pre">&#8712;</span> <span class="pre">s</span></code>
and <code class="docutils literal notranslate"><span class="pre">xeq</span> <span class="pre">:</span> <span class="pre">f</span> <span class="pre">x</span> <span class="pre">=</span> <span class="pre">y</span></code>.
The <code class="docutils literal notranslate"><span class="pre">rfl</span></code> tag in the <code class="docutils literal notranslate"><span class="pre">rintro</span></code> tactic (see <a class="reference internal" href="C03_Logic.html#the-existential-quantifier"><span class="std std-numref">Section 3.2</span></a>) was made precisely
for this sort of situation.</p>
<div class="highlight-lean notranslate"><div class="highlight"><pre><span></span><span class="kd">example</span><span class="w"> </span><span class="o">:</span><span class="w"> </span><span class="n">f</span><span class="w"> </span><span class="bp">&#39;&#39;</span><span class="w"> </span><span class="o">(</span><span class="n">s</span><span class="w"> </span><span class="bp">&#8746;</span><span class="w"> </span><span class="n">t</span><span class="o">)</span><span class="w"> </span><span class="bp">=</span><span class="w"> </span><span class="n">f</span><span class="w"> </span><span class="bp">&#39;&#39;</span><span class="w"> </span><span class="n">s</span><span class="w"> </span><span class="bp">&#8746;</span><span class="w"> </span><span class="n">f</span><span class="w"> </span><span class="bp">&#39;&#39;</span><span class="w"> </span><span class="n">t</span><span class="w"> </span><span class="o">:=</span><span class="w"> </span><span class="kd">by</span>
<span class="w">  </span><span class="n">ext</span><span class="w"> </span><span class="n">y</span><span class="bp">;</span><span class="w"> </span><span class="n">constructor</span>
<span class="w">  </span><span class="bp">&#183;</span><span class="w"> </span><span class="n">rintro</span><span class="w"> </span><span class="o">&#10216;</span><span class="n">x</span><span class="o">,</span><span class="w"> </span><span class="n">xs</span><span class="w"> </span><span class="bp">|</span><span class="w"> </span><span class="n">xt</span><span class="o">,</span><span class="w"> </span><span class="n">rfl</span><span class="o">&#10217;</span>
<span class="w">    </span><span class="bp">&#183;</span><span class="w"> </span><span class="n">left</span>
<span class="w">      </span><span class="n">use</span><span class="w"> </span><span class="n">x</span><span class="o">,</span><span class="w"> </span><span class="n">xs</span>
<span class="w">    </span><span class="n">right</span>
<span class="w">    </span><span class="n">use</span><span class="w"> </span><span class="n">x</span><span class="o">,</span><span class="w"> </span><span class="n">xt</span>
<span class="w">  </span><span class="n">rintro</span><span class="w"> </span><span class="o">(&#10216;</span><span class="n">x</span><span class="o">,</span><span class="w"> </span><span class="n">xs</span><span class="o">,</span><span class="w"> </span><span class="n">rfl</span><span class="o">&#10217;</span><span class="w"> </span><span class="bp">|</span><span class="w"> </span><span class="o">&#10216;</span><span class="n">x</span><span class="o">,</span><span class="w"> </span><span class="n">xt</span><span class="o">,</span><span class="w"> </span><span class="n">rfl</span><span class="o">&#10217;)</span>
<span class="w">  </span><span class="bp">&#183;</span><span class="w"> </span><span class="n">use</span><span class="w"> </span><span class="n">x</span><span class="o">,</span><span class="w"> </span><span class="n">Or.inl</span><span class="w"> </span><span class="n">xs</span>
<span class="w">  </span><span class="n">use</span><span class="w"> </span><span class="n">x</span><span class="o">,</span><span class="w"> </span><span class="n">Or.inr</span><span class="w"> </span><span class="n">xt</span>
</pre></div>
</div>
<p>Notice also that the <code class="docutils literal notranslate"><span class="pre">use</span></code> tactic applies <code class="docutils literal notranslate"><span class="pre">rfl</span></code>
to close goals when it can.</p>
<p>Here is another example:</p>
<div class="highlight-lean notranslate"><div class="highlight"><pre><span></span><span class="kd">example</span><span class="w"> </span><span class="o">:</span><span class="w"> </span><span class="n">s</span><span class="w"> </span><span class="bp">&#8838;</span><span class="w"> </span><span class="n">f</span><span class="w"> </span><span class="bp">&#8315;&#185;&#39;</span><span class="w"> </span><span class="o">(</span><span class="n">f</span><span class="w"> </span><span class="bp">&#39;&#39;</span><span class="w"> </span><span class="n">s</span><span class="o">)</span><span class="w"> </span><span class="o">:=</span><span class="w"> </span><span class="kd">by</span>
<span class="w">  </span><span class="n">intro</span><span class="w"> </span><span class="n">x</span><span class="w"> </span><span class="n">xs</span>
<span class="w">  </span><span class="k">show</span><span class="w"> </span><span class="n">f</span><span class="w"> </span><span class="n">x</span><span class="w"> </span><span class="bp">&#8712;</span><span class="w"> </span><span class="n">f</span><span class="w"> </span><span class="bp">&#39;&#39;</span><span class="w"> </span><span class="n">s</span>
<span class="w">  </span><span class="n">use</span><span class="w"> </span><span class="n">x</span><span class="o">,</span><span class="w"> </span><span class="n">xs</span>
</pre></div>
</div>
<p>We can replace the line <code class="docutils literal notranslate"><span class="pre">use</span> <span class="pre">x,</span> <span class="pre">xs</span></code> by
<code class="docutils literal notranslate"><span class="pre">apply</span> <span class="pre">mem_image_of_mem</span> <span class="pre">f</span> <span class="pre">xs</span></code> if we want to
use a theorem specifically designed for that purpose.
But knowing that the image is defined in terms
of an existential quantifier is often convenient.</p>
<p>The following equivalence is a good exercise:</p>
<div class="highlight-lean notranslate"><div class="highlight"><pre><span></span><span class="kd">example</span><span class="w"> </span><span class="o">:</span><span class="w"> </span><span class="n">f</span><span class="w"> </span><span class="bp">&#39;&#39;</span><span class="w"> </span><span class="n">s</span><span class="w"> </span><span class="bp">&#8838;</span><span class="w"> </span><span class="n">v</span><span class="w"> </span><span class="bp">&#8596;</span><span class="w"> </span><span class="n">s</span><span class="w"> </span><span class="bp">&#8838;</span><span class="w"> </span><span class="n">f</span><span class="w"> </span><span class="bp">&#8315;&#185;&#39;</span><span class="w"> </span><span class="n">v</span><span class="w"> </span><span class="o">:=</span><span class="w"> </span><span class="kd">by</span>
<span class="w">  </span><span class="gr">sorry</span>
</pre></div>
</div>
<p>It shows that <code class="docutils literal notranslate"><span class="pre">image</span> <span class="pre">f</span></code> and <code class="docutils literal notranslate"><span class="pre">preimage</span> <span class="pre">f</span></code> are
an instance of what is known as a <em>Galois connection</em>
between <code class="docutils literal notranslate"><span class="pre">Set</span> <span class="pre">&#945;</span></code> and <code class="docutils literal notranslate"><span class="pre">Set</span> <span class="pre">&#946;</span></code>,
each partially ordered by the subset relation.
In the library, this equivalence is named
<code class="docutils literal notranslate"><span class="pre">image_subset_iff</span></code>.
In practice, the right-hand side is often the
more useful representation,
because <code class="docutils literal notranslate"><span class="pre">y</span> <span class="pre">&#8712;</span> <span class="pre">f</span> <span class="pre">&#8315;&#185;'</span> <span class="pre">t</span></code> unfolds to <code class="docutils literal notranslate"><span class="pre">f</span> <span class="pre">y</span> <span class="pre">&#8712;</span> <span class="pre">t</span></code>
whereas working with <code class="docutils literal notranslate"><span class="pre">x</span> <span class="pre">&#8712;</span> <span class="pre">f</span> <span class="pre">''</span> <span class="pre">s</span></code> requires
decomposing an existential quantifier.</p>
<p>Here is a long list of set-theoretic identities for
you to enjoy.
You don&#8217;t have to do all of them at once;
do a few of them,
and set the rest aside for a rainy day.</p>
<div class="highlight-lean notranslate"><div class="highlight"><pre><span></span><span class="kd">example</span><span class="w"> </span><span class="o">(</span><span class="n">h</span><span class="w"> </span><span class="o">:</span><span class="w"> </span><span class="n">Injective</span><span class="w"> </span><span class="n">f</span><span class="o">)</span><span class="w"> </span><span class="o">:</span><span class="w"> </span><span class="n">f</span><span class="w"> </span><span class="bp">&#8315;&#185;&#39;</span><span class="w"> </span><span class="o">(</span><span class="n">f</span><span class="w"> </span><span class="bp">&#39;&#39;</span><span class="w"> </span><span class="n">s</span><span class="o">)</span><span class="w"> </span><span class="bp">&#8838;</span><span class="w"> </span><span class="n">s</span><span class="w"> </span><span class="o">:=</span><span class="w"> </span><span class="kd">by</span>
<span class="w">  </span><span class="gr">sorry</span>

<span class="kd">example</span><span class="w"> </span><span class="o">:</span><span class="w"> </span><span class="n">f</span><span class="w"> </span><span class="bp">&#39;&#39;</span><span class="w"> </span><span class="o">(</span><span class="n">f</span><span class="w"> </span><span class="bp">&#8315;&#185;&#39;</span><span class="w"> </span><span class="n">u</span><span class="o">)</span><span class="w"> </span><span class="bp">&#8838;</span><span class="w"> </span><span class="n">u</span><span class="w"> </span><span class="o">:=</span><span class="w"> </span><span class="kd">by</span>
<span class="w">  </span><span class="gr">sorry</span>

<span class="kd">example</span><span class="w"> </span><span class="o">(</span><span class="n">h</span><span class="w"> </span><span class="o">:</span><span class="w"> </span><span class="n">Surjective</span><span class="w"> </span><span class="n">f</span><span class="o">)</span><span class="w"> </span><span class="o">:</span><span class="w"> </span><span class="n">u</span><span class="w"> </span><span class="bp">&#8838;</span><span class="w"> </span><span class="n">f</span><span class="w"> </span><span class="bp">&#39;&#39;</span><span class="w"> </span><span class="o">(</span><span class="n">f</span><span class="w"> </span><span class="bp">&#8315;&#185;&#39;</span><span class="w"> </span><span class="n">u</span><span class="o">)</span><span class="w"> </span><span class="o">:=</span><span class="w"> </span><span class="kd">by</span>
<span class="w">  </span><span class="gr">sorry</span>

<span class="kd">example</span><span class="w"> </span><span class="o">(</span><span class="n">h</span><span class="w"> </span><span class="o">:</span><span class="w"> </span><span class="n">s</span><span class="w"> </span><span class="bp">&#8838;</span><span class="w"> </span><span class="n">t</span><span class="o">)</span><span class="w"> </span><span class="o">:</span><span class="w"> </span><span class="n">f</span><span class="w"> </span><span class="bp">&#39;&#39;</span><span class="w"> </span><span class="n">s</span><span class="w"> </span><span class="bp">&#8838;</span><span class="w"> </span><span class="n">f</span><span class="w"> </span><span class="bp">&#39;&#39;</span><span class="w"> </span><span class="n">t</span><span class="w"> </span><span class="o">:=</span><span class="w"> </span><span class="kd">by</span>
<span class="w">  </span><span class="gr">sorry</span>

<span class="kd">example</span><span class="w"> </span><span class="o">(</span><span class="n">h</span><span class="w"> </span><span class="o">:</span><span class="w"> </span><span class="n">u</span><span class="w"> </span><span class="bp">&#8838;</span><span class="w"> </span><span class="n">v</span><span class="o">)</span><span class="w"> </span><span class="o">:</span><span class="w"> </span><span class="n">f</span><span class="w"> </span><span class="bp">&#8315;&#185;&#39;</span><span class="w"> </span><span class="n">u</span><span class="w"> </span><span class="bp">&#8838;</span><span class="w"> </span><span class="n">f</span><span class="w"> </span><span class="bp">&#8315;&#185;&#39;</span><span class="w"> </span><span class="n">v</span><span class="w"> </span><span class="o">:=</span><span class="w"> </span><span class="kd">by</span>
<span class="w">  </span><span class="gr">sorry</span>

<span class="kd">example</span><span class="w"> </span><span class="o">:</span><span class="w"> </span><span class="n">f</span><span class="w"> </span><span class="bp">&#8315;&#185;&#39;</span><span class="w"> </span><span class="o">(</span><span class="n">u</span><span class="w"> </span><span class="bp">&#8746;</span><span class="w"> </span><span class="n">v</span><span class="o">)</span><span class="w"> </span><span class="bp">=</span><span class="w"> </span><span class="n">f</span><span class="w"> </span><span class="bp">&#8315;&#185;&#39;</span><span class="w"> </span><span class="n">u</span><span class="w"> </span><span class="bp">&#8746;</span><span class="w"> </span><span class="n">f</span><span class="w"> </span><span class="bp">&#8315;&#185;&#39;</span><span class="w"> </span><span class="n">v</span><span class="w"> </span><span class="o">:=</span><span class="w"> </span><span class="kd">by</span>
<span class="w">  </span><span class="gr">sorry</span>

<span class="kd">example</span><span class="w"> </span><span class="o">:</span><span class="w"> </span><span class="n">f</span><span class="w"> </span><span class="bp">&#39;&#39;</span><span class="w"> </span><span class="o">(</span><span class="n">s</span><span class="w"> </span><span class="bp">&#8745;</span><span class="w"> </span><span class="n">t</span><span class="o">)</span><span class="w"> </span><span class="bp">&#8838;</span><span class="w"> </span><span class="n">f</span><span class="w"> </span><span class="bp">&#39;&#39;</span><span class="w"> </span><span class="n">s</span><span class="w"> </span><span class="bp">&#8745;</span><span class="w"> </span><span class="n">f</span><span class="w"> </span><span class="bp">&#39;&#39;</span><span class="w"> </span><span class="n">t</span><span class="w"> </span><span class="o">:=</span><span class="w"> </span><span class="kd">by</span>
<span class="w">  </span><span class="gr">sorry</span>

<span class="kd">example</span><span class="w"> </span><span class="o">(</span><span class="n">h</span><span class="w"> </span><span class="o">:</span><span class="w"> </span><span class="n">Injective</span><span class="w"> </span><span class="n">f</span><span class="o">)</span><span class="w"> </span><span class="o">:</span><span class="w"> </span><span class="n">f</span><span class="w"> </span><span class="bp">&#39;&#39;</span><span class="w"> </span><span class="n">s</span><span class="w"> </span><span class="bp">&#8745;</span><span class="w"> </span><span class="n">f</span><span class="w"> </span><span class="bp">&#39;&#39;</span><span class="w"> </span><span class="n">t</span><span class="w"> </span><span class="bp">&#8838;</span><span class="w"> </span><span class="n">f</span><span class="w"> </span><span class="bp">&#39;&#39;</span><span class="w"> </span><span class="o">(</span><span class="n">s</span><span class="w"> </span><span class="bp">&#8745;</span><span class="w"> </span><span class="n">t</span><span class="o">)</span><span class="w"> </span><span class="o">:=</span><span class="w"> </span><span class="kd">by</span>
<span class="w">  </span><span class="gr">sorry</span>

<span class="kd">example</span><span class="w"> </span><span class="o">:</span><span class="w"> </span><span class="n">f</span><span class="w"> </span><span class="bp">&#39;&#39;</span><span class="w"> </span><span class="n">s</span><span class="w"> </span><span class="bp">\</span><span class="w"> </span><span class="n">f</span><span class="w"> </span><span class="bp">&#39;&#39;</span><span class="w"> </span><span class="n">t</span><span class="w"> </span><span class="bp">&#8838;</span><span class="w"> </span><span class="n">f</span><span class="w"> </span><span class="bp">&#39;&#39;</span><span class="w"> </span><span class="o">(</span><span class="n">s</span><span class="w"> </span><span class="bp">\</span><span class="w"> </span><span class="n">t</span><span class="o">)</span><span class="w"> </span><span class="o">:=</span><span class="w"> </span><span class="kd">by</span>
<span class="w">  </span><span class="gr">sorry</span>

<span class="kd">example</span><span class="w"> </span><span class="o">:</span><span class="w"> </span><span class="n">f</span><span class="w"> </span><span class="bp">&#8315;&#185;&#39;</span><span class="w"> </span><span class="n">u</span><span class="w"> </span><span class="bp">\</span><span class="w"> </span><span class="n">f</span><span class="w"> </span><span class="bp">&#8315;&#185;&#39;</span><span class="w"> </span><span class="n">v</span><span class="w"> </span><span class="bp">&#8838;</span><span class="w"> </span><span class="n">f</span><span class="w"> </span><span class="bp">&#8315;&#185;&#39;</span><span class="w"> </span><span class="o">(</span><span class="n">u</span><span class="w"> </span><span class="bp">\</span><span class="w"> </span><span class="n">v</span><span class="o">)</span><span class="w"> </span><span class="o">:=</span><span class="w"> </span><span class="kd">by</span>
<span class="w">  </span><span class="gr">sorry</span>

<span class="kd">example</span><span class="w"> </span><span class="o">:</span><span class="w"> </span><span class="n">f</span><span class="w"> </span><span class="bp">&#39;&#39;</span><span class="w"> </span><span class="n">s</span><span class="w"> </span><span class="bp">&#8745;</span><span class="w"> </span><span class="n">v</span><span class="w"> </span><span class="bp">=</span><span class="w"> </span><span class="n">f</span><span class="w"> </span><span class="bp">&#39;&#39;</span><span class="w"> </span><span class="o">(</span><span class="n">s</span><span class="w"> </span><span class="bp">&#8745;</span><span class="w"> </span><span class="n">f</span><span class="w"> </span><span class="bp">&#8315;&#185;&#39;</span><span class="w"> </span><span class="n">v</span><span class="o">)</span><span class="w"> </span><span class="o">:=</span><span class="w"> </span><span class="kd">by</span>
<span class="w">  </span><span class="gr">sorry</span>

<span class="kd">example</span><span class="w"> </span><span class="o">:</span><span class="w"> </span><span class="n">f</span><span class="w"> </span><span class="bp">&#39;&#39;</span><span class="w"> </span><span class="o">(</span><span class="n">s</span><span class="w"> </span><span class="bp">&#8745;</span><span class="w"> </span><span class="n">f</span><span class="w"> </span><span class="bp">&#8315;&#185;&#39;</span><span class="w"> </span><span class="n">u</span><span class="o">)</span><span class="w"> </span><span class="bp">&#8838;</span><span class="w"> </span><span class="n">f</span><span class="w"> </span><span class="bp">&#39;&#39;</span><span class="w"> </span><span class="n">s</span><span class="w"> </span><span class="bp">&#8745;</span><span class="w"> </span><span class="n">u</span><span class="w"> </span><span class="o">:=</span><span class="w"> </span><span class="kd">by</span>
<span class="w">  </span><span class="gr">sorry</span>

<span class="kd">example</span><span class="w"> </span><span class="o">:</span><span class="w"> </span><span class="n">s</span><span class="w"> </span><span class="bp">&#8745;</span><span class="w"> </span><span class="n">f</span><span class="w"> </span><span class="bp">&#8315;&#185;&#39;</span><span class="w"> </span><span class="n">u</span><span class="w"> </span><span class="bp">&#8838;</span><span class="w"> </span><span class="n">f</span><span class="w"> </span><span class="bp">&#8315;&#185;&#39;</span><span class="w"> </span><span class="o">(</span><span class="n">f</span><span class="w"> </span><span class="bp">&#39;&#39;</span><span class="w"> </span><span class="n">s</span><span class="w"> </span><span class="bp">&#8745;</span><span class="w"> </span><span class="n">u</span><span class="o">)</span><span class="w"> </span><span class="o">:=</span><span class="w"> </span><span class="kd">by</span>
<span class="w">  </span><span class="gr">sorry</span>

<span class="kd">example</span><span class="w"> </span><span class="o">:</span><span class="w"> </span><span class="n">s</span><span class="w"> </span><span class="bp">&#8746;</span><span class="w"> </span><span class="n">f</span><span class="w"> </span><span class="bp">&#8315;&#185;&#39;</span><span class="w"> </span><span class="n">u</span><span class="w"> </span><span class="bp">&#8838;</span><span class="w"> </span><span class="n">f</span><span class="w"> </span><span class="bp">&#8315;&#185;&#39;</span><span class="w"> </span><span class="o">(</span><span class="n">f</span><span class="w"> </span><span class="bp">&#39;&#39;</span><span class="w"> </span><span class="n">s</span><span class="w"> </span><span class="bp">&#8746;</span><span class="w"> </span><span class="n">u</span><span class="o">)</span><span class="w"> </span><span class="o">:=</span><span class="w"> </span><span class="kd">by</span>
<span class="w">  </span><span class="gr">sorry</span>
</pre></div>
</div>
<p>You can also try your hand at the next group of exercises,
which characterize the behavior of images and preimages
with respect to indexed unions and intersections.
In the third exercise, the argument <code class="docutils literal notranslate"><span class="pre">i</span> <span class="pre">:</span> <span class="pre">I</span></code> is needed
to guarantee that the index set is nonempty.
To prove any of these, we recommend using <code class="docutils literal notranslate"><span class="pre">ext</span></code> or <code class="docutils literal notranslate"><span class="pre">intro</span></code>
to unfold the meaning of an equation or inclusion between sets,
and then calling <code class="docutils literal notranslate"><span class="pre">simp</span></code> to unpack the conditions for membership.</p>
<div class="highlight-lean notranslate"><div class="highlight"><pre><span></span><span class="kd">variable</span><span class="w"> </span><span class="o">{</span><span class="n">I</span><span class="w"> </span><span class="o">:</span><span class="w"> </span><span class="kt">Type</span><span class="bp">*</span><span class="o">}</span><span class="w"> </span><span class="o">(</span><span class="n">A</span><span class="w"> </span><span class="o">:</span><span class="w"> </span><span class="n">I</span><span class="w"> </span><span class="bp">&#8594;</span><span class="w"> </span><span class="n">Set</span><span class="w"> </span><span class="n">&#945;</span><span class="o">)</span><span class="w"> </span><span class="o">(</span><span class="n">B</span><span class="w"> </span><span class="o">:</span><span class="w"> </span><span class="n">I</span><span class="w"> </span><span class="bp">&#8594;</span><span class="w"> </span><span class="n">Set</span><span class="w"> </span><span class="n">&#946;</span><span class="o">)</span>

<span class="kd">example</span><span class="w"> </span><span class="o">:</span><span class="w"> </span><span class="o">(</span><span class="n">f</span><span class="w"> </span><span class="bp">&#39;&#39;</span><span class="w"> </span><span class="bp">&#8899;</span><span class="w"> </span><span class="n">i</span><span class="o">,</span><span class="w"> </span><span class="n">A</span><span class="w"> </span><span class="n">i</span><span class="o">)</span><span class="w"> </span><span class="bp">=</span><span class="w"> </span><span class="bp">&#8899;</span><span class="w"> </span><span class="n">i</span><span class="o">,</span><span class="w"> </span><span class="n">f</span><span class="w"> </span><span class="bp">&#39;&#39;</span><span class="w"> </span><span class="n">A</span><span class="w"> </span><span class="n">i</span><span class="w"> </span><span class="o">:=</span><span class="w"> </span><span class="kd">by</span>
<span class="w">  </span><span class="gr">sorry</span>

<span class="kd">example</span><span class="w"> </span><span class="o">:</span><span class="w"> </span><span class="o">(</span><span class="n">f</span><span class="w"> </span><span class="bp">&#39;&#39;</span><span class="w"> </span><span class="bp">&#8898;</span><span class="w"> </span><span class="n">i</span><span class="o">,</span><span class="w"> </span><span class="n">A</span><span class="w"> </span><span class="n">i</span><span class="o">)</span><span class="w"> </span><span class="bp">&#8838;</span><span class="w"> </span><span class="bp">&#8898;</span><span class="w"> </span><span class="n">i</span><span class="o">,</span><span class="w"> </span><span class="n">f</span><span class="w"> </span><span class="bp">&#39;&#39;</span><span class="w"> </span><span class="n">A</span><span class="w"> </span><span class="n">i</span><span class="w"> </span><span class="o">:=</span><span class="w"> </span><span class="kd">by</span>
<span class="w">  </span><span class="gr">sorry</span>

<span class="kd">example</span><span class="w"> </span><span class="o">(</span><span class="n">i</span><span class="w"> </span><span class="o">:</span><span class="w"> </span><span class="n">I</span><span class="o">)</span><span class="w"> </span><span class="o">(</span><span class="n">injf</span><span class="w"> </span><span class="o">:</span><span class="w"> </span><span class="n">Injective</span><span class="w"> </span><span class="n">f</span><span class="o">)</span><span class="w"> </span><span class="o">:</span><span class="w"> </span><span class="o">(</span><span class="bp">&#8898;</span><span class="w"> </span><span class="n">i</span><span class="o">,</span><span class="w"> </span><span class="n">f</span><span class="w"> </span><span class="bp">&#39;&#39;</span><span class="w"> </span><span class="n">A</span><span class="w"> </span><span class="n">i</span><span class="o">)</span><span class="w"> </span><span class="bp">&#8838;</span><span class="w"> </span><span class="n">f</span><span class="w"> </span><span class="bp">&#39;&#39;</span><span class="w"> </span><span class="bp">&#8898;</span><span class="w"> </span><span class="n">i</span><span class="o">,</span><span class="w"> </span><span class="n">A</span><span class="w"> </span><span class="n">i</span><span class="w"> </span><span class="o">:=</span><span class="w"> </span><span class="kd">by</span>
<span class="w">  </span><span class="gr">sorry</span>

<span class="kd">example</span><span class="w"> </span><span class="o">:</span><span class="w"> </span><span class="o">(</span><span class="n">f</span><span class="w"> </span><span class="bp">&#8315;&#185;&#39;</span><span class="w"> </span><span class="bp">&#8899;</span><span class="w"> </span><span class="n">i</span><span class="o">,</span><span class="w"> </span><span class="n">B</span><span class="w"> </span><span class="n">i</span><span class="o">)</span><span class="w"> </span><span class="bp">=</span><span class="w"> </span><span class="bp">&#8899;</span><span class="w"> </span><span class="n">i</span><span class="o">,</span><span class="w"> </span><span class="n">f</span><span class="w"> </span><span class="bp">&#8315;&#185;&#39;</span><span class="w"> </span><span class="n">B</span><span class="w"> </span><span class="n">i</span><span class="w"> </span><span class="o">:=</span><span class="w"> </span><span class="kd">by</span>
<span class="w">  </span><span class="gr">sorry</span>

<span class="kd">example</span><span class="w"> </span><span class="o">:</span><span class="w"> </span><span class="o">(</span><span class="n">f</span><span class="w"> </span><span class="bp">&#8315;&#185;&#39;</span><span class="w"> </span><span class="bp">&#8898;</span><span class="w"> </span><span class="n">i</span><span class="o">,</span><span class="w"> </span><span class="n">B</span><span class="w"> </span><span class="n">i</span><span class="o">)</span><span class="w"> </span><span class="bp">=</span><span class="w"> </span><span class="bp">&#8898;</span><span class="w"> </span><span class="n">i</span><span class="o">,</span><span class="w"> </span><span class="n">f</span><span class="w"> </span><span class="bp">&#8315;&#185;&#39;</span><span class="w"> </span><span class="n">B</span><span class="w"> </span><span class="n">i</span><span class="w"> </span><span class="o">:=</span><span class="w"> </span><span class="kd">by</span>
<span class="w">  </span><span class="gr">sorry</span>
</pre></div>
</div>
<p>The library defines a predicate <code class="docutils literal notranslate"><span class="pre">InjOn</span> <span class="pre">f</span> <span class="pre">s</span></code> to say that
<code class="docutils literal notranslate"><span class="pre">f</span></code> is injective on <code class="docutils literal notranslate"><span class="pre">s</span></code>.
It is defined as follows:</p>
<div class="highlight-lean notranslate"><div class="highlight"><pre><span></span><span class="kd">example</span><span class="w"> </span><span class="o">:</span><span class="w"> </span><span class="n">InjOn</span><span class="w"> </span><span class="n">f</span><span class="w"> </span><span class="n">s</span><span class="w"> </span><span class="bp">&#8596;</span><span class="w"> </span><span class="bp">&#8704;</span><span class="w"> </span><span class="n">x&#8321;</span><span class="w"> </span><span class="bp">&#8712;</span><span class="w"> </span><span class="n">s</span><span class="o">,</span><span class="w"> </span><span class="bp">&#8704;</span><span class="w"> </span><span class="n">x&#8322;</span><span class="w"> </span><span class="bp">&#8712;</span><span class="w"> </span><span class="n">s</span><span class="o">,</span><span class="w"> </span><span class="n">f</span><span class="w"> </span><span class="n">x&#8321;</span><span class="w"> </span><span class="bp">=</span><span class="w"> </span><span class="n">f</span><span class="w"> </span><span class="n">x&#8322;</span><span class="w"> </span><span class="bp">&#8594;</span><span class="w"> </span><span class="n">x&#8321;</span><span class="w"> </span><span class="bp">=</span><span class="w"> </span><span class="n">x&#8322;</span><span class="w"> </span><span class="o">:=</span>
<span class="w">  </span><span class="n">Iff.refl</span><span class="w"> </span><span class="n">_</span>
</pre></div>
</div>
<p>The statement <code class="docutils literal notranslate"><span class="pre">Injective</span> <span class="pre">f</span></code> is provably equivalent
to <code class="docutils literal notranslate"><span class="pre">InjOn</span> <span class="pre">f</span> <span class="pre">univ</span></code>.
Similarly, the library defines <code class="docutils literal notranslate"><span class="pre">range</span> <span class="pre">f</span></code> to be
<code class="docutils literal notranslate"><span class="pre">{x</span> <span class="pre">|</span> <span class="pre">&#8707;y,</span> <span class="pre">f</span> <span class="pre">y</span> <span class="pre">=</span> <span class="pre">x}</span></code>,
so <code class="docutils literal notranslate"><span class="pre">range</span> <span class="pre">f</span></code> is provably equal to <code class="docutils literal notranslate"><span class="pre">f</span> <span class="pre">''</span> <span class="pre">univ</span></code>.
This is a common theme in Mathlib:
although many properties of functions are defined relative
to their full domain,
there are often relativized versions that restrict
the statements to a subset of the domain type.</p>
<p>Here is are some examples of <code class="docutils literal notranslate"><span class="pre">InjOn</span></code> and <code class="docutils literal notranslate"><span class="pre">range</span></code> in use:</p>
<div class="highlight-lean notranslate"><div class="highlight"><pre><span></span><span class="kn">open</span><span class="w"> </span><span class="n">Set</span><span class="w"> </span><span class="n">Real</span>

<span class="kd">example</span><span class="w"> </span><span class="o">:</span><span class="w"> </span><span class="n">InjOn</span><span class="w"> </span><span class="n">log</span><span class="w"> </span><span class="o">{</span><span class="w"> </span><span class="n">x</span><span class="w"> </span><span class="bp">|</span><span class="w"> </span><span class="n">x</span><span class="w"> </span><span class="bp">&gt;</span><span class="w"> </span><span class="mi">0</span><span class="w"> </span><span class="o">}</span><span class="w"> </span><span class="o">:=</span><span class="w"> </span><span class="kd">by</span>
<span class="w">  </span><span class="n">intro</span><span class="w"> </span><span class="n">x</span><span class="w"> </span><span class="n">xpos</span><span class="w"> </span><span class="n">y</span><span class="w"> </span><span class="n">ypos</span>
<span class="w">  </span><span class="n">intro</span><span class="w"> </span><span class="n">e</span>
<span class="w">  </span><span class="c1">-- log x = log y</span>
<span class="w">  </span><span class="k">calc</span>
<span class="w">    </span><span class="n">x</span><span class="w"> </span><span class="bp">=</span><span class="w"> </span><span class="n">exp</span><span class="w"> </span><span class="o">(</span><span class="n">log</span><span class="w"> </span><span class="n">x</span><span class="o">)</span><span class="w"> </span><span class="o">:=</span><span class="w"> </span><span class="kd">by</span><span class="w"> </span><span class="n">rw</span><span class="w"> </span><span class="o">[</span><span class="n">exp_log</span><span class="w"> </span><span class="n">xpos</span><span class="o">]</span>
<span class="w">    </span><span class="n">_</span><span class="w"> </span><span class="bp">=</span><span class="w"> </span><span class="n">exp</span><span class="w"> </span><span class="o">(</span><span class="n">log</span><span class="w"> </span><span class="n">y</span><span class="o">)</span><span class="w"> </span><span class="o">:=</span><span class="w"> </span><span class="kd">by</span><span class="w"> </span><span class="n">rw</span><span class="w"> </span><span class="o">[</span><span class="n">e</span><span class="o">]</span>
<span class="w">    </span><span class="n">_</span><span class="w"> </span><span class="bp">=</span><span class="w"> </span><span class="n">y</span><span class="w"> </span><span class="o">:=</span><span class="w"> </span><span class="kd">by</span><span class="w"> </span><span class="n">rw</span><span class="w"> </span><span class="o">[</span><span class="n">exp_log</span><span class="w"> </span><span class="n">ypos</span><span class="o">]</span>


<span class="kd">example</span><span class="w"> </span><span class="o">:</span><span class="w"> </span><span class="n">range</span><span class="w"> </span><span class="n">exp</span><span class="w"> </span><span class="bp">=</span><span class="w"> </span><span class="o">{</span><span class="w"> </span><span class="n">y</span><span class="w"> </span><span class="bp">|</span><span class="w"> </span><span class="n">y</span><span class="w"> </span><span class="bp">&gt;</span><span class="w"> </span><span class="mi">0</span><span class="w"> </span><span class="o">}</span><span class="w"> </span><span class="o">:=</span><span class="w"> </span><span class="kd">by</span>
<span class="w">  </span><span class="n">ext</span><span class="w"> </span><span class="n">y</span><span class="bp">;</span><span class="w"> </span><span class="n">constructor</span>
<span class="w">  </span><span class="bp">&#183;</span><span class="w"> </span><span class="n">rintro</span><span class="w"> </span><span class="o">&#10216;</span><span class="n">x</span><span class="o">,</span><span class="w"> </span><span class="n">rfl</span><span class="o">&#10217;</span>
<span class="w">    </span><span class="n">apply</span><span class="w"> </span><span class="n">exp_pos</span>
<span class="w">  </span><span class="n">intro</span><span class="w"> </span><span class="n">ypos</span>
<span class="w">  </span><span class="n">use</span><span class="w"> </span><span class="n">log</span><span class="w"> </span><span class="n">y</span>
<span class="w">  </span><span class="n">rw</span><span class="w"> </span><span class="o">[</span><span class="n">exp_log</span><span class="w"> </span><span class="n">ypos</span><span class="o">]</span>
</pre></div>
</div>
<p>Try proving these:</p>
<div class="highlight-lean notranslate"><div class="highlight"><pre><span></span><span class="kd">example</span><span class="w"> </span><span class="o">:</span><span class="w"> </span><span class="n">InjOn</span><span class="w"> </span><span class="n">sqrt</span><span class="w"> </span><span class="o">{</span><span class="w"> </span><span class="n">x</span><span class="w"> </span><span class="bp">|</span><span class="w"> </span><span class="n">x</span><span class="w"> </span><span class="bp">&#8805;</span><span class="w"> </span><span class="mi">0</span><span class="w"> </span><span class="o">}</span><span class="w"> </span><span class="o">:=</span><span class="w"> </span><span class="kd">by</span>
<span class="w">  </span><span class="gr">sorry</span>

<span class="kd">example</span><span class="w"> </span><span class="o">:</span><span class="w"> </span><span class="n">InjOn</span><span class="w"> </span><span class="o">(</span><span class="k">fun</span><span class="w"> </span><span class="n">x</span><span class="w"> </span><span class="bp">&#8614;</span><span class="w"> </span><span class="n">x</span><span class="w"> </span><span class="bp">^</span><span class="w"> </span><span class="mi">2</span><span class="o">)</span><span class="w"> </span><span class="o">{</span><span class="w"> </span><span class="n">x</span><span class="w"> </span><span class="o">:</span><span class="w"> </span><span class="n">&#8477;</span><span class="w"> </span><span class="bp">|</span><span class="w"> </span><span class="n">x</span><span class="w"> </span><span class="bp">&#8805;</span><span class="w"> </span><span class="mi">0</span><span class="w"> </span><span class="o">}</span><span class="w"> </span><span class="o">:=</span><span class="w"> </span><span class="kd">by</span>
<span class="w">  </span><span class="gr">sorry</span>

<span class="kd">example</span><span class="w"> </span><span class="o">:</span><span class="w"> </span><span class="n">sqrt</span><span class="w"> </span><span class="bp">&#39;&#39;</span><span class="w"> </span><span class="o">{</span><span class="w"> </span><span class="n">x</span><span class="w"> </span><span class="bp">|</span><span class="w"> </span><span class="n">x</span><span class="w"> </span><span class="bp">&#8805;</span><span class="w"> </span><span class="mi">0</span><span class="w"> </span><span class="o">}</span><span class="w"> </span><span class="bp">=</span><span class="w"> </span><span class="o">{</span><span class="w"> </span><span class="n">y</span><span class="w"> </span><span class="bp">|</span><span class="w"> </span><span class="n">y</span><span class="w"> </span><span class="bp">&#8805;</span><span class="w"> </span><span class="mi">0</span><span class="w"> </span><span class="o">}</span><span class="w"> </span><span class="o">:=</span><span class="w"> </span><span class="kd">by</span>
<span class="w">  </span><span class="gr">sorry</span>

<span class="kd">example</span><span class="w"> </span><span class="o">:</span><span class="w"> </span><span class="o">(</span><span class="n">range</span><span class="w"> </span><span class="k">fun</span><span class="w"> </span><span class="n">x</span><span class="w"> </span><span class="bp">&#8614;</span><span class="w"> </span><span class="n">x</span><span class="w"> </span><span class="bp">^</span><span class="w"> </span><span class="mi">2</span><span class="o">)</span><span class="w"> </span><span class="bp">=</span><span class="w"> </span><span class="o">{</span><span class="w"> </span><span class="n">y</span><span class="w"> </span><span class="o">:</span><span class="w"> </span><span class="n">&#8477;</span><span class="w"> </span><span class="bp">|</span><span class="w"> </span><span class="n">y</span><span class="w"> </span><span class="bp">&#8805;</span><span class="w"> </span><span class="mi">0</span><span class="w"> </span><span class="o">}</span><span class="w"> </span><span class="o">:=</span><span class="w"> </span><span class="kd">by</span>
<span class="w">  </span><span class="gr">sorry</span>
</pre></div>
</div>
<p>To define the inverse of a function <code class="docutils literal notranslate"><span class="pre">f</span> <span class="pre">:</span> <span class="pre">&#945;</span> <span class="pre">&#8594;</span> <span class="pre">&#946;</span></code>,
we will use two new ingredients.
First, we need to deal with the fact that
an arbitrary type in Lean may be empty.
To define the inverse to <code class="docutils literal notranslate"><span class="pre">f</span></code> at <code class="docutils literal notranslate"><span class="pre">y</span></code> when there is
no <code class="docutils literal notranslate"><span class="pre">x</span></code> satisfying <code class="docutils literal notranslate"><span class="pre">f</span> <span class="pre">x</span> <span class="pre">=</span> <span class="pre">y</span></code>,
we want to assign a default value in <code class="docutils literal notranslate"><span class="pre">&#945;</span></code>.
Adding the annotation <code class="docutils literal notranslate"><span class="pre">[Inhabited</span> <span class="pre">&#945;]</span></code> as a variable
is tantamount to assuming that <code class="docutils literal notranslate"><span class="pre">&#945;</span></code> has a
preferred element, which is denoted <code class="docutils literal notranslate"><span class="pre">default</span></code>.
Second, in the case where there is more than one <code class="docutils literal notranslate"><span class="pre">x</span></code>
such that <code class="docutils literal notranslate"><span class="pre">f</span> <span class="pre">x</span> <span class="pre">=</span> <span class="pre">y</span></code>,
the inverse function needs to <em>choose</em> one of them.
This requires an appeal to the <em>axiom of choice</em>.
Lean allows various ways of accessing it;
one convenient method is to use the classical <code class="docutils literal notranslate"><span class="pre">choose</span></code>
operator, illustrated below.</p>
<div class="highlight-lean notranslate"><div class="highlight"><pre><span></span><span class="kd">variable</span><span class="w"> </span><span class="o">{</span><span class="n">&#945;</span><span class="w"> </span><span class="n">&#946;</span><span class="w"> </span><span class="o">:</span><span class="w"> </span><span class="kt">Type</span><span class="bp">*</span><span class="o">}</span><span class="w"> </span><span class="o">[</span><span class="n">Inhabited</span><span class="w"> </span><span class="n">&#945;</span><span class="o">]</span>

<span class="k">#check</span><span class="w"> </span><span class="o">(</span><span class="n">default</span><span class="w"> </span><span class="o">:</span><span class="w"> </span><span class="n">&#945;</span><span class="o">)</span>

<span class="kd">variable</span><span class="w"> </span><span class="o">(</span><span class="n">P</span><span class="w"> </span><span class="o">:</span><span class="w"> </span><span class="n">&#945;</span><span class="w"> </span><span class="bp">&#8594;</span><span class="w"> </span><span class="kt">Prop</span><span class="o">)</span><span class="w"> </span><span class="o">(</span><span class="n">h</span><span class="w"> </span><span class="o">:</span><span class="w"> </span><span class="bp">&#8707;</span><span class="w"> </span><span class="n">x</span><span class="o">,</span><span class="w"> </span><span class="n">P</span><span class="w"> </span><span class="n">x</span><span class="o">)</span>

<span class="k">#check</span><span class="w"> </span><span class="n">Classical.choose</span><span class="w"> </span><span class="n">h</span>

<span class="kd">example</span><span class="w"> </span><span class="o">:</span><span class="w"> </span><span class="n">P</span><span class="w"> </span><span class="o">(</span><span class="n">Classical.choose</span><span class="w"> </span><span class="n">h</span><span class="o">)</span><span class="w"> </span><span class="o">:=</span>
<span class="w">  </span><span class="n">Classical.choose_spec</span><span class="w"> </span><span class="n">h</span>
</pre></div>
</div>
<p>Given <code class="docutils literal notranslate"><span class="pre">h</span> <span class="pre">:</span> <span class="pre">&#8707;</span> <span class="pre">x,</span> <span class="pre">P</span> <span class="pre">x</span></code>, the value of <code class="docutils literal notranslate"><span class="pre">Classical.choose</span> <span class="pre">h</span></code>
is some <code class="docutils literal notranslate"><span class="pre">x</span></code> satisfying <code class="docutils literal notranslate"><span class="pre">P</span> <span class="pre">x</span></code>.
The theorem <code class="docutils literal notranslate"><span class="pre">Classical.choose_spec</span> <span class="pre">h</span></code> says that <code class="docutils literal notranslate"><span class="pre">Classical.choose</span> <span class="pre">h</span></code>
meets this specification.</p>
<p>With these in hand, we can define the inverse function
as follows:</p>
<div class="highlight-lean notranslate"><div class="highlight"><pre><span></span><span class="kd">noncomputable</span><span class="w"> </span><span class="kn">section</span>

<span class="kn">open</span><span class="w"> </span><span class="n">Classical</span>

<span class="kd">def</span><span class="w"> </span><span class="n">inverse</span><span class="w"> </span><span class="o">(</span><span class="n">f</span><span class="w"> </span><span class="o">:</span><span class="w"> </span><span class="n">&#945;</span><span class="w"> </span><span class="bp">&#8594;</span><span class="w"> </span><span class="n">&#946;</span><span class="o">)</span><span class="w"> </span><span class="o">:</span><span class="w"> </span><span class="n">&#946;</span><span class="w"> </span><span class="bp">&#8594;</span><span class="w"> </span><span class="n">&#945;</span><span class="w"> </span><span class="o">:=</span><span class="w"> </span><span class="k">fun</span><span class="w"> </span><span class="n">y</span><span class="w"> </span><span class="o">:</span><span class="w"> </span><span class="n">&#946;</span><span class="w"> </span><span class="bp">&#8614;</span>
<span class="w">  </span><span class="k">if</span><span class="w"> </span><span class="n">h</span><span class="w"> </span><span class="o">:</span><span class="w"> </span><span class="bp">&#8707;</span><span class="w"> </span><span class="n">x</span><span class="o">,</span><span class="w"> </span><span class="n">f</span><span class="w"> </span><span class="n">x</span><span class="w"> </span><span class="bp">=</span><span class="w"> </span><span class="n">y</span><span class="w"> </span><span class="k">then</span><span class="w"> </span><span class="n">Classical.choose</span><span class="w"> </span><span class="n">h</span><span class="w"> </span><span class="k">else</span><span class="w"> </span><span class="n">default</span>

<span class="kd">theorem</span><span class="w"> </span><span class="n">inverse_spec</span><span class="w"> </span><span class="o">{</span><span class="n">f</span><span class="w"> </span><span class="o">:</span><span class="w"> </span><span class="n">&#945;</span><span class="w"> </span><span class="bp">&#8594;</span><span class="w"> </span><span class="n">&#946;</span><span class="o">}</span><span class="w"> </span><span class="o">(</span><span class="n">y</span><span class="w"> </span><span class="o">:</span><span class="w"> </span><span class="n">&#946;</span><span class="o">)</span><span class="w"> </span><span class="o">(</span><span class="n">h</span><span class="w"> </span><span class="o">:</span><span class="w"> </span><span class="bp">&#8707;</span><span class="w"> </span><span class="n">x</span><span class="o">,</span><span class="w"> </span><span class="n">f</span><span class="w"> </span><span class="n">x</span><span class="w"> </span><span class="bp">=</span><span class="w"> </span><span class="n">y</span><span class="o">)</span><span class="w"> </span><span class="o">:</span><span class="w"> </span><span class="n">f</span><span class="w"> </span><span class="o">(</span><span class="n">inverse</span><span class="w"> </span><span class="n">f</span><span class="w"> </span><span class="n">y</span><span class="o">)</span><span class="w"> </span><span class="bp">=</span><span class="w"> </span><span class="n">y</span><span class="w"> </span><span class="o">:=</span><span class="w"> </span><span class="kd">by</span>
<span class="w">  </span><span class="n">rw</span><span class="w"> </span><span class="o">[</span><span class="n">inverse</span><span class="o">,</span><span class="w"> </span><span class="n">dif_pos</span><span class="w"> </span><span class="n">h</span><span class="o">]</span>
<span class="w">  </span><span class="n">exact</span><span class="w"> </span><span class="n">Classical.choose_spec</span><span class="w"> </span><span class="n">h</span>
</pre></div>
</div>
<p>The lines <code class="docutils literal notranslate"><span class="pre">noncomputable</span> <span class="pre">section</span></code> and <code class="docutils literal notranslate"><span class="pre">open</span> <span class="pre">Classical</span></code>
are needed because we are using classical logic in an essential way.
On input <code class="docutils literal notranslate"><span class="pre">y</span></code>, the function <code class="docutils literal notranslate"><span class="pre">inverse</span> <span class="pre">f</span></code>
returns some value of <code class="docutils literal notranslate"><span class="pre">x</span></code> satisfying <code class="docutils literal notranslate"><span class="pre">f</span> <span class="pre">x</span> <span class="pre">=</span> <span class="pre">y</span></code> if there is one,
and a default element of <code class="docutils literal notranslate"><span class="pre">&#945;</span></code> otherwise.
This is an instance of a <em>dependent if</em> construction,
since in the positive case, the value returned,
<code class="docutils literal notranslate"><span class="pre">Classical.choose</span> <span class="pre">h</span></code>, depends on the assumption <code class="docutils literal notranslate"><span class="pre">h</span></code>.
The identity <code class="docutils literal notranslate"><span class="pre">dif_pos</span> <span class="pre">h</span></code> rewrites <code class="docutils literal notranslate"><span class="pre">if</span> <span class="pre">h</span> <span class="pre">:</span> <span class="pre">e</span> <span class="pre">then</span> <span class="pre">a</span> <span class="pre">else</span> <span class="pre">b</span></code>
to <code class="docutils literal notranslate"><span class="pre">a</span></code> given <code class="docutils literal notranslate"><span class="pre">h</span> <span class="pre">:</span> <span class="pre">e</span></code>,
and, similarly, <code class="docutils literal notranslate"><span class="pre">dif_neg</span> <span class="pre">h</span></code> rewrites it to <code class="docutils literal notranslate"><span class="pre">b</span></code> given <code class="docutils literal notranslate"><span class="pre">h</span> <span class="pre">:</span> <span class="pre">&#172;</span> <span class="pre">e</span></code>.
There are also versions <code class="docutils literal notranslate"><span class="pre">if_pos</span></code> and <code class="docutils literal notranslate"><span class="pre">if_neg</span></code> that works for non-dependent
if constructions and will be used in the next section.
The theorem <code class="docutils literal notranslate"><span class="pre">inverse_spec</span></code> says that <code class="docutils literal notranslate"><span class="pre">inverse</span> <span class="pre">f</span></code>
meets the first part of this specification.</p>
<p>Don&#8217;t worry if you do not fully understand how these work.
The theorem <code class="docutils literal notranslate"><span class="pre">inverse_spec</span></code> alone should be enough to show
that <code class="docutils literal notranslate"><span class="pre">inverse</span> <span class="pre">f</span></code> is a left inverse if and only if <code class="docutils literal notranslate"><span class="pre">f</span></code> is injective
and a right inverse if and only if <code class="docutils literal notranslate"><span class="pre">f</span></code> is surjective.
Look up the definition of <code class="docutils literal notranslate"><span class="pre">LeftInverse</span></code> and <code class="docutils literal notranslate"><span class="pre">RightInverse</span></code>
by double-clicking or right-clicking on them in VS Code,
or using the commands <code class="docutils literal notranslate"><span class="pre">#print</span> <span class="pre">LeftInverse</span></code> and <code class="docutils literal notranslate"><span class="pre">#print</span> <span class="pre">RightInverse</span></code>.
Then try to prove the two theorems.
They are tricky!
It helps to do the proofs on paper before
you start hacking through the details.
You should be able to prove each of them with about a half-dozen
short lines.
If you are looking for an extra challenge,
try to condense each proof to a single-line proof term.</p>
<div class="highlight-lean notranslate"><div class="highlight"><pre><span></span><span class="kd">variable</span><span class="w"> </span><span class="o">(</span><span class="n">f</span><span class="w"> </span><span class="o">:</span><span class="w"> </span><span class="n">&#945;</span><span class="w"> </span><span class="bp">&#8594;</span><span class="w"> </span><span class="n">&#946;</span><span class="o">)</span>

<span class="kn">open</span><span class="w"> </span><span class="n">Function</span>

<span class="kd">example</span><span class="w"> </span><span class="o">:</span><span class="w"> </span><span class="n">Injective</span><span class="w"> </span><span class="n">f</span><span class="w"> </span><span class="bp">&#8596;</span><span class="w"> </span><span class="n">LeftInverse</span><span class="w"> </span><span class="o">(</span><span class="n">inverse</span><span class="w"> </span><span class="n">f</span><span class="o">)</span><span class="w"> </span><span class="n">f</span><span class="w"> </span><span class="o">:=</span>
<span class="w">  </span><span class="gr">sorry</span>

<span class="kd">example</span><span class="w"> </span><span class="o">:</span><span class="w"> </span><span class="n">Surjective</span><span class="w"> </span><span class="n">f</span><span class="w"> </span><span class="bp">&#8596;</span><span class="w"> </span><span class="n">RightInverse</span><span class="w"> </span><span class="o">(</span><span class="n">inverse</span><span class="w"> </span><span class="n">f</span><span class="o">)</span><span class="w"> </span><span class="n">f</span><span class="w"> </span><span class="o">:=</span>
<span class="w">  </span><span class="gr">sorry</span>
</pre></div>
</div>
<p>We close this section with a type-theoretic statement of Cantor&#8217;s
famous theorem that there is no surjective function from a set
to its power set.
See if you can understand the proof,
and then fill in the two lines that are missing.</p>
<div class="highlight-lean notranslate"><div class="highlight"><pre><span></span><span class="kd">theorem</span><span class="w"> </span><span class="n">Cantor</span><span class="w"> </span><span class="o">:</span><span class="w"> </span><span class="bp">&#8704;</span><span class="w"> </span><span class="n">f</span><span class="w"> </span><span class="o">:</span><span class="w"> </span><span class="n">&#945;</span><span class="w"> </span><span class="bp">&#8594;</span><span class="w"> </span><span class="n">Set</span><span class="w"> </span><span class="n">&#945;</span><span class="o">,</span><span class="w"> </span><span class="bp">&#172;</span><span class="n">Surjective</span><span class="w"> </span><span class="n">f</span><span class="w"> </span><span class="o">:=</span><span class="w"> </span><span class="kd">by</span>
<span class="w">  </span><span class="n">intro</span><span class="w"> </span><span class="n">f</span><span class="w"> </span><span class="n">surjf</span>
<span class="w">  </span><span class="k">let</span><span class="w"> </span><span class="n">S</span><span class="w"> </span><span class="o">:=</span><span class="w"> </span><span class="o">{</span><span class="w"> </span><span class="n">i</span><span class="w"> </span><span class="bp">|</span><span class="w"> </span><span class="n">i</span><span class="w"> </span><span class="bp">&#8713;</span><span class="w"> </span><span class="n">f</span><span class="w"> </span><span class="n">i</span><span class="w"> </span><span class="o">}</span>
<span class="w">  </span><span class="n">rcases</span><span class="w"> </span><span class="n">surjf</span><span class="w"> </span><span class="n">S</span><span class="w"> </span><span class="k">with</span><span class="w"> </span><span class="o">&#10216;</span><span class="n">j</span><span class="o">,</span><span class="w"> </span><span class="n">h</span><span class="o">&#10217;</span>
<span class="w">  </span><span class="k">have</span><span class="w"> </span><span class="n">h&#8321;</span><span class="w"> </span><span class="o">:</span><span class="w"> </span><span class="n">j</span><span class="w"> </span><span class="bp">&#8713;</span><span class="w"> </span><span class="n">f</span><span class="w"> </span><span class="n">j</span><span class="w"> </span><span class="o">:=</span><span class="w"> </span><span class="kd">by</span>
<span class="w">    </span><span class="n">intro</span><span class="w"> </span><span class="n">h&#39;</span>
<span class="w">    </span><span class="k">have</span><span class="w"> </span><span class="o">:</span><span class="w"> </span><span class="n">j</span><span class="w"> </span><span class="bp">&#8713;</span><span class="w"> </span><span class="n">f</span><span class="w"> </span><span class="n">j</span><span class="w"> </span><span class="o">:=</span><span class="w"> </span><span class="kd">by</span><span class="w"> </span><span class="n">rwa</span><span class="w"> </span><span class="o">[</span><span class="n">h</span><span class="o">]</span><span class="w"> </span><span class="n">at</span><span class="w"> </span><span class="n">h&#39;</span>
<span class="w">    </span><span class="n">contradiction</span>
<span class="w">  </span><span class="k">have</span><span class="w"> </span><span class="n">h&#8322;</span><span class="w"> </span><span class="o">:</span><span class="w"> </span><span class="n">j</span><span class="w"> </span><span class="bp">&#8712;</span><span class="w"> </span><span class="n">S</span>
<span class="w">  </span><span class="gr">sorry</span>
<span class="w">  </span><span class="k">have</span><span class="w"> </span><span class="n">h&#8323;</span><span class="w"> </span><span class="o">:</span><span class="w"> </span><span class="n">j</span><span class="w"> </span><span class="bp">&#8713;</span><span class="w"> </span><span class="n">S</span>
<span class="w">  </span><span class="gr">sorry</span>
<span class="w">  </span><span class="n">contradiction</span>
</pre></div>
</div>
</section>
<section id="the-schroeder-bernstein-theorem">
<span id="id4"></span><h2><span class="section-number">4.3. </span>&#26045;&#32599;&#24503;-&#20271;&#24681;&#26031;&#22374;&#23450;&#29702;<a class="headerlink" href="#the-schroeder-bernstein-theorem" title="Link to this heading">&#61633;</a></h2>
<p>&#25105;&#20204;&#29992;&#19968;&#20010;&#21021;&#31561;&#32780;&#38750;&#24179;&#20961;&#30340;&#23450;&#29702;&#32467;&#26463;&#26412;&#31456;&#12290;&#20196; <span class="math notranslate nohighlight">\(\alpha\)</span> &#21644; <span class="math notranslate nohighlight">\(\beta\)</span> &#26159;&#38598;&#21512;&#12290;&#65288;&#22312;&#25105;&#20204;&#30340;&#24418;&#24335;&#21270;&#20013;, &#23427;&#20204;&#23454;&#38469;&#19978;&#20250;&#26159;&#31867;&#22411;&#12290;&#65289;&#20551;&#23450; <span class="math notranslate nohighlight">\(f : \alpha &#8594; \beta\)</span> &#21644; <span class="math notranslate nohighlight">\(g : \beta &#8594; \alpha\)</span> &#37117;&#26159;&#21333;&#23556;&#12290;&#30452;&#35266;&#19978;&#65292;&#36825;&#24847;&#21619;&#30528; <span class="math notranslate nohighlight">\(\alpha\)</span> &#19981;&#22823;&#20110; <span class="math notranslate nohighlight">\(\beta\)</span> &#65292;&#21453;&#20043;&#20134;&#28982;&#12290;&#22914;&#26524; <span class="math notranslate nohighlight">\(\alpha\)</span> &#21644; <span class="math notranslate nohighlight">\(\beta\)</span> &#26159;&#26377;&#38480;&#30340;&#65292;&#36825;&#24847;&#21619;&#30528;&#23427;&#20204;&#20855;&#26377;&#30456;&#21516;&#30340;&#22522;&#25968;&#65292;&#32780;&#36825;&#30456;&#24403;&#20110;&#35828;&#23427;&#20204;&#20043;&#38388;&#23384;&#22312;&#21452;&#23556;&#12290;&#22312;&#21313;&#20061;&#19990;&#32426;&#65292;&#24247;&#25176;&#23572;&#65288;Cantor&#65289;&#25351;&#20986;&#65292;&#21363;&#20351;&#24403; <span class="math notranslate nohighlight">\(\alpha\)</span> &#21644; <span class="math notranslate nohighlight">\(\beta\)</span> &#26080;&#31351;&#26102;&#65292;&#21516;&#26679;&#30340;&#32467;&#26524;&#20063;&#25104;&#31435;&#12290;&#36825;&#20010;&#32467;&#26524;&#26368;&#32456;&#30001;&#25140;&#24503;&#37329;&#65288;Dedekind&#65289;&#12289;&#26045;&#32599;&#24503;&#65288;Schr&#246;der&#65289;&#21644;&#20271;&#24681;&#26031;&#22374;&#65288;Bernstein&#65289;&#21508;&#33258;&#29420;&#31435;&#35777;&#26126;&#12290;</p>
<p>&#25105;&#20204;&#30340;&#24418;&#24335;&#21270;&#23558;&#24341;&#20837;&#19968;&#20123;&#26032;&#26041;&#27861;&#65292;&#25509;&#19979;&#26469;&#30340;&#31456;&#33410;&#20013;&#20250;&#26356;&#35814;&#32454;&#22320;&#35299;&#37322;&#36825;&#20123;&#26041;&#27861;&#12290;&#19981;&#24517;&#25285;&#24515;&#23427;&#20204;&#22312;&#36825;&#37324;&#35762;&#24471;&#22826;&#24555;&#12290;&#25105;&#20204;&#30340;&#30446;&#26631;&#26159;&#21521;&#20320;&#23637;&#31034;&#20320;&#24050;&#32463;&#20855;&#22791;&#20026;&#30495;&#23454;&#25968;&#23398;&#32467;&#26524;&#30340;&#24418;&#24335;&#35777;&#26126;&#20570;&#20986;&#36129;&#29486;&#30340;&#25216;&#33021;&#12290;</p>
<p>&#20026;&#20102;&#29702;&#35299;&#35777;&#26126;&#32972;&#21518;&#30340;&#24605;&#24819;&#65292;&#32771;&#34385;&#26144;&#23556; <span class="math notranslate nohighlight">\(g\)</span> &#22312; <span class="math notranslate nohighlight">\(\alpha\)</span> &#20013;&#30340;&#20687;&#12290;&#22312;&#36825;&#20010;&#20687;&#20013;&#65292; <span class="math notranslate nohighlight">\(g\)</span> &#30340;&#36870;&#26377;&#23450;&#20041;&#65292;&#19988;&#26159;&#21040; <span class="math notranslate nohighlight">\(\beta\)</span> &#30340;&#21452;&#23556;&#12290;</p>
<a class="reference internal image-reference" href="_images/schroeder_bernstein1.png"><img alt="the Schr&#246;der Bernstein theorem" class="align-center" src="_images/schroeder_bernstein1.png" style="height: 150px;" />
</a>
<p>&#38382;&#39064;&#26159;&#21452;&#23556;&#19981;&#21253;&#25324;&#22270;&#20013;&#30340;&#38452;&#24433;&#21306;&#22495;&#65292;&#22914;&#26524; <span class="math notranslate nohighlight">\(g\)</span> &#19981;&#26159;&#28385;&#23556;&#65292;&#21017;&#23427;&#26159;&#38750;&#31354;&#30340;&#12290;&#25110;&#32773;&#65292;&#25105;&#20204;&#21487;&#20197;&#20351;&#29992; <span class="math notranslate nohighlight">\(f\)</span> &#25226;&#25972;&#20010; <span class="math notranslate nohighlight">\(\alpha\)</span> &#26144;&#23556;&#21040; <span class="math notranslate nohighlight">\(\beta\)</span> &#65292;&#20294;&#22312;&#37027;&#31181;&#24773;&#20917;&#19979;&#38382;&#39064;&#26159;&#33509; <span class="math notranslate nohighlight">\(f\)</span> &#19981;&#26159;&#28385;&#23556;&#65292;&#21017;&#23427;&#20250;&#38169;&#36807; <span class="math notranslate nohighlight">\(\beta\)</span> &#30340;&#19968;&#20123;&#20803;&#32032;&#12290;</p>
<a class="reference internal image-reference" href="_images/schroeder_bernstein2.png"><img alt="the Schr&#246;der Bernstein theorem" class="align-center" src="_images/schroeder_bernstein2.png" style="height: 150px;" />
</a>
<p>&#20294;&#29616;&#22312;&#32771;&#34385;&#20174; <span class="math notranslate nohighlight">\(\alpha\)</span> &#21040;&#33258;&#36523;&#30340;&#22797;&#21512;&#26144;&#23556; <span class="math notranslate nohighlight">\(g \circ f\)</span> &#12290;&#30001;&#20110;&#36825;&#20010;&#22797;&#21512;&#26144;&#23556;&#26159;&#21333;&#23556;&#65292;&#23427;&#26500;&#25104;&#20102; <span class="math notranslate nohighlight">\(\alpha\)</span> &#21644;&#23427;&#30340;&#20687;&#30340;&#21452;&#23556;&#65292;&#22312; <span class="math notranslate nohighlight">\(\alpha\)</span> &#20869;&#37096;&#20135;&#29983;&#20102;&#19968;&#20010;&#32553;&#23567;&#30340;&#21103;&#26412;&#12290;</p>
<a class="reference internal image-reference" href="_images/schroeder_bernstein3.png"><img alt="the Schr&#246;der Bernstein theorem" class="align-center" src="_images/schroeder_bernstein3.png" style="height: 150px;" />
</a>
<p>&#36825;&#20010;&#22797;&#21512;&#23558;&#20869;&#37096;&#38452;&#24433;&#29615;&#26144;&#23556;&#21040;&#21478;&#19968;&#20010;&#36825;&#26679;&#30340;&#38598;&#21512;&#65292;&#25105;&#20204;&#21487;&#20197;&#23558;&#20854;&#35270;&#20026;&#26356;&#23567;&#30340;&#21516;&#24515;&#38452;&#24433;&#29615;&#65292;&#20381;&#27492;&#31867;&#25512;&#12290;&#36825;&#20250;&#20135;&#29983;&#19968;&#20010;&#38452;&#24433;&#29615;&#30340;&#21516;&#24515;&#24207;&#21015;&#65292;&#27599;&#20010;&#37117;&#19982;&#19979;&#19968;&#20010;&#26377;&#21452;&#23556;&#23545;&#24212;&#12290;&#22914;&#26524;&#25105;&#20204;&#25226;&#27599;&#20010;&#29615;&#26144;&#23556;&#21040;&#19979;&#19968;&#20010;&#65292;&#24182;&#20445;&#30041; <span class="math notranslate nohighlight">\(\alpha\)</span> &#30340;&#26080;&#38452;&#24433;&#37096;&#20998;&#65292;&#21017;&#25105;&#20204;&#26377; <span class="math notranslate nohighlight">\(\alpha\)</span> &#21644; <span class="math notranslate nohighlight">\(g\)</span> &#30340;&#20687;&#20043;&#38388;&#30340;&#21452;&#23556;&#12290;&#21644; <span class="math notranslate nohighlight">\(g^{-1}\)</span> &#22797;&#21512;&#65292;&#36825;&#20135;&#29983;&#20102;&#25152;&#38656;&#30340; <span class="math notranslate nohighlight">\(\alpha\)</span> &#21644; <span class="math notranslate nohighlight">\(\beta\)</span> &#30340;&#21452;&#23556;&#12290;</p>
<p>&#25105;&#20204;&#21487;&#20197;&#26356;&#31616;&#21333;&#22320;&#25551;&#36848;&#36825;&#20010;&#21452;&#23556;&#12290;&#20196; <span class="math notranslate nohighlight">\(A\)</span> &#20026;&#36825;&#21015;&#38452;&#24433;&#21306;&#22495;&#30340;&#24182;&#65292;&#22914;&#19979;&#23450;&#20041; <span class="math notranslate nohighlight">\(h : \alpha \to \beta\)</span>:</p>
<div class="math notranslate nohighlight">
\[\begin{split}h(x) = \begin{cases}
  f(x) &amp; \text{if $x \in A$} \\
  g^{-1}(x) &amp; \text{otherwise.}
\end{cases}\end{split}\]</div>
<p>&#25442;&#21477;&#35805;&#35828;&#65292;&#25105;&#20204;&#22312;&#38452;&#24433;&#37096;&#20998;&#20351;&#29992; <span class="math notranslate nohighlight">\(f\)</span> &#65292;&#32780;&#22312;&#20854;&#20313;&#37096;&#20998;&#20351;&#29992; <span class="math notranslate nohighlight">\(g\)</span> &#30340;&#36870;&#12290;&#29983;&#25104;&#30340;&#26144;&#23556; <span class="math notranslate nohighlight">\(h\)</span> &#26159;&#21333;&#23556;&#65292;&#22240;&#20026;&#27599;&#20010;&#20998;&#25903;&#37117;&#26159;&#21333;&#23556;&#24182;&#19988;&#20004;&#20010;&#20998;&#25903;&#30340;&#20687;&#26159;&#19981;&#30456;&#20132;&#30340;&#12290;&#20026;&#20102;&#30475;&#20986;&#23427;&#26159;&#28385;&#23556;&#65292;&#20551;&#35774;&#32473;&#23450;&#20102; <span class="math notranslate nohighlight">\(\beta\)</span> &#20013;&#30340;&#20803;&#32032; <span class="math notranslate nohighlight">\(y\)</span> &#65292;&#32771;&#34385; <span class="math notranslate nohighlight">\(g(y)\)</span> &#12290;&#33509; <span class="math notranslate nohighlight">\(g(y)\)</span> &#20301;&#20110;&#38452;&#24433;&#21306;&#22495;&#20043;&#19968;&#65292;&#23427;&#19981;&#33021;&#22312;&#31532;&#19968;&#20010;&#29615;&#20013;&#65292;&#22240;&#27492;&#25105;&#20204;&#26377; <span class="math notranslate nohighlight">\(g(y) = g(f(x))\)</span> &#65292;&#20854;&#20013; <span class="math notranslate nohighlight">\(x\)</span> &#22312;&#19978;&#19968;&#20010;&#29615;&#20013;&#12290;&#30001; <span class="math notranslate nohighlight">\(g\)</span> &#30340;&#21333;&#23556;&#24615;&#65292;&#25105;&#20204;&#26377; <span class="math notranslate nohighlight">\(h(x) = f(x) = y\)</span> &#12290;&#33509; <span class="math notranslate nohighlight">\(g(y)\)</span> &#19981;&#22312;&#38452;&#24433;&#21306;&#22495;&#20013;&#65292;&#37027;&#20040;&#30001; <span class="math notranslate nohighlight">\(h\)</span> &#30340;&#23450;&#20041;&#65292;&#25105;&#20204;&#26377; <span class="math notranslate nohighlight">\(h(g(y))= y\)</span> &#12290;&#19981;&#35770;&#21738;&#31181;&#24773;&#20917;&#65292; <span class="math notranslate nohighlight">\(y\)</span> &#37117;&#22312; <span class="math notranslate nohighlight">\(h\)</span> &#30340;&#20687;&#20013;&#12290;</p>
<p>&#36825;&#20010;&#35770;&#35777;&#21548;&#36215;&#26469;&#24212;&#35813;&#26377;&#36947;&#29702;&#65292;&#20294;&#32454;&#33410;&#21364;&#24456;&#24494;&#22937;&#12290;&#24418;&#24335;&#21270;&#35777;&#26126;&#19981;&#20165;&#21487;&#20197;&#25552;&#39640;&#25105;&#20204;&#23545;&#32467;&#26524;&#30340;&#20449;&#24515;&#65292;&#36824;&#21487;&#20197;&#24110;&#21161;&#25105;&#20204;&#26356;&#22909;&#22320;&#29702;&#35299;&#23427;&#12290;&#22240;&#20026;&#35777;&#26126;&#20351;&#29992;&#32463;&#20856;&#36923;&#36753;&#65292;&#25152;&#20197;&#25105;&#20204;&#21578;&#35785; Lean&#65292;&#25105;&#20204;&#30340;&#23450;&#20041;&#36890;&#24120;&#26159;&#19981;&#21487;&#35745;&#31639;&#30340;&#12290;</p>
<div class="highlight-lean notranslate"><div class="highlight"><pre><span></span><span class="kd">noncomputable</span><span class="w"> </span><span class="kn">section</span>
<span class="kn">open</span><span class="w"> </span><span class="n">Classical</span>
<span class="kd">variable</span><span class="w"> </span><span class="o">{</span><span class="n">&#945;</span><span class="w"> </span><span class="n">&#946;</span><span class="w"> </span><span class="o">:</span><span class="w"> </span><span class="kt">Type</span><span class="bp">*</span><span class="o">}</span><span class="w"> </span><span class="o">[</span><span class="n">Nonempty</span><span class="w"> </span><span class="n">&#946;</span><span class="o">]</span>
</pre></div>
</div>
<p>&#35760;&#21495; <code class="docutils literal notranslate"><span class="pre">[Nonempty</span> <span class="pre">&#946;]</span></code> &#35268;&#23450; <code class="docutils literal notranslate"><span class="pre">&#946;</span></code> &#38750;&#31354;&#12290;&#25105;&#20204;&#20351;&#29992;&#23427;&#26159;&#22240;&#20026;&#25105;&#20204;&#23558;&#29992;&#20110;&#26500;&#36896; <span class="math notranslate nohighlight">\(g^{-1}\)</span> &#30340; Mathlib &#21407;&#35821;&#35201;&#27714;&#23427;&#12290;&#23450;&#29702;&#22312; <span class="math notranslate nohighlight">\(\beta\)</span> &#20026;&#31354;&#30340;&#24773;&#24418;&#26159;&#24179;&#20961;&#30340;&#65292;&#34429;&#28982;&#25226;&#24418;&#24335;&#21270;&#25512;&#24191;&#21040;&#35206;&#30422;&#36825;&#31181;&#24773;&#20917;&#24182;&#19981;&#38590;&#65292;&#25105;&#20204;&#19981;&#36825;&#20040;&#20570;&#12290;&#29305;&#21035;&#22320;&#65292;&#25105;&#20204;&#38656;&#35201;&#20551;&#35774; <code class="docutils literal notranslate"><span class="pre">[Nonempty</span> <span class="pre">&#946;]</span></code> &#20197;&#20351;&#29992; Mathlib &#20013;&#23450;&#20041;&#30340;&#36816;&#31639; <code class="docutils literal notranslate"><span class="pre">invFun</span></code> &#12290;&#23545;&#20110;&#32473;&#23450;&#30340; <code class="docutils literal notranslate"><span class="pre">x</span> <span class="pre">:</span> <span class="pre">&#945;</span></code>,  &#22914;&#26524;&#26377;&#30340;&#35805;&#65292;<code class="docutils literal notranslate"><span class="pre">invFun</span> <span class="pre">g</span> <span class="pre">x</span></code> &#36873;&#25321; <code class="docutils literal notranslate"><span class="pre">x</span></code> &#22312; <code class="docutils literal notranslate"><span class="pre">&#946;</span></code> &#20013;&#30340;&#19968;&#20010;&#21407;&#20687;&#65292;&#21542;&#21017;&#23601;&#36820;&#22238; <code class="docutils literal notranslate"><span class="pre">&#946;</span></code> &#20013;&#30340;&#20219;&#24847;&#20803;&#32032;&#12290;&#33509; <code class="docutils literal notranslate"><span class="pre">g</span></code> &#26159;&#21333;&#23556;&#65292;&#21017; <code class="docutils literal notranslate"><span class="pre">invFun</span> <span class="pre">g</span></code> &#19968;&#23450;&#26159;&#24038;&#36870;&#65292;&#33509; <code class="docutils literal notranslate"><span class="pre">g</span></code> &#26159;&#28385;&#23556;&#65292;&#21017;&#23427;&#26159;&#21491;&#36870;&#12290;</p>
<div class="highlight-lean notranslate"><div class="highlight"><pre><span></span><span class="k">#check</span><span class="w"> </span><span class="o">(</span><span class="n">invFun</span><span class="w"> </span><span class="n">g</span><span class="w"> </span><span class="o">:</span><span class="w"> </span><span class="n">&#945;</span><span class="w"> </span><span class="bp">&#8594;</span><span class="w"> </span><span class="n">&#946;</span><span class="o">)</span>
<span class="k">#check</span><span class="w"> </span><span class="o">(</span><span class="n">leftInverse_invFun</span><span class="w"> </span><span class="o">:</span><span class="w"> </span><span class="n">Injective</span><span class="w"> </span><span class="n">g</span><span class="w"> </span><span class="bp">&#8594;</span><span class="w"> </span><span class="n">LeftInverse</span><span class="w"> </span><span class="o">(</span><span class="n">invFun</span><span class="w"> </span><span class="n">g</span><span class="o">)</span><span class="w"> </span><span class="n">g</span><span class="o">)</span>
<span class="k">#check</span><span class="w"> </span><span class="o">(</span><span class="n">leftInverse_invFun</span><span class="w"> </span><span class="o">:</span><span class="w"> </span><span class="n">Injective</span><span class="w"> </span><span class="n">g</span><span class="w"> </span><span class="bp">&#8594;</span><span class="w"> </span><span class="bp">&#8704;</span><span class="w"> </span><span class="n">y</span><span class="o">,</span><span class="w"> </span><span class="n">invFun</span><span class="w"> </span><span class="n">g</span><span class="w"> </span><span class="o">(</span><span class="n">g</span><span class="w"> </span><span class="n">y</span><span class="o">)</span><span class="w"> </span><span class="bp">=</span><span class="w"> </span><span class="n">y</span><span class="o">)</span>
<span class="k">#check</span><span class="w"> </span><span class="o">(</span><span class="n">invFun_eq</span><span class="w"> </span><span class="o">:</span><span class="w"> </span><span class="o">(</span><span class="bp">&#8707;</span><span class="w"> </span><span class="n">y</span><span class="o">,</span><span class="w"> </span><span class="n">g</span><span class="w"> </span><span class="n">y</span><span class="w"> </span><span class="bp">=</span><span class="w"> </span><span class="n">x</span><span class="o">)</span><span class="w"> </span><span class="bp">&#8594;</span><span class="w"> </span><span class="n">g</span><span class="w"> </span><span class="o">(</span><span class="n">invFun</span><span class="w"> </span><span class="n">g</span><span class="w"> </span><span class="n">x</span><span class="o">)</span><span class="w"> </span><span class="bp">=</span><span class="w"> </span><span class="n">x</span><span class="o">)</span>
</pre></div>
</div>
<p>&#25105;&#20204;&#23450;&#20041;&#23545;&#24212;&#20110;&#38452;&#24433;&#21306;&#22495;&#30340;&#24182;&#30340;&#38598;&#21512;&#22914;&#19979;&#12290;</p>
<div class="highlight-lean notranslate"><div class="highlight"><pre><span></span><span class="kd">variable</span><span class="w"> </span><span class="o">(</span><span class="n">f</span><span class="w"> </span><span class="o">:</span><span class="w"> </span><span class="n">&#945;</span><span class="w"> </span><span class="bp">&#8594;</span><span class="w"> </span><span class="n">&#946;</span><span class="o">)</span><span class="w"> </span><span class="o">(</span><span class="n">g</span><span class="w"> </span><span class="o">:</span><span class="w"> </span><span class="n">&#946;</span><span class="w"> </span><span class="bp">&#8594;</span><span class="w"> </span><span class="n">&#945;</span><span class="o">)</span>

<span class="kd">def</span><span class="w"> </span><span class="n">sbAux</span><span class="w"> </span><span class="o">:</span><span class="w"> </span><span class="n">&#8469;</span><span class="w"> </span><span class="bp">&#8594;</span><span class="w"> </span><span class="n">Set</span><span class="w"> </span><span class="n">&#945;</span>
<span class="w">  </span><span class="bp">|</span><span class="w"> </span><span class="mi">0</span><span class="w"> </span><span class="bp">=&gt;</span><span class="w"> </span><span class="n">univ</span><span class="w"> </span><span class="bp">\</span><span class="w"> </span><span class="n">g</span><span class="w"> </span><span class="bp">&#39;&#39;</span><span class="w"> </span><span class="n">univ</span>
<span class="w">  </span><span class="bp">|</span><span class="w"> </span><span class="n">n</span><span class="w"> </span><span class="bp">+</span><span class="w"> </span><span class="mi">1</span><span class="w"> </span><span class="bp">=&gt;</span><span class="w"> </span><span class="n">g</span><span class="w"> </span><span class="bp">&#39;&#39;</span><span class="w"> </span><span class="o">(</span><span class="n">f</span><span class="w"> </span><span class="bp">&#39;&#39;</span><span class="w"> </span><span class="n">sbAux</span><span class="w"> </span><span class="n">n</span><span class="o">)</span>

<span class="kd">def</span><span class="w"> </span><span class="n">sbSet</span><span class="w"> </span><span class="o">:=</span>
<span class="w">  </span><span class="bp">&#8899;</span><span class="w"> </span><span class="n">n</span><span class="o">,</span><span class="w"> </span><span class="n">sbAux</span><span class="w"> </span><span class="n">f</span><span class="w"> </span><span class="n">g</span><span class="w"> </span><span class="n">n</span>
</pre></div>
</div>
<p>&#23450;&#20041; <code class="docutils literal notranslate"><span class="pre">sbAux</span></code> &#26159; <strong>&#36882;&#24402;&#23450;&#20041;</strong> &#30340;&#19968;&#20010;&#20363;&#23376;&#65292;&#25105;&#20204;&#23558;&#22312;&#19979;&#19968;&#31456;&#35299;&#37322;&#12290;&#23427;&#23450;&#20041;&#20102;&#19968;&#21015;&#38598;&#21512;</p>
<div class="math notranslate nohighlight">
\[\begin{split}S_0 &amp;= \alpha &#8726; g(\beta) \\
S_{n+1} &amp;= g(f(S_n)).\end{split}\]</div>
<p>&#23450;&#20041; <code class="docutils literal notranslate"><span class="pre">sbSet</span></code> &#23545;&#24212;&#20110;&#25105;&#20204;&#30340;&#35777;&#26126;&#27010;&#35201;&#20013;&#30340;&#38598;&#21512; <span class="math notranslate nohighlight">\(A = \bigcup_{n \in \mathbb{N}} S_n\)</span> &#12290;&#19978;&#38754;&#25551;&#36848;&#30340;&#20989;&#25968; <span class="math notranslate nohighlight">\(h\)</span> &#29616;&#22312;&#23450;&#20041;&#22914;&#19979;&#65306;</p>
<div class="highlight-lean notranslate"><div class="highlight"><pre><span></span><span class="kd">def</span><span class="w"> </span><span class="n">sbFun</span><span class="w"> </span><span class="o">(</span><span class="n">x</span><span class="w"> </span><span class="o">:</span><span class="w"> </span><span class="n">&#945;</span><span class="o">)</span><span class="w"> </span><span class="o">:</span><span class="w"> </span><span class="n">&#946;</span><span class="w"> </span><span class="o">:=</span>
<span class="w">  </span><span class="k">if</span><span class="w"> </span><span class="n">x</span><span class="w"> </span><span class="bp">&#8712;</span><span class="w"> </span><span class="n">sbSet</span><span class="w"> </span><span class="n">f</span><span class="w"> </span><span class="n">g</span><span class="w"> </span><span class="k">then</span><span class="w"> </span><span class="n">f</span><span class="w"> </span><span class="n">x</span><span class="w"> </span><span class="k">else</span><span class="w"> </span><span class="n">invFun</span><span class="w"> </span><span class="n">g</span><span class="w"> </span><span class="n">x</span>
</pre></div>
</div>
<p>&#25105;&#20204;&#23558;&#38656;&#35201;&#36825;&#26679;&#30340;&#20107;&#23454;&#65306;&#25105;&#20204;&#23450;&#20041;&#30340; <span class="math notranslate nohighlight">\(g^{-1}\)</span> &#26159; <span class="math notranslate nohighlight">\(A\)</span> &#30340;&#34917;&#38598;&#19978;&#30340;&#21491;&#36870;&#65292;&#20063;&#23601;&#26159;&#35828;&#65292;&#26159; <span class="math notranslate nohighlight">\(\alpha\)</span> &#20013;&#26080;&#38452;&#24433;&#21306;&#22495;&#19978;&#30340;&#21491;&#36870;&#12290;&#36825;&#26159;&#22240;&#20026;&#26368;&#22806;&#23618;&#30340;&#29615; <span class="math notranslate nohighlight">\(S_0\)</span> &#31561;&#20110; <span class="math notranslate nohighlight">\(\alpha \setminus g(\beta)\)</span> &#65292;&#22240;&#27492; <span class="math notranslate nohighlight">\(A\)</span> &#30340;&#34917;&#38598;&#21253;&#21547;&#20110; <span class="math notranslate nohighlight">\(g(\beta)\)</span> &#20013;&#12290;&#25152;&#20197;&#65292;&#23545; <span class="math notranslate nohighlight">\(A\)</span> &#30340;&#34917;&#38598;&#20013;&#30340;&#27599;&#20010; <span class="math notranslate nohighlight">\(x\)</span> &#65292;&#23384;&#22312; <span class="math notranslate nohighlight">\(y\)</span> &#20351;&#24471; <span class="math notranslate nohighlight">\(g(y) = x\)</span> &#12290;&#65288;&#30001; <span class="math notranslate nohighlight">\(g\)</span> &#30340;&#21333;&#23556;&#24615;&#65292;&#36825;&#20010; <span class="math notranslate nohighlight">\(y\)</span> &#26159;&#21807;&#19968;&#30340;&#65292;&#20294;&#19979;&#19968;&#20010;&#23450;&#29702;&#21482;&#35828;&#20102; <code class="docutils literal notranslate"><span class="pre">invFun</span> <span class="pre">g</span> <span class="pre">x</span></code> &#36820;&#22238; <code class="docutils literal notranslate"><span class="pre">y</span></code> &#20351;&#24471; <code class="docutils literal notranslate"><span class="pre">g</span> <span class="pre">y</span> <span class="pre">=</span> <span class="pre">x</span></code>.&#65289;</p>
<p>&#36880;&#27493;&#23436;&#25104;&#19979;&#38754;&#30340;&#35777;&#26126;&#65292;&#30830;&#20445;&#20320;&#29702;&#35299;&#21457;&#29983;&#20102;&#20160;&#20040;&#65292;&#24182;&#22635;&#20889;&#21097;&#20313;&#37096;&#20998;&#12290;&#20320;&#38656;&#35201;&#22312;&#26368;&#21518;&#20351;&#29992; <code class="docutils literal notranslate"><span class="pre">invFun_eq</span></code> &#12290;&#35831;&#27880;&#24847;&#65292;&#27492;&#22788;&#29992; <code class="docutils literal notranslate"><span class="pre">sbAux</span></code> &#37325;&#20889;&#26367;&#25442;&#20102; <code class="docutils literal notranslate"><span class="pre">sbAux</span> <span class="pre">f</span> <span class="pre">g</span> <span class="pre">0</span></code> &#19982;&#30456;&#24212;&#23450;&#20041;&#26041;&#31243;&#30340;&#21491;&#20391;&#12290;</p>
<div class="highlight-lean notranslate"><div class="highlight"><pre><span></span><span class="kd">theorem</span><span class="w"> </span><span class="n">sb_right_inv</span><span class="w"> </span><span class="o">{</span><span class="n">x</span><span class="w"> </span><span class="o">:</span><span class="w"> </span><span class="n">&#945;</span><span class="o">}</span><span class="w"> </span><span class="o">(</span><span class="n">hx</span><span class="w"> </span><span class="o">:</span><span class="w"> </span><span class="n">x</span><span class="w"> </span><span class="bp">&#8713;</span><span class="w"> </span><span class="n">sbSet</span><span class="w"> </span><span class="n">f</span><span class="w"> </span><span class="n">g</span><span class="o">)</span><span class="w"> </span><span class="o">:</span><span class="w"> </span><span class="n">g</span><span class="w"> </span><span class="o">(</span><span class="n">invFun</span><span class="w"> </span><span class="n">g</span><span class="w"> </span><span class="n">x</span><span class="o">)</span><span class="w"> </span><span class="bp">=</span><span class="w"> </span><span class="n">x</span><span class="w"> </span><span class="o">:=</span><span class="w"> </span><span class="kd">by</span>
<span class="w">  </span><span class="k">have</span><span class="w"> </span><span class="o">:</span><span class="w"> </span><span class="n">x</span><span class="w"> </span><span class="bp">&#8712;</span><span class="w"> </span><span class="n">g</span><span class="w"> </span><span class="bp">&#39;&#39;</span><span class="w"> </span><span class="n">univ</span><span class="w"> </span><span class="o">:=</span><span class="w"> </span><span class="kd">by</span>
<span class="w">    </span><span class="n">contrapose</span><span class="bp">!</span><span class="w"> </span><span class="n">hx</span>
<span class="w">    </span><span class="n">rw</span><span class="w"> </span><span class="o">[</span><span class="n">sbSet</span><span class="o">,</span><span class="w"> </span><span class="n">mem_iUnion</span><span class="o">]</span>
<span class="w">    </span><span class="n">use</span><span class="w"> </span><span class="mi">0</span>
<span class="w">    </span><span class="n">rw</span><span class="w"> </span><span class="o">[</span><span class="n">sbAux</span><span class="o">,</span><span class="w"> </span><span class="n">mem_diff</span><span class="o">]</span>
<span class="w">    </span><span class="gr">sorry</span>
<span class="w">  </span><span class="k">have</span><span class="w"> </span><span class="o">:</span><span class="w"> </span><span class="bp">&#8707;</span><span class="w"> </span><span class="n">y</span><span class="o">,</span><span class="w"> </span><span class="n">g</span><span class="w"> </span><span class="n">y</span><span class="w"> </span><span class="bp">=</span><span class="w"> </span><span class="n">x</span><span class="w"> </span><span class="o">:=</span><span class="w"> </span><span class="kd">by</span>
<span class="w">    </span><span class="gr">sorry</span>
<span class="w">  </span><span class="gr">sorry</span>
</pre></div>
</div>
<p>&#25105;&#20204;&#29616;&#22312;&#36716;&#21521;&#35777;&#26126; <span class="math notranslate nohighlight">\(h\)</span> &#26159;&#21333;&#23556;&#12290;&#38750;&#27491;&#24335;&#22320;&#35777;&#26126;&#36807;&#31243;&#22914;&#19979;&#12290;&#39318;&#20808;&#65292;&#20551;&#35774; <span class="math notranslate nohighlight">\(h(x_1) = h(x_2)\)</span> &#12290;&#33509; <span class="math notranslate nohighlight">\(x_1\)</span> &#22312; <span class="math notranslate nohighlight">\(A\)</span> &#20013;&#65292;&#21017; <span class="math notranslate nohighlight">\(h(x_1) = f(x_1)\)</span> &#65292;&#19988;&#25105;&#20204;&#21487;&#20197;&#35777;&#26126; <span class="math notranslate nohighlight">\(x_2\)</span> &#22312; <span class="math notranslate nohighlight">\(A\)</span> &#20013;&#22914;&#19979;&#12290;&#33509;&#38750;&#22914;&#27492;&#65292;&#21017;&#25105;&#20204;&#26377; <span class="math notranslate nohighlight">\(h(x_2) = g^{-1}(x_2)\)</span> &#12290;&#30001; <span class="math notranslate nohighlight">\(f(x_1) = h(x_1) = h(x_2)\)</span> &#25105;&#20204;&#26377; <span class="math notranslate nohighlight">\(g(f(x_1)) = x_2\)</span> &#12290;&#30001; <span class="math notranslate nohighlight">\(A\)</span> &#30340;&#23450;&#20041;&#65292;&#26082;&#28982; <span class="math notranslate nohighlight">\(x_1\)</span> &#22312; <span class="math notranslate nohighlight">\(A\)</span> &#20013;&#65292; <span class="math notranslate nohighlight">\(x_2\)</span> &#21516;&#26679;&#22312; <span class="math notranslate nohighlight">\(A\)</span> &#20013;&#65292;&#30683;&#30462;&#12290;&#22240;&#27492;&#65292;&#33509; <span class="math notranslate nohighlight">\(x_1\)</span> &#22312; <span class="math notranslate nohighlight">\(A\)</span> &#20013;&#65292;&#21017; <span class="math notranslate nohighlight">\(x_2\)</span> &#20063;&#22312;&#65292;&#36825;&#31181;&#24773;&#20917;&#19979;&#25105;&#20204;&#26377; <span class="math notranslate nohighlight">\(f(x_1) = h(x_1) = h(x_2) = f(x_2)\)</span> &#12290; <span class="math notranslate nohighlight">\(f\)</span> &#30340;&#21333;&#23556;&#24615;&#25512;&#20986; <span class="math notranslate nohighlight">\(x_1 = x_2\)</span> &#12290;&#23545;&#31216;&#35770;&#35777;&#34920;&#26126;&#33509; <span class="math notranslate nohighlight">\(x_2\)</span> &#22312; <span class="math notranslate nohighlight">\(A\)</span> &#20013;&#65292;&#21017; <span class="math notranslate nohighlight">\(x_1\)</span> &#20063;&#22312;&#65292;&#36825;&#21448;&#19968;&#27425;&#34164;&#21547;&#30528; <span class="math notranslate nohighlight">\(x_1 = x_2\)</span> &#12290;</p>
<p>&#21097;&#19979;&#30340;&#21807;&#19968;&#21487;&#33021;&#24615;&#26159; <span class="math notranslate nohighlight">\(x_1\)</span> &#21644; <span class="math notranslate nohighlight">\(x_2\)</span> &#37117;&#19981;&#22312; <span class="math notranslate nohighlight">\(A\)</span> &#20013;&#12290;&#36825;&#31181;&#24773;&#20917;&#19979;&#65292;&#25105;&#20204;&#26377; <span class="math notranslate nohighlight">\(g^{-1}(x_1) = h(x_1) = h(x_2) = g^{-1}(x_2)\)</span> &#12290;&#20004;&#36793;&#20351;&#29992; <span class="math notranslate nohighlight">\(g\)</span> &#23601;&#24471;&#21040; <span class="math notranslate nohighlight">\(x_1 = x_2\)</span> &#12290;</p>
<p>&#25105;&#20204;&#20877;&#27425;&#40723;&#21169;&#20320;&#36880;&#27493;&#23436;&#25104;&#20197;&#19979;&#35777;&#26126;&#65292;&#35266;&#23519;&#36825;&#20010;&#35770;&#35777;&#22312; Lean &#20013;&#26159;&#22914;&#20309;&#23637;&#24320;&#30340;&#12290;&#30475;&#30475;&#20320;&#26159;&#21542;&#21487;&#20197;&#20351;&#29992; <code class="docutils literal notranslate"><span class="pre">sb_right_inv</span></code> &#32467;&#26463;&#35777;&#26126;&#12290;</p>
<div class="highlight-lean notranslate"><div class="highlight"><pre><span></span><span class="kd">theorem</span><span class="w"> </span><span class="n">sb_injective</span><span class="w"> </span><span class="o">(</span><span class="n">hf</span><span class="w"> </span><span class="o">:</span><span class="w"> </span><span class="n">Injective</span><span class="w"> </span><span class="n">f</span><span class="o">)</span><span class="w"> </span><span class="o">:</span><span class="w"> </span><span class="n">Injective</span><span class="w"> </span><span class="o">(</span><span class="n">sbFun</span><span class="w"> </span><span class="n">f</span><span class="w"> </span><span class="n">g</span><span class="o">)</span><span class="w"> </span><span class="o">:=</span><span class="w"> </span><span class="kd">by</span>
<span class="w">  </span><span class="n">set</span><span class="w"> </span><span class="n">A</span><span class="w"> </span><span class="o">:=</span><span class="w"> </span><span class="n">sbSet</span><span class="w"> </span><span class="n">f</span><span class="w"> </span><span class="n">g</span><span class="w"> </span><span class="k">with</span><span class="w"> </span><span class="n">A_def</span>
<span class="w">  </span><span class="n">set</span><span class="w"> </span><span class="n">h</span><span class="w"> </span><span class="o">:=</span><span class="w"> </span><span class="n">sbFun</span><span class="w"> </span><span class="n">f</span><span class="w"> </span><span class="n">g</span><span class="w"> </span><span class="k">with</span><span class="w"> </span><span class="n">h_def</span>
<span class="w">  </span><span class="n">intro</span><span class="w"> </span><span class="n">x&#8321;</span><span class="w"> </span><span class="n">x&#8322;</span>
<span class="w">  </span><span class="n">intro</span><span class="w"> </span><span class="o">(</span><span class="n">hxeq</span><span class="w"> </span><span class="o">:</span><span class="w"> </span><span class="n">h</span><span class="w"> </span><span class="n">x&#8321;</span><span class="w"> </span><span class="bp">=</span><span class="w"> </span><span class="n">h</span><span class="w"> </span><span class="n">x&#8322;</span><span class="o">)</span>
<span class="w">  </span><span class="k">show</span><span class="w"> </span><span class="n">x&#8321;</span><span class="w"> </span><span class="bp">=</span><span class="w"> </span><span class="n">x&#8322;</span>
<span class="w">  </span><span class="n">simp</span><span class="w"> </span><span class="n">only</span><span class="w"> </span><span class="o">[</span><span class="n">h_def</span><span class="o">,</span><span class="w"> </span><span class="n">sbFun</span><span class="o">,</span><span class="w"> </span><span class="bp">&#8592;</span><span class="w"> </span><span class="n">A_def</span><span class="o">]</span><span class="w"> </span><span class="n">at</span><span class="w"> </span><span class="n">hxeq</span>
<span class="w">  </span><span class="n">by_cases</span><span class="w"> </span><span class="n">xA</span><span class="w"> </span><span class="o">:</span><span class="w"> </span><span class="n">x&#8321;</span><span class="w"> </span><span class="bp">&#8712;</span><span class="w"> </span><span class="n">A</span><span class="w"> </span><span class="bp">&#8744;</span><span class="w"> </span><span class="n">x&#8322;</span><span class="w"> </span><span class="bp">&#8712;</span><span class="w"> </span><span class="n">A</span>
<span class="w">  </span><span class="bp">&#183;</span><span class="w"> </span><span class="n">wlog</span><span class="w"> </span><span class="n">x&#8321;A</span><span class="w"> </span><span class="o">:</span><span class="w"> </span><span class="n">x&#8321;</span><span class="w"> </span><span class="bp">&#8712;</span><span class="w"> </span><span class="n">A</span><span class="w"> </span><span class="n">generalizing</span><span class="w"> </span><span class="n">x&#8321;</span><span class="w"> </span><span class="n">x&#8322;</span><span class="w"> </span><span class="n">hxeq</span><span class="w"> </span><span class="n">xA</span>
<span class="w">    </span><span class="bp">&#183;</span><span class="w"> </span><span class="n">symm</span>
<span class="w">      </span><span class="n">apply</span><span class="w"> </span><span class="n">this</span><span class="w"> </span><span class="n">hxeq.symm</span><span class="w"> </span><span class="n">xA.symm</span><span class="w"> </span><span class="o">(</span><span class="n">xA.resolve_left</span><span class="w"> </span><span class="n">x&#8321;A</span><span class="o">)</span>
<span class="w">    </span><span class="k">have</span><span class="w"> </span><span class="n">x&#8322;A</span><span class="w"> </span><span class="o">:</span><span class="w"> </span><span class="n">x&#8322;</span><span class="w"> </span><span class="bp">&#8712;</span><span class="w"> </span><span class="n">A</span><span class="w"> </span><span class="o">:=</span><span class="w"> </span><span class="kd">by</span>
<span class="w">      </span><span class="n">apply</span><span class="w"> </span><span class="n">_root_.not_imp_self.mp</span>
<span class="w">      </span><span class="n">intro</span><span class="w"> </span><span class="o">(</span><span class="n">x&#8322;nA</span><span class="w"> </span><span class="o">:</span><span class="w"> </span><span class="n">x&#8322;</span><span class="w"> </span><span class="bp">&#8713;</span><span class="w"> </span><span class="n">A</span><span class="o">)</span>
<span class="w">      </span><span class="n">rw</span><span class="w"> </span><span class="o">[</span><span class="n">if_pos</span><span class="w"> </span><span class="n">x&#8321;A</span><span class="o">,</span><span class="w"> </span><span class="n">if_neg</span><span class="w"> </span><span class="n">x&#8322;nA</span><span class="o">]</span><span class="w"> </span><span class="n">at</span><span class="w"> </span><span class="n">hxeq</span>
<span class="w">      </span><span class="n">rw</span><span class="w"> </span><span class="o">[</span><span class="n">A_def</span><span class="o">,</span><span class="w"> </span><span class="n">sbSet</span><span class="o">,</span><span class="w"> </span><span class="n">mem_iUnion</span><span class="o">]</span><span class="w"> </span><span class="n">at</span><span class="w"> </span><span class="n">x&#8321;A</span>
<span class="w">      </span><span class="k">have</span><span class="w"> </span><span class="n">x&#8322;eq</span><span class="w"> </span><span class="o">:</span><span class="w"> </span><span class="n">x&#8322;</span><span class="w"> </span><span class="bp">=</span><span class="w"> </span><span class="n">g</span><span class="w"> </span><span class="o">(</span><span class="n">f</span><span class="w"> </span><span class="n">x&#8321;</span><span class="o">)</span><span class="w"> </span><span class="o">:=</span><span class="w"> </span><span class="kd">by</span>
<span class="w">        </span><span class="gr">sorry</span>
<span class="w">      </span><span class="n">rcases</span><span class="w"> </span><span class="n">x&#8321;A</span><span class="w"> </span><span class="k">with</span><span class="w"> </span><span class="o">&#10216;</span><span class="n">n</span><span class="o">,</span><span class="w"> </span><span class="n">hn</span><span class="o">&#10217;</span>
<span class="w">      </span><span class="n">rw</span><span class="w"> </span><span class="o">[</span><span class="n">A_def</span><span class="o">,</span><span class="w"> </span><span class="n">sbSet</span><span class="o">,</span><span class="w"> </span><span class="n">mem_iUnion</span><span class="o">]</span>
<span class="w">      </span><span class="n">use</span><span class="w"> </span><span class="n">n</span><span class="w"> </span><span class="bp">+</span><span class="w"> </span><span class="mi">1</span>
<span class="w">      </span><span class="n">simp</span><span class="w"> </span><span class="o">[</span><span class="n">sbAux</span><span class="o">]</span>
<span class="w">      </span><span class="n">exact</span><span class="w"> </span><span class="o">&#10216;</span><span class="n">x&#8321;</span><span class="o">,</span><span class="w"> </span><span class="n">hn</span><span class="o">,</span><span class="w"> </span><span class="n">x&#8322;eq.symm</span><span class="o">&#10217;</span>
<span class="w">    </span><span class="gr">sorry</span>
<span class="w">  </span><span class="n">push_neg</span><span class="w">  </span><span class="n">at</span><span class="w"> </span><span class="n">xA</span>
<span class="w">  </span><span class="gr">sorry</span>
</pre></div>
</div>
<p>&#36825;&#20010;&#35777;&#26126;&#24341;&#20837;&#20102;&#19968;&#20123;&#26032;&#31574;&#30053;&#12290;&#39318;&#20808;&#65292;&#35831;&#27880;&#24847; <code class="docutils literal notranslate"><span class="pre">set</span></code> &#31574;&#30053;&#65292;&#23427;&#24341;&#20837;&#20102;&#32553;&#20889; <code class="docutils literal notranslate"><span class="pre">A</span></code> &#21644; <code class="docutils literal notranslate"><span class="pre">h</span></code> &#20998;&#21035;&#20195;&#34920; <code class="docutils literal notranslate"><span class="pre">sbSet</span> <span class="pre">f</span> <span class="pre">g</span></code> &#21644; <code class="docutils literal notranslate"><span class="pre">sb_fun</span> <span class="pre">f</span> <span class="pre">g</span></code> &#12290;&#25105;&#20204;&#25226;&#23545;&#24212;&#30340;&#23450;&#20041;&#24335;&#21629;&#21517;&#20026; <code class="docutils literal notranslate"><span class="pre">A_def</span></code> &#21644; <code class="docutils literal notranslate"><span class="pre">h_def</span></code> &#12290;&#36825;&#20123;&#32553;&#20889;&#26159;&#23450;&#20041;&#24615;&#30340;&#65292;&#20063;&#23601;&#26159;&#35828;&#65292;&#24403;&#38656;&#35201;&#26102;&#65292;Lean&#26377;&#26102;&#20250;&#33258;&#21160;&#23637;&#24320;&#23427;&#20204;&#12290;&#20294;&#24182;&#19981;&#24635;&#26159;&#22914;&#27492;&#65307;&#20363;&#22914;&#65292;&#24403;&#20351;&#29992; <code class="docutils literal notranslate"><span class="pre">rw</span></code> &#26102;&#65292;&#25105;&#20204;&#36890;&#24120;&#38656;&#35201;&#31934;&#30830;&#22320;&#20351;&#29992; <code class="docutils literal notranslate"><span class="pre">A_def</span></code> &#21644; <code class="docutils literal notranslate"><span class="pre">h_def</span></code> &#12290;&#25152;&#20197;&#36825;&#20123;&#23450;&#20041;&#24102;&#26469;&#20102;&#19968;&#20010;&#26435;&#34913;&#65306;&#23427;&#20204;&#21487;&#20197;&#20351;&#34920;&#36798;&#24335;&#26356;&#30701;&#24182;&#19988;&#26356;&#20855;&#21487;&#35835;&#24615;&#65292;&#20294;&#23427;&#20204;&#26377;&#26102;&#38656;&#35201;&#25105;&#20204;&#20570;&#26356;&#22810;&#30340;&#24037;&#20316;&#12290;</p>
<p>&#19968;&#20010;&#26356;&#26377;&#36259;&#30340;&#31574;&#30053;&#26159; <code class="docutils literal notranslate"><span class="pre">wlog</span></code> &#31574;&#30053;&#65292;&#23427;&#23553;&#35013;&#20102;&#19978;&#38754;&#38750;&#27491;&#24335;&#35777;&#26126;&#20013;&#30340;&#23545;&#31216;&#24615;&#35770;&#35777;&#12290;&#25105;&#20204;&#29616;&#22312;&#19981;&#20250;&#35814;&#32454;&#35752;&#35770;&#23427;&#65292;&#20294;&#35831;&#27880;&#24847;&#23427;&#24688;&#22909;&#20570;&#20102;&#25105;&#20204;&#24819;&#35201;&#30340;&#24037;&#20316;&#12290;&#22914;&#26524;&#23558;&#40736;&#26631;&#24748;&#20572;&#22312;&#35813;&#31574;&#30053;&#19978;&#65292;&#20320;&#21487;&#20197;&#26597;&#30475;&#20854;&#25991;&#26723;&#12290;</p>
<p>&#28385;&#23556;&#24615;&#30340;&#35770;&#35777;&#29978;&#33267;&#26356;&#23481;&#26131;&#12290;&#32473;&#23450; <span class="math notranslate nohighlight">\(\beta\)</span> &#20013;&#30340; <span class="math notranslate nohighlight">\(y\)</span> &#65292;&#25105;&#20204;&#32771;&#34385;&#20004;&#31181;&#24773;&#20917;&#65292;&#21462;&#20915;&#20110; <span class="math notranslate nohighlight">\(g(y)\)</span> &#26159;&#21542;&#22312; <span class="math notranslate nohighlight">\(A\)</span> &#20013;&#12290;&#33509;&#26159;&#65292;&#21017;&#23427;&#19981;&#20250;&#22312;&#26368;&#22806;&#23618;&#30340;&#29615; <span class="math notranslate nohighlight">\(S_0\)</span> &#20013;&#65292;&#22240;&#20026;&#26681;&#25454;&#23450;&#20041;&#65292;&#36825;&#20010;&#29615;&#21644; <span class="math notranslate nohighlight">\(g\)</span> &#30340;&#20687;&#19981;&#30456;&#20132;&#12290;&#22240;&#27492;&#23384;&#22312; <span class="math notranslate nohighlight">\(n\)</span> &#20351;&#24471; <cite>g(y)</cite> &#26159; <span class="math notranslate nohighlight">\(S_{n+1}\)</span> &#30340;&#20803;&#32032;&#12290;&#36825;&#24847;&#21619;&#30528;&#23427;&#24418;&#22914; <span class="math notranslate nohighlight">\(g(f(x))\)</span> &#65292;&#20854;&#20013; <span class="math notranslate nohighlight">\(x\)</span> &#22312; <span class="math notranslate nohighlight">\(S_n\)</span> &#20013;&#12290;&#30001; <span class="math notranslate nohighlight">\(g\)</span> &#30340;&#21333;&#23556;&#24615;&#65292;&#25105;&#20204;&#26377; <span class="math notranslate nohighlight">\(f(x) = y\)</span> &#12290;&#22312; <span class="math notranslate nohighlight">\(g(y)\)</span> &#23646;&#20110; <span class="math notranslate nohighlight">\(A\)</span> &#30340;&#34917;&#38598;&#30340;&#24773;&#20917;&#65292;&#25105;&#20204;&#31435;&#21051;&#24471;&#21040; <span class="math notranslate nohighlight">\(h(g(y))= y\)</span>, &#35777;&#27605;&#12290;</p>
<p>&#25105;&#20204;&#20877;&#27425;&#40723;&#21169;&#24744;&#36880;&#27493;&#23436;&#25104;&#35777;&#26126;&#24182;&#22635;&#20889;&#32570;&#22833;&#30340;&#37096;&#20998;&#12290;&#31574;&#30053; <code class="docutils literal notranslate"><span class="pre">cases</span> <span class="pre">n</span> <span class="pre">with</span> <span class="pre">n</span></code> &#20998;&#35299;&#20026;&#24773;&#20917; <code class="docutils literal notranslate"><span class="pre">g</span> <span class="pre">y</span> <span class="pre">&#8712;</span> <span class="pre">sbAux</span> <span class="pre">f</span> <span class="pre">g</span> <span class="pre">0</span></code> &#21644; <code class="docutils literal notranslate"><span class="pre">g</span> <span class="pre">y</span> <span class="pre">&#8712;</span> <span class="pre">sbAux</span> <span class="pre">f</span> <span class="pre">g</span> <span class="pre">n.succ</span></code> &#12290;&#22312;&#20004;&#31181;&#24773;&#20917;&#19979;&#65292;&#36890;&#36807; <code class="docutils literal notranslate"><span class="pre">simp</span> <span class="pre">[sbAux]</span></code> &#35843;&#29992;&#21270;&#31616;&#22120;&#37117;&#20250;&#24212;&#29992; <code class="docutils literal notranslate"><span class="pre">sbAux</span></code> &#30340;&#30456;&#24212;&#23450;&#20041;&#24335;&#12290;</p>
<div class="highlight-lean notranslate"><div class="highlight"><pre><span></span><span class="kd">theorem</span><span class="w"> </span><span class="n">sb_surjective</span><span class="w"> </span><span class="o">(</span><span class="n">hg</span><span class="w"> </span><span class="o">:</span><span class="w"> </span><span class="n">Injective</span><span class="w"> </span><span class="n">g</span><span class="o">)</span><span class="w"> </span><span class="o">:</span><span class="w"> </span><span class="n">Surjective</span><span class="w"> </span><span class="o">(</span><span class="n">sbFun</span><span class="w"> </span><span class="n">f</span><span class="w"> </span><span class="n">g</span><span class="o">)</span><span class="w"> </span><span class="o">:=</span><span class="w"> </span><span class="kd">by</span>
<span class="w">  </span><span class="n">set</span><span class="w"> </span><span class="n">A</span><span class="w"> </span><span class="o">:=</span><span class="w"> </span><span class="n">sbSet</span><span class="w"> </span><span class="n">f</span><span class="w"> </span><span class="n">g</span><span class="w"> </span><span class="k">with</span><span class="w"> </span><span class="n">A_def</span>
<span class="w">  </span><span class="n">set</span><span class="w"> </span><span class="n">h</span><span class="w"> </span><span class="o">:=</span><span class="w"> </span><span class="n">sbFun</span><span class="w"> </span><span class="n">f</span><span class="w"> </span><span class="n">g</span><span class="w"> </span><span class="k">with</span><span class="w"> </span><span class="n">h_def</span>
<span class="w">  </span><span class="n">intro</span><span class="w"> </span><span class="n">y</span>
<span class="w">  </span><span class="n">by_cases</span><span class="w"> </span><span class="n">gyA</span><span class="w"> </span><span class="o">:</span><span class="w"> </span><span class="n">g</span><span class="w"> </span><span class="n">y</span><span class="w"> </span><span class="bp">&#8712;</span><span class="w"> </span><span class="n">A</span>
<span class="w">  </span><span class="bp">&#183;</span><span class="w"> </span><span class="n">rw</span><span class="w"> </span><span class="o">[</span><span class="n">A_def</span><span class="o">,</span><span class="w"> </span><span class="n">sbSet</span><span class="o">,</span><span class="w"> </span><span class="n">mem_iUnion</span><span class="o">]</span><span class="w"> </span><span class="n">at</span><span class="w"> </span><span class="n">gyA</span>
<span class="w">    </span><span class="n">rcases</span><span class="w"> </span><span class="n">gyA</span><span class="w"> </span><span class="k">with</span><span class="w"> </span><span class="o">&#10216;</span><span class="n">n</span><span class="o">,</span><span class="w"> </span><span class="n">hn</span><span class="o">&#10217;</span>
<span class="w">    </span><span class="n">rcases</span><span class="w"> </span><span class="n">n</span><span class="w"> </span><span class="k">with</span><span class="w"> </span><span class="n">_</span><span class="w"> </span><span class="bp">|</span><span class="w"> </span><span class="n">n</span>
<span class="w">    </span><span class="bp">&#183;</span><span class="w"> </span><span class="n">simp</span><span class="w"> </span><span class="o">[</span><span class="n">sbAux</span><span class="o">]</span><span class="w"> </span><span class="n">at</span><span class="w"> </span><span class="n">hn</span>
<span class="w">    </span><span class="n">simp</span><span class="w"> </span><span class="o">[</span><span class="n">sbAux</span><span class="o">]</span><span class="w"> </span><span class="n">at</span><span class="w"> </span><span class="n">hn</span>
<span class="w">    </span><span class="n">rcases</span><span class="w"> </span><span class="n">hn</span><span class="w"> </span><span class="k">with</span><span class="w"> </span><span class="o">&#10216;</span><span class="n">x</span><span class="o">,</span><span class="w"> </span><span class="n">xmem</span><span class="o">,</span><span class="w"> </span><span class="n">hx</span><span class="o">&#10217;</span>
<span class="w">    </span><span class="n">use</span><span class="w"> </span><span class="n">x</span>
<span class="w">    </span><span class="k">have</span><span class="w"> </span><span class="o">:</span><span class="w"> </span><span class="n">x</span><span class="w"> </span><span class="bp">&#8712;</span><span class="w"> </span><span class="n">A</span><span class="w"> </span><span class="o">:=</span><span class="w"> </span><span class="kd">by</span>
<span class="w">      </span><span class="n">rw</span><span class="w"> </span><span class="o">[</span><span class="n">A_def</span><span class="o">,</span><span class="w"> </span><span class="n">sbSet</span><span class="o">,</span><span class="w"> </span><span class="n">mem_iUnion</span><span class="o">]</span>
<span class="w">      </span><span class="n">exact</span><span class="w"> </span><span class="o">&#10216;</span><span class="n">n</span><span class="o">,</span><span class="w"> </span><span class="n">xmem</span><span class="o">&#10217;</span>
<span class="w">    </span><span class="n">simp</span><span class="w"> </span><span class="n">only</span><span class="w"> </span><span class="o">[</span><span class="n">h_def</span><span class="o">,</span><span class="w"> </span><span class="n">sbFun</span><span class="o">,</span><span class="w"> </span><span class="n">if_pos</span><span class="w"> </span><span class="n">this</span><span class="o">]</span>
<span class="w">    </span><span class="n">exact</span><span class="w"> </span><span class="n">hg</span><span class="w"> </span><span class="n">hx</span>
<span class="w">  </span><span class="gr">sorry</span>
</pre></div>
</div>
<p>&#25105;&#20204;&#29616;&#22312;&#21487;&#20197;&#25226;&#23427;&#20204;&#25918;&#22312;&#19968;&#36215;&#12290;&#26368;&#21518;&#30340;&#35770;&#35777;&#31616;&#30701;&#32780;&#29980;&#32654;&#65292;&#35777;&#26126;&#20351;&#29992;&#20102; <code class="docutils literal notranslate"><span class="pre">Bijective</span> <span class="pre">h</span></code> &#23637;&#24320;&#20026; <code class="docutils literal notranslate"><span class="pre">Injective</span> <span class="pre">h</span> <span class="pre">&#8743;</span> <span class="pre">Surjective</span> <span class="pre">h</span></code> &#36825;&#19968;&#20107;&#23454;&#12290;</p>
<div class="highlight-lean notranslate"><div class="highlight"><pre><span></span><span class="kd">theorem</span><span class="w"> </span><span class="n">schroeder_bernstein</span><span class="w"> </span><span class="o">{</span><span class="n">f</span><span class="w"> </span><span class="o">:</span><span class="w"> </span><span class="n">&#945;</span><span class="w"> </span><span class="bp">&#8594;</span><span class="w"> </span><span class="n">&#946;</span><span class="o">}</span><span class="w"> </span><span class="o">{</span><span class="n">g</span><span class="w"> </span><span class="o">:</span><span class="w"> </span><span class="n">&#946;</span><span class="w"> </span><span class="bp">&#8594;</span><span class="w"> </span><span class="n">&#945;</span><span class="o">}</span><span class="w"> </span><span class="o">(</span><span class="n">hf</span><span class="w"> </span><span class="o">:</span><span class="w"> </span><span class="n">Injective</span><span class="w"> </span><span class="n">f</span><span class="o">)</span><span class="w"> </span><span class="o">(</span><span class="n">hg</span><span class="w"> </span><span class="o">:</span><span class="w"> </span><span class="n">Injective</span><span class="w"> </span><span class="n">g</span><span class="o">)</span><span class="w"> </span><span class="o">:</span>
<span class="w">    </span><span class="bp">&#8707;</span><span class="w"> </span><span class="n">h</span><span class="w"> </span><span class="o">:</span><span class="w"> </span><span class="n">&#945;</span><span class="w"> </span><span class="bp">&#8594;</span><span class="w"> </span><span class="n">&#946;</span><span class="o">,</span><span class="w"> </span><span class="n">Bijective</span><span class="w"> </span><span class="n">h</span><span class="w"> </span><span class="o">:=</span>
<span class="w">  </span><span class="o">&#10216;</span><span class="n">sbFun</span><span class="w"> </span><span class="n">f</span><span class="w"> </span><span class="n">g</span><span class="o">,</span><span class="w"> </span><span class="n">sb_injective</span><span class="w"> </span><span class="n">f</span><span class="w"> </span><span class="n">g</span><span class="w"> </span><span class="n">hf</span><span class="o">,</span><span class="w"> </span><span class="n">sb_surjective</span><span class="w"> </span><span class="n">f</span><span class="w"> </span><span class="n">g</span><span class="w"> </span><span class="n">hg</span><span class="o">&#10217;</span>
</pre></div>
</div>
</section>
</section>


           </div>
          </div>
          <footer><div class="rst-footer-buttons" role="navigation" aria-label="Footer">
        <a href="C03_Logic.html" class="btn btn-neutral float-left" title="3. &#36923;&#36753;" accesskey="p" rel="prev"><span class="fa fa-arrow-circle-left" aria-hidden="true"></span> Previous</a>
        <a href="C05_Elementary_Number_Theory.html" class="btn btn-neutral float-right" title="5. Elementary Number Theory" accesskey="n" rel="next">Next <span class="fa fa-arrow-circle-right" aria-hidden="true"></span></a>
    </div>

  <hr/>

  <div role="contentinfo">
    <p>&#169; Copyright 2020, Jeremy Avigad, Patrick Massot.</p>
  </div>

  Built with <a href="https://www.sphinx-doc.org/">Sphinx</a> using a
    <a href="https://github.com/readthedocs/sphinx_rtd_theme">theme</a>
    provided by <a href="https://readthedocs.org">Read the Docs</a>.
   

</footer>
        </div>
      </div>
    </section>
  </div>
  <script>
      jQuery(function () {
          SphinxRtdTheme.Navigation.enable(true);
      });
  </script> 

</body>
</html>