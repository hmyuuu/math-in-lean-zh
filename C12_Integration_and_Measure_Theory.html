

<!DOCTYPE html>
<html class="writer-html5" lang="en" data-content_root="./">
<head>
  <meta charset="utf-8" /><meta name="viewport" content="width=device-width, initial-scale=1" />

  <meta name="viewport" content="width=device-width, initial-scale=1.0" />
  <title>12. &#31215;&#20998;&#21644;&#27979;&#24230;&#35770; &mdash; Mathematics in Lean 0.1 documentation</title>
      <link rel="stylesheet" type="text/css" href="_static/pygments.css?v=80d5e7a1" />
      <link rel="stylesheet" type="text/css" href="_static/css/theme.css?v=e59714d7" />
      <link rel="stylesheet" type="text/css" href="_static/css/custom.css?v=0731ccc3" />

  
    <link rel="shortcut icon" href="_static/favicon.ico"/>
      <script src="_static/jquery.js?v=5d32c60e"></script>
      <script src="_static/_sphinx_javascript_frameworks_compat.js?v=2cd50e6c"></script>
      <script src="_static/documentation_options.js?v=2709fde1"></script>
      <script src="_static/doctools.js?v=9a2dae69"></script>
      <script src="_static/sphinx_highlight.js?v=dc90522c"></script>
      <script async="async" src="https://cdn.jsdelivr.net/npm/mathjax@3/es5/tex-mml-chtml.js"></script>
    <script src="_static/js/theme.js"></script>
    <link rel="index" title="Index" href="genindex.html" />
    <link rel="search" title="Search" href="search.html" />
    <link rel="next" title="Index" href="genindex.html" />
    <link rel="prev" title="11. Differential Calculus" href="C11_Differential_Calculus.html" /> 
</head>

<body class="wy-body-for-nav"> 
  <div class="wy-grid-for-nav">
    <nav data-toggle="wy-nav-shift" class="wy-nav-side">
      <div class="wy-side-scroll">
        <div class="wy-side-nav-search" >

          
          
          <a href="index.html" class="icon icon-home">
            Mathematics in Lean
          </a>
<div role="search">
  <form id="rtd-search-form" class="wy-form" action="search.html" method="get">
    <input type="text" name="q" placeholder="Search docs" aria-label="Search docs" />
    <input type="hidden" name="check_keywords" value="yes" />
    <input type="hidden" name="area" value="default" />
  </form>
</div>
        </div><div class="wy-menu wy-menu-vertical" data-spy="affix" role="navigation" aria-label="Navigation menu">
              <ul class="current">
<li class="toctree-l1"><a class="reference internal" href="C01_Introduction.html">1. &#24341;&#35328;</a></li>
<li class="toctree-l1"><a class="reference internal" href="C02_Basics.html">2. &#22522;&#30784;</a></li>
<li class="toctree-l1"><a class="reference internal" href="C03_Logic.html">3. &#36923;&#36753;</a></li>
<li class="toctree-l1"><a class="reference internal" href="C04_Sets_and_Functions.html">4. &#38598;&#21512;&#21644;&#20989;&#25968;</a></li>
<li class="toctree-l1"><a class="reference internal" href="C05_Elementary_Number_Theory.html">5. Elementary Number Theory</a></li>
<li class="toctree-l1"><a class="reference internal" href="C06_Structures.html">6. &#32467;&#26500;&#20307;&#65288;Structures&#65289;</a></li>
<li class="toctree-l1"><a class="reference internal" href="C07_Hierarchies.html">7. Hierarchies</a></li>
<li class="toctree-l1"><a class="reference internal" href="C08_Groups_and_Rings.html">8. &#32676;&#19982;&#29615;</a></li>
<li class="toctree-l1"><a class="reference internal" href="C09_Linear_Algebra.html">9. &#32447;&#24615;&#20195;&#25968;</a></li>
<li class="toctree-l1"><a class="reference internal" href="C10_Topology.html">10. Topology</a></li>
<li class="toctree-l1"><a class="reference internal" href="C11_Differential_Calculus.html">11. Differential Calculus</a></li>
<li class="toctree-l1 current"><a class="current reference internal" href="#">12. &#31215;&#20998;&#21644;&#27979;&#24230;&#35770;</a><ul>
<li class="toctree-l2"><a class="reference internal" href="#elementary-integration">12.1. &#21021;&#31561;&#31215;&#20998;</a></li>
<li class="toctree-l2"><a class="reference internal" href="#measure-theory">12.2. &#27979;&#24230;&#35770;</a></li>
<li class="toctree-l2"><a class="reference internal" href="#integration">12.3. &#31215;&#20998;</a></li>
</ul>
</li>
</ul>
<ul>
<li class="toctree-l1"><a class="reference internal" href="genindex.html">Index</a></li>
</ul>

        </div>
      </div>
    </nav>

    <section data-toggle="wy-nav-shift" class="wy-nav-content-wrap"><nav class="wy-nav-top" aria-label="Mobile navigation menu" >
          <i data-toggle="wy-nav-top" class="fa fa-bars"></i>
          <a href="index.html">Mathematics in Lean</a>
      </nav>

      <div class="wy-nav-content">
        <div class="rst-content">
          <div role="navigation" aria-label="Page navigation">
  <ul class="wy-breadcrumbs">
      <li><a href="index.html" class="icon icon-home" aria-label="Home"></a></li>
      <li class="breadcrumb-item active"><span class="section-number">12. </span>&#31215;&#20998;&#21644;&#27979;&#24230;&#35770;</li>
      <li class="wy-breadcrumbs-aside">
            <a href="_sources/C12_Integration_and_Measure_Theory.rst.txt" rel="nofollow"> View page source</a>
      </li>
  </ul>
  <hr/>
</div>
          <div role="main" class="document" itemscope="itemscope" itemtype="http://schema.org/Article">
           <div itemprop="articleBody">
             
  <section id="index-0">
<span id="integration-and-measure-theory"></span><span id="id1"></span><h1><span class="section-number">12. </span>&#31215;&#20998;&#21644;&#27979;&#24230;&#35770;<a class="headerlink" href="#index-0" title="Link to this heading">&#61633;</a></h1>
<section id="elementary-integration">
<span id="index-1"></span><span id="id2"></span><h2><span class="section-number">12.1. </span>&#21021;&#31561;&#31215;&#20998;<a class="headerlink" href="#elementary-integration" title="Link to this heading">&#61633;</a></h2>
<p>&#25105;&#20204;&#39318;&#20808;&#20851;&#27880;&#20989;&#25968;&#22312;`&#8477;`&#19978;&#26377;&#38480;&#21306;&#38388;&#30340;&#31215;&#20998;&#12290;&#25105;&#20204;&#21487;&#20197;&#31215;&#20998;&#21021;&#31561;&#20989;&#25968;&#12290;</p>
<div class="highlight-lean notranslate"><div class="highlight"><pre><span></span><span class="kn">open</span><span class="w"> </span><span class="n">MeasureTheory</span><span class="w"> </span><span class="n">intervalIntegral</span>

<span class="kn">open</span><span class="w"> </span><span class="n">Interval</span>
<span class="c1">-- &#36825;&#37324;&#24341;&#20837;&#20102;&#35760;&#21495;`[[a, b]]` &#26469;&#34920;&#31034;&#21306;&#38388;`min a b`&#21040;`max a b`&#12290;</span>

<span class="kd">example</span><span class="w"> </span><span class="o">(</span><span class="n">a</span><span class="w"> </span><span class="n">b</span><span class="w"> </span><span class="o">:</span><span class="w"> </span><span class="n">&#8477;</span><span class="o">)</span><span class="w"> </span><span class="o">:</span><span class="w"> </span><span class="o">(</span><span class="bp">&#8747;</span><span class="w"> </span><span class="n">x</span><span class="w"> </span><span class="k">in</span><span class="w"> </span><span class="n">a</span><span class="bp">..</span><span class="n">b</span><span class="o">,</span><span class="w"> </span><span class="n">x</span><span class="o">)</span><span class="w"> </span><span class="bp">=</span><span class="w"> </span><span class="o">(</span><span class="n">b</span><span class="w"> </span><span class="bp">^</span><span class="w"> </span><span class="mi">2</span><span class="w"> </span><span class="bp">-</span><span class="w"> </span><span class="n">a</span><span class="w"> </span><span class="bp">^</span><span class="w"> </span><span class="mi">2</span><span class="o">)</span><span class="w"> </span><span class="bp">/</span><span class="w"> </span><span class="mi">2</span><span class="w"> </span><span class="o">:=</span>
<span class="w">  </span><span class="n">integral_id</span>

<span class="kd">example</span><span class="w"> </span><span class="o">{</span><span class="n">a</span><span class="w"> </span><span class="n">b</span><span class="w"> </span><span class="o">:</span><span class="w"> </span><span class="n">&#8477;</span><span class="o">}</span><span class="w"> </span><span class="o">(</span><span class="n">h</span><span class="w"> </span><span class="o">:</span><span class="w"> </span><span class="o">(</span><span class="mi">0</span><span class="w"> </span><span class="o">:</span><span class="w"> </span><span class="n">&#8477;</span><span class="o">)</span><span class="w"> </span><span class="bp">&#8713;</span><span class="w"> </span><span class="o">[[</span><span class="n">a</span><span class="o">,</span><span class="w"> </span><span class="n">b</span><span class="o">]])</span><span class="w"> </span><span class="o">:</span><span class="w"> </span><span class="o">(</span><span class="bp">&#8747;</span><span class="w"> </span><span class="n">x</span><span class="w"> </span><span class="k">in</span><span class="w"> </span><span class="n">a</span><span class="bp">..</span><span class="n">b</span><span class="o">,</span><span class="w"> </span><span class="mi">1</span><span class="w"> </span><span class="bp">/</span><span class="w"> </span><span class="n">x</span><span class="o">)</span><span class="w"> </span><span class="bp">=</span><span class="w"> </span><span class="n">Real.log</span><span class="w"> </span><span class="o">(</span><span class="n">b</span><span class="w"> </span><span class="bp">/</span><span class="w"> </span><span class="n">a</span><span class="o">)</span><span class="w"> </span><span class="o">:=</span>
<span class="w">  </span><span class="n">integral_one_div</span><span class="w"> </span><span class="n">h</span>
</pre></div>
</div>
<p>&#24494;&#31215;&#20998;&#22522;&#26412;&#23450;&#29702;&#32852;&#31995;&#20102;&#24494;&#20998;&#21644;&#31215;&#20998;&#12290;&#19979;&#38754;&#25105;&#20204;&#32473;&#20986;&#36825;&#20010;&#23450;&#29702;&#30340;&#20004;&#20010;&#37096;&#20998;&#30340;&#19968;&#31181;&#31616;&#21333;&#24773;&#24418;&#12290;
&#31532;&#19968;&#37096;&#20998;&#35828;&#26126;&#31215;&#20998;&#26159;&#24494;&#20998;&#30340;&#36870;&#36816;&#31639;&#65292;&#31532;&#20108;&#37096;&#20998;&#35828;&#26126;&#20102;&#22914;&#20309;&#35745;&#31639;&#24494;&#20803;&#30340;&#32047;&#31215;&#12290;&#65288;&#36825;&#20004;&#20010;&#37096;&#20998;&#38750;&#24120;&#23494;&#20999;&#30456;&#20851;&#65292;&#20294;&#23427;&#20204;&#30340;&#26368;&#22909;&#29256;&#26412;(&#27809;&#26377;&#20889;&#22312;&#36825;&#37324;)&#24182;&#19981;&#31561;&#20215;&#12290;&#65289;</p>
<div class="highlight-lean notranslate"><div class="highlight"><pre><span></span><span class="kd">example</span><span class="w"> </span><span class="o">(</span><span class="n">f</span><span class="w"> </span><span class="o">:</span><span class="w"> </span><span class="n">&#8477;</span><span class="w"> </span><span class="bp">&#8594;</span><span class="w"> </span><span class="n">&#8477;</span><span class="o">)</span><span class="w"> </span><span class="o">(</span><span class="n">hf</span><span class="w"> </span><span class="o">:</span><span class="w"> </span><span class="n">Continuous</span><span class="w"> </span><span class="n">f</span><span class="o">)</span><span class="w"> </span><span class="o">(</span><span class="n">a</span><span class="w"> </span><span class="n">b</span><span class="w"> </span><span class="o">:</span><span class="w"> </span><span class="n">&#8477;</span><span class="o">)</span><span class="w"> </span><span class="o">:</span><span class="w"> </span><span class="n">deriv</span><span class="w"> </span><span class="o">(</span><span class="k">fun</span><span class="w"> </span><span class="n">u</span><span class="w"> </span><span class="bp">&#8614;</span><span class="w"> </span><span class="bp">&#8747;</span><span class="w"> </span><span class="n">x</span><span class="w"> </span><span class="o">:</span><span class="w"> </span><span class="n">&#8477;</span><span class="w"> </span><span class="k">in</span><span class="w"> </span><span class="n">a</span><span class="bp">..</span><span class="n">u</span><span class="o">,</span><span class="w"> </span><span class="n">f</span><span class="w"> </span><span class="n">x</span><span class="o">)</span><span class="w"> </span><span class="n">b</span><span class="w"> </span><span class="bp">=</span><span class="w"> </span><span class="n">f</span><span class="w"> </span><span class="n">b</span><span class="w"> </span><span class="o">:=</span>
<span class="w">  </span><span class="o">(</span><span class="n">integral_hasStrictDerivAt_right</span><span class="w"> </span><span class="o">(</span><span class="n">hf.intervalIntegrable</span><span class="w"> </span><span class="n">_</span><span class="w"> </span><span class="n">_</span><span class="o">)</span><span class="w"> </span><span class="o">(</span><span class="n">hf.stronglyMeasurableAtFilter</span><span class="w"> </span><span class="n">_</span><span class="w"> </span><span class="n">_</span><span class="o">)</span>
<span class="w">        </span><span class="n">hf.continuousAt</span><span class="o">)</span><span class="bp">.</span><span class="n">hasDerivAt.deriv</span>

<span class="kd">example</span><span class="w"> </span><span class="o">{</span><span class="n">f</span><span class="w"> </span><span class="o">:</span><span class="w"> </span><span class="n">&#8477;</span><span class="w"> </span><span class="bp">&#8594;</span><span class="w"> </span><span class="n">&#8477;</span><span class="o">}</span><span class="w"> </span><span class="o">{</span><span class="n">a</span><span class="w"> </span><span class="n">b</span><span class="w"> </span><span class="o">:</span><span class="w"> </span><span class="n">&#8477;</span><span class="o">}</span><span class="w"> </span><span class="o">{</span><span class="n">f&#39;</span><span class="w"> </span><span class="o">:</span><span class="w"> </span><span class="n">&#8477;</span><span class="w"> </span><span class="bp">&#8594;</span><span class="w"> </span><span class="n">&#8477;</span><span class="o">}</span><span class="w"> </span><span class="o">(</span><span class="n">h</span><span class="w"> </span><span class="o">:</span><span class="w"> </span><span class="bp">&#8704;</span><span class="w"> </span><span class="n">x</span><span class="w"> </span><span class="bp">&#8712;</span><span class="w"> </span><span class="o">[[</span><span class="n">a</span><span class="o">,</span><span class="w"> </span><span class="n">b</span><span class="o">]],</span><span class="w"> </span><span class="n">HasDerivAt</span><span class="w"> </span><span class="n">f</span><span class="w"> </span><span class="o">(</span><span class="n">f&#39;</span><span class="w"> </span><span class="n">x</span><span class="o">)</span><span class="w"> </span><span class="n">x</span><span class="o">)</span>
<span class="w">    </span><span class="o">(</span><span class="n">h&#39;</span><span class="w"> </span><span class="o">:</span><span class="w"> </span><span class="n">IntervalIntegrable</span><span class="w"> </span><span class="n">f&#39;</span><span class="w"> </span><span class="n">volume</span><span class="w"> </span><span class="n">a</span><span class="w"> </span><span class="n">b</span><span class="o">)</span><span class="w"> </span><span class="o">:</span><span class="w"> </span><span class="o">(</span><span class="bp">&#8747;</span><span class="w"> </span><span class="n">y</span><span class="w"> </span><span class="k">in</span><span class="w"> </span><span class="n">a</span><span class="bp">..</span><span class="n">b</span><span class="o">,</span><span class="w"> </span><span class="n">f&#39;</span><span class="w"> </span><span class="n">y</span><span class="o">)</span><span class="w"> </span><span class="bp">=</span><span class="w"> </span><span class="n">f</span><span class="w"> </span><span class="n">b</span><span class="w"> </span><span class="bp">-</span><span class="w"> </span><span class="n">f</span><span class="w"> </span><span class="n">a</span><span class="w"> </span><span class="o">:=</span>
<span class="w">  </span><span class="n">integral_eq_sub_of_hasDerivAt</span><span class="w"> </span><span class="n">h</span><span class="w"> </span><span class="n">h&#39;</span>
</pre></div>
</div>
<p>&#22312;Mathlib&#20013;&#20063;&#23450;&#20041;&#20102;&#21367;&#31215;&#65292;&#24182;&#35777;&#26126;&#20102;&#21367;&#31215;&#30340;&#22522;&#26412;&#24615;&#36136;&#12290;</p>
<div class="highlight-lean notranslate"><div class="highlight"><pre><span></span><span class="kn">open</span><span class="w"> </span><span class="n">Convolution</span>

<span class="kd">example</span><span class="w"> </span><span class="o">(</span><span class="n">f</span><span class="w"> </span><span class="o">:</span><span class="w"> </span><span class="n">&#8477;</span><span class="w"> </span><span class="bp">&#8594;</span><span class="w"> </span><span class="n">&#8477;</span><span class="o">)</span><span class="w"> </span><span class="o">(</span><span class="n">g</span><span class="w"> </span><span class="o">:</span><span class="w"> </span><span class="n">&#8477;</span><span class="w"> </span><span class="bp">&#8594;</span><span class="w"> </span><span class="n">&#8477;</span><span class="o">)</span><span class="w"> </span><span class="o">:</span><span class="w"> </span><span class="n">f</span><span class="w"> </span><span class="bp">&#8902;</span><span class="w"> </span><span class="n">g</span><span class="w"> </span><span class="bp">=</span><span class="w"> </span><span class="k">fun</span><span class="w"> </span><span class="n">x</span><span class="w"> </span><span class="bp">&#8614;</span><span class="w"> </span><span class="bp">&#8747;</span><span class="w"> </span><span class="n">t</span><span class="o">,</span><span class="w"> </span><span class="n">f</span><span class="w"> </span><span class="n">t</span><span class="w"> </span><span class="bp">*</span><span class="w"> </span><span class="n">g</span><span class="w"> </span><span class="o">(</span><span class="n">x</span><span class="w"> </span><span class="bp">-</span><span class="w"> </span><span class="n">t</span><span class="o">)</span><span class="w"> </span><span class="o">:=</span>
<span class="w">  </span><span class="n">rfl</span>
</pre></div>
</div>
</section>
<section id="measure-theory">
<span id="index-2"></span><span id="id3"></span><h2><span class="section-number">12.2. </span>&#27979;&#24230;&#35770;<a class="headerlink" href="#measure-theory" title="Link to this heading">&#61633;</a></h2>
<p>Mathlib &#20013;&#31215;&#20998;&#30340;&#25968;&#23398;&#22522;&#30784;&#26159;&#27979;&#24230;&#35770;&#12290;&#29978;&#33267;&#21069;&#19968;&#33410;&#30340;&#21021;&#31561;&#31215;&#20998;&#23454;&#38469;&#19978;&#20063;&#26159; Bochner &#31215;&#20998;&#12290;Bochner &#31215;&#20998;&#26159; Lebesgue &#31215;&#20998;&#30340;&#25512;&#24191;&#65292;&#30446;&#26631;&#31354;&#38388;&#21487;&#20197;&#26159;&#20219;&#24847;&#30340;Banach&#31354;&#38388;&#65292;&#19981;&#19968;&#23450;&#26159;&#26377;&#38480;&#32500;&#30340;&#12290;</p>
<p>&#27979;&#24230;&#35770;&#30340;&#31532;&#19968;&#37096;&#20998;&#26159;&#38598;&#21512;&#30340; <span class="math notranslate nohighlight">\(\sigma\)</span> -&#20195;&#25968;&#30340;&#35821;&#35328;&#65292;&#34987;&#31216;&#20316;*&#21487;&#27979;&#38598;*&#12290;<cite>MeasurableSpace</cite> &#31867;&#22411;&#26063;&#25552;&#20379;&#20102;&#24102;&#26377;&#36825;&#31181;&#32467;&#26500;&#30340;&#31867;&#22411;&#12290;&#31354;&#38598; <cite>empty</cite> &#21644;&#21333;&#20803;&#32032;&#38598; <cite>univ</cite> &#26159;&#21487;&#27979;&#30340;&#65292;&#21487;&#27979;&#38598;&#30340;&#34917;&#38598;&#26159;&#21487;&#27979;&#30340;&#65292;&#21487;&#25968;&#20132;&#21644;&#21487;&#25968;&#24182;&#26159;&#21487;&#27979;&#30340;&#12290;&#27880;&#24847;&#65292;&#36825;&#20123;&#20844;&#29702;&#26159;&#20887;&#20313;&#30340;&#65307;&#22914;&#26524;&#20320; <cite>#print MeasurableSpace</cite>&#65292;&#20320;&#20250;&#30475;&#21040;Mathlib&#29992;&#26469;&#26500;&#36896;&#21487;&#27979;&#38598;&#30340;&#20844;&#29702;&#12290;&#21487;&#25968;&#24615;&#26465;&#20214;&#21487;&#20197;&#20351;&#29992; <cite>Encodable</cite> &#31867;&#22411;&#26063;&#26469;&#34920;&#31034;&#12290;</p>
<div class="highlight-lean notranslate"><div class="highlight"><pre><span></span><span class="kd">variable</span><span class="w"> </span><span class="o">{</span><span class="n">&#945;</span><span class="w"> </span><span class="o">:</span><span class="w"> </span><span class="kt">Type</span><span class="bp">*</span><span class="o">}</span><span class="w"> </span><span class="o">[</span><span class="n">MeasurableSpace</span><span class="w"> </span><span class="n">&#945;</span><span class="o">]</span>

<span class="kd">example</span><span class="w"> </span><span class="o">:</span><span class="w"> </span><span class="n">MeasurableSet</span><span class="w"> </span><span class="o">(</span><span class="bp">&#8709;</span><span class="w"> </span><span class="o">:</span><span class="w"> </span><span class="n">Set</span><span class="w"> </span><span class="n">&#945;</span><span class="o">)</span><span class="w"> </span><span class="o">:=</span>
<span class="w">  </span><span class="n">MeasurableSet.empty</span>

<span class="kd">example</span><span class="w"> </span><span class="o">:</span><span class="w"> </span><span class="n">MeasurableSet</span><span class="w"> </span><span class="o">(</span><span class="n">univ</span><span class="w"> </span><span class="o">:</span><span class="w"> </span><span class="n">Set</span><span class="w"> </span><span class="n">&#945;</span><span class="o">)</span><span class="w"> </span><span class="o">:=</span>
<span class="w">  </span><span class="n">MeasurableSet.univ</span>

<span class="kd">example</span><span class="w"> </span><span class="o">{</span><span class="n">s</span><span class="w"> </span><span class="o">:</span><span class="w"> </span><span class="n">Set</span><span class="w"> </span><span class="n">&#945;</span><span class="o">}</span><span class="w"> </span><span class="o">(</span><span class="n">hs</span><span class="w"> </span><span class="o">:</span><span class="w"> </span><span class="n">MeasurableSet</span><span class="w"> </span><span class="n">s</span><span class="o">)</span><span class="w"> </span><span class="o">:</span><span class="w"> </span><span class="n">MeasurableSet</span><span class="w"> </span><span class="o">(</span><span class="n">s</span><span class="bp">&#7580;</span><span class="o">)</span><span class="w"> </span><span class="o">:=</span>
<span class="w">  </span><span class="n">hs.compl</span>

<span class="kd">example</span><span class="w"> </span><span class="o">:</span><span class="w"> </span><span class="n">Encodable</span><span class="w"> </span><span class="n">&#8469;</span><span class="w"> </span><span class="o">:=</span><span class="w"> </span><span class="kd">by</span><span class="w"> </span><span class="n">infer_instance</span>

<span class="kd">example</span><span class="w"> </span><span class="o">(</span><span class="n">n</span><span class="w"> </span><span class="o">:</span><span class="w"> </span><span class="n">&#8469;</span><span class="o">)</span><span class="w"> </span><span class="o">:</span><span class="w"> </span><span class="n">Encodable</span><span class="w"> </span><span class="o">(</span><span class="n">Fin</span><span class="w"> </span><span class="n">n</span><span class="o">)</span><span class="w"> </span><span class="o">:=</span><span class="w"> </span><span class="kd">by</span><span class="w"> </span><span class="n">infer_instance</span>

<span class="kd">variable</span><span class="w"> </span><span class="o">{</span><span class="n">&#953;</span><span class="w"> </span><span class="o">:</span><span class="w"> </span><span class="kt">Type</span><span class="bp">*</span><span class="o">}</span><span class="w"> </span><span class="o">[</span><span class="n">Encodable</span><span class="w"> </span><span class="n">&#953;</span><span class="o">]</span>

<span class="kd">example</span><span class="w"> </span><span class="o">{</span><span class="n">f</span><span class="w"> </span><span class="o">:</span><span class="w"> </span><span class="n">&#953;</span><span class="w"> </span><span class="bp">&#8594;</span><span class="w"> </span><span class="n">Set</span><span class="w"> </span><span class="n">&#945;</span><span class="o">}</span><span class="w"> </span><span class="o">(</span><span class="n">h</span><span class="w"> </span><span class="o">:</span><span class="w"> </span><span class="bp">&#8704;</span><span class="w"> </span><span class="n">b</span><span class="o">,</span><span class="w"> </span><span class="n">MeasurableSet</span><span class="w"> </span><span class="o">(</span><span class="n">f</span><span class="w"> </span><span class="n">b</span><span class="o">))</span><span class="w"> </span><span class="o">:</span><span class="w"> </span><span class="n">MeasurableSet</span><span class="w"> </span><span class="o">(</span><span class="bp">&#8899;</span><span class="w"> </span><span class="n">b</span><span class="o">,</span><span class="w"> </span><span class="n">f</span><span class="w"> </span><span class="n">b</span><span class="o">)</span><span class="w"> </span><span class="o">:=</span>
<span class="w">  </span><span class="n">MeasurableSet.iUnion</span><span class="w"> </span><span class="n">h</span>

<span class="kd">example</span><span class="w"> </span><span class="o">{</span><span class="n">f</span><span class="w"> </span><span class="o">:</span><span class="w"> </span><span class="n">&#953;</span><span class="w"> </span><span class="bp">&#8594;</span><span class="w"> </span><span class="n">Set</span><span class="w"> </span><span class="n">&#945;</span><span class="o">}</span><span class="w"> </span><span class="o">(</span><span class="n">h</span><span class="w"> </span><span class="o">:</span><span class="w"> </span><span class="bp">&#8704;</span><span class="w"> </span><span class="n">b</span><span class="o">,</span><span class="w"> </span><span class="n">MeasurableSet</span><span class="w"> </span><span class="o">(</span><span class="n">f</span><span class="w"> </span><span class="n">b</span><span class="o">))</span><span class="w"> </span><span class="o">:</span><span class="w"> </span><span class="n">MeasurableSet</span><span class="w"> </span><span class="o">(</span><span class="bp">&#8898;</span><span class="w"> </span><span class="n">b</span><span class="o">,</span><span class="w"> </span><span class="n">f</span><span class="w"> </span><span class="n">b</span><span class="o">)</span><span class="w"> </span><span class="o">:=</span>
<span class="w">  </span><span class="n">MeasurableSet.iInter</span><span class="w"> </span><span class="n">h</span>
</pre></div>
</div>
<p>&#22914;&#26524;&#19968;&#20010;&#31867;&#22411;&#26159;&#21487;&#27979;&#30340;&#65292;&#37027;&#20040;&#25105;&#20204;&#23601;&#21487;&#20197;&#27979;&#37327;&#23427;&#12290;&#23383;&#38754;&#19978;&#65292;&#23545;&#37197;&#22791; <span class="math notranslate nohighlight">\(\sigma\)</span> -&#20195;&#25968;&#30340;&#38598;&#21512;&#65288;&#25110;&#32773;&#31867;&#22411;&#65289;&#30340;&#27979;&#37327;&#26159;&#19968;&#20010;&#20989;&#25968;&#65292;&#23427;&#26159;&#20174;&#21487;&#27979;&#38598;&#21040;&#25193;&#23637;&#65288;&#21363;&#20801;&#35768;&#26080;&#31351;&#65289;&#38750;&#36127;&#23454;&#25968;&#30340;&#20989;&#25968;&#65292;&#24182;&#19988;&#28385;&#36275;&#21487;&#25968;&#26080;&#20132;&#24182;&#38598;&#21512;&#19978;&#21487;&#21152;&#24615;&#12290;&#22312; Mathlib &#20013;&#65292;&#25105;&#20204;&#19981;&#24076;&#26395;&#27599;&#27425;&#27979;&#37327;&#38598;&#21512;&#26102;&#37117;&#24102;&#30528;&#20889;&#19968;&#20010;&#38598;&#21512;&#21487;&#27979;&#12290;&#22240;&#27492;&#25105;&#20204;&#25226;&#36825;&#20010;&#27979;&#24230;&#25512;&#24191;&#21040;&#20219;&#20309;&#38598;&#21512; <cite>s</cite> &#65292;&#20316;&#20026;&#21253;&#21547;`s`&#30340;&#21487;&#27979;&#38598;&#21512;&#30340;&#27979;&#24230;&#30340;&#26368;&#23567;&#20540;&#12290;&#24403;&#28982;&#65292;&#35768;&#22810;&#24341;&#29702;&#20173;&#28982;&#38656;&#35201;&#21487;&#27979;&#20551;&#35774;&#65292;&#20294;&#19981;&#26159;&#20840;&#37096;&#12290;</p>
<div class="highlight-lean notranslate"><div class="highlight"><pre><span></span><span class="kn">open</span><span class="w"> </span><span class="n">MeasureTheory</span>
<span class="kd">variable</span><span class="w"> </span><span class="o">{</span><span class="n">&#956;</span><span class="w"> </span><span class="o">:</span><span class="w"> </span><span class="n">Measure</span><span class="w"> </span><span class="n">&#945;</span><span class="o">}</span>

<span class="kd">example</span><span class="w"> </span><span class="o">(</span><span class="n">s</span><span class="w"> </span><span class="o">:</span><span class="w"> </span><span class="n">Set</span><span class="w"> </span><span class="n">&#945;</span><span class="o">)</span><span class="w"> </span><span class="o">:</span><span class="w"> </span><span class="n">&#956;</span><span class="w"> </span><span class="n">s</span><span class="w"> </span><span class="bp">=</span><span class="w"> </span><span class="bp">&#10757;</span><span class="w"> </span><span class="o">(</span><span class="n">t</span><span class="w"> </span><span class="o">:</span><span class="w"> </span><span class="n">Set</span><span class="w"> </span><span class="n">&#945;</span><span class="o">)</span><span class="w"> </span><span class="o">(</span><span class="n">_</span><span class="w"> </span><span class="o">:</span><span class="w"> </span><span class="n">s</span><span class="w"> </span><span class="bp">&#8838;</span><span class="w"> </span><span class="n">t</span><span class="o">)</span><span class="w"> </span><span class="o">(</span><span class="n">_</span><span class="w"> </span><span class="o">:</span><span class="w"> </span><span class="n">MeasurableSet</span><span class="w"> </span><span class="n">t</span><span class="o">),</span><span class="w"> </span><span class="n">&#956;</span><span class="w"> </span><span class="n">t</span><span class="w"> </span><span class="o">:=</span>
<span class="w">  </span><span class="n">measure_eq_iInf</span><span class="w"> </span><span class="n">s</span>

<span class="kd">example</span><span class="w"> </span><span class="o">(</span><span class="n">s</span><span class="w"> </span><span class="o">:</span><span class="w"> </span><span class="n">&#953;</span><span class="w"> </span><span class="bp">&#8594;</span><span class="w"> </span><span class="n">Set</span><span class="w"> </span><span class="n">&#945;</span><span class="o">)</span><span class="w"> </span><span class="o">:</span><span class="w"> </span><span class="n">&#956;</span><span class="w"> </span><span class="o">(</span><span class="bp">&#8899;</span><span class="w"> </span><span class="n">i</span><span class="o">,</span><span class="w"> </span><span class="n">s</span><span class="w"> </span><span class="n">i</span><span class="o">)</span><span class="w"> </span><span class="bp">&#8804;</span><span class="w"> </span><span class="bp">&#8721;&#39;</span><span class="w"> </span><span class="n">i</span><span class="o">,</span><span class="w"> </span><span class="n">&#956;</span><span class="w"> </span><span class="o">(</span><span class="n">s</span><span class="w"> </span><span class="n">i</span><span class="o">)</span><span class="w"> </span><span class="o">:=</span>
<span class="w">  </span><span class="n">measure_iUnion_le</span><span class="w"> </span><span class="n">s</span>

<span class="kd">example</span><span class="w"> </span><span class="o">{</span><span class="n">f</span><span class="w"> </span><span class="o">:</span><span class="w"> </span><span class="n">&#8469;</span><span class="w"> </span><span class="bp">&#8594;</span><span class="w"> </span><span class="n">Set</span><span class="w"> </span><span class="n">&#945;</span><span class="o">}</span><span class="w"> </span><span class="o">(</span><span class="n">hmeas</span><span class="w"> </span><span class="o">:</span><span class="w"> </span><span class="bp">&#8704;</span><span class="w"> </span><span class="n">i</span><span class="o">,</span><span class="w"> </span><span class="n">MeasurableSet</span><span class="w"> </span><span class="o">(</span><span class="n">f</span><span class="w"> </span><span class="n">i</span><span class="o">))</span><span class="w"> </span><span class="o">(</span><span class="n">hdis</span><span class="w"> </span><span class="o">:</span><span class="w"> </span><span class="n">Pairwise</span><span class="w"> </span><span class="o">(</span><span class="n">Disjoint</span><span class="w"> </span><span class="n">on</span><span class="w"> </span><span class="n">f</span><span class="o">))</span><span class="w"> </span><span class="o">:</span>
<span class="w">    </span><span class="n">&#956;</span><span class="w"> </span><span class="o">(</span><span class="bp">&#8899;</span><span class="w"> </span><span class="n">i</span><span class="o">,</span><span class="w"> </span><span class="n">f</span><span class="w"> </span><span class="n">i</span><span class="o">)</span><span class="w"> </span><span class="bp">=</span><span class="w"> </span><span class="bp">&#8721;&#39;</span><span class="w"> </span><span class="n">i</span><span class="o">,</span><span class="w"> </span><span class="n">&#956;</span><span class="w"> </span><span class="o">(</span><span class="n">f</span><span class="w"> </span><span class="n">i</span><span class="o">)</span><span class="w"> </span><span class="o">:=</span>
<span class="w">  </span><span class="n">&#956;.m_iUnion</span><span class="w"> </span><span class="n">hmeas</span><span class="w"> </span><span class="n">hdis</span>
</pre></div>
</div>
<p>&#19968;&#26086;&#19968;&#20010;&#31867;&#22411;&#26377;&#20102;&#19982;&#23427;&#30456;&#20851;&#32852;&#30340;&#27979;&#24230;&#65292;&#25105;&#20204;&#23601;&#35828;&#65292;&#22914;&#26524;&#24615;&#36136; <cite>P</cite> &#21482;&#22312;&#19968;&#20010;&#27979;&#24230;&#20026;0&#30340;&#38598;&#21512;&#19978;&#22833;&#25928;&#65292;&#21017; <cite>P</cite> &#8220;&#20960;&#20046;&#22788;&#22788;&#8221;&#25104;&#31435; (almost everywhere, ae)&#12290;&#20960;&#20046;&#22788;&#22788;&#30340;&#24615;&#36136;&#38598;&#21512;&#24418;&#25104;&#20102;&#19968;&#20010;&#36807;&#28388;&#22120; (filter)&#65292;&#20294;&#26159; Mathlib &#24341;&#20837;&#20102;&#29305;&#27530;&#30340;&#31526;&#21495;&#26469;&#34920;&#31034;&#19968;&#20010;&#24615;&#36136;&#20960;&#20046;&#22788;&#22788;&#25104;&#31435;&#12290;</p>
<div class="highlight-lean notranslate"><div class="highlight"><pre><span></span><span class="kd">example</span><span class="w"> </span><span class="o">{</span><span class="n">P</span><span class="w"> </span><span class="o">:</span><span class="w"> </span><span class="n">&#945;</span><span class="w"> </span><span class="bp">&#8594;</span><span class="w"> </span><span class="kt">Prop</span><span class="o">}</span><span class="w"> </span><span class="o">:</span><span class="w"> </span><span class="o">(</span><span class="bp">&#8704;&#7504;</span><span class="w"> </span><span class="n">x</span><span class="w"> </span><span class="bp">&#8706;</span><span class="n">&#956;</span><span class="o">,</span><span class="w"> </span><span class="n">P</span><span class="w"> </span><span class="n">x</span><span class="o">)</span><span class="w"> </span><span class="bp">&#8596;</span><span class="w"> </span><span class="bp">&#8704;&#7584;</span><span class="w"> </span><span class="n">x</span><span class="w"> </span><span class="k">in</span><span class="w"> </span><span class="n">ae</span><span class="w"> </span><span class="n">&#956;</span><span class="o">,</span><span class="w"> </span><span class="n">P</span><span class="w"> </span><span class="n">x</span><span class="w"> </span><span class="o">:=</span>
<span class="w">  </span><span class="n">Iff.rfl</span>
</pre></div>
</div>
</section>
<section id="integration">
<span id="id4"></span><h2><span class="section-number">12.3. </span>&#31215;&#20998;<a class="headerlink" href="#integration" title="Link to this heading">&#61633;</a></h2>
<p>&#29616;&#22312;&#25105;&#20204;&#26377;&#20102;&#27979;&#24230;&#21644;&#21487;&#27979;&#31354;&#38388;&#65292;&#25105;&#20204;&#23601;&#21487;&#20197;&#32771;&#34385;&#31215;&#20998;&#20102;&#12290;&#27491;&#22914;&#21069;&#25991;&#25152;&#35762;&#65292;Mathlib &#20351;&#29992;&#38750;&#24120;&#19968;&#33324;&#30340;&#31215;&#20998;&#35760;&#21495;&#65292;&#25903;&#25345;&#20219;&#24847;&#30340; Banach &#31354;&#38388;&#12290;&#20687;&#24448;&#24120;&#19968;&#26679;&#65292;&#25105;&#20204;&#19981;&#24076;&#26395;&#25105;&#20204;&#30340;&#35760;&#21495;&#24102;&#26377;&#20551;&#35774;&#65292;&#25152;&#20197;&#25105;&#20204;&#36825;&#26679;&#32422;&#23450;&#65306;&#22914;&#26524;&#20989;&#25968;&#19981;&#21487;&#31215;&#65292;&#37027;&#20040;&#31215;&#20998;&#31561;&#20110;&#38646;&#12290;&#22823;&#22810;&#25968;&#19982;&#31215;&#20998;&#26377;&#20851;&#30340;&#24341;&#29702;&#37117;&#26377;&#21487;&#31215;&#24615;&#20551;&#35774;&#12290;</p>
<div class="highlight-lean notranslate"><div class="highlight"><pre><span></span><span class="kn">section</span>
<span class="kd">variable</span><span class="w"> </span><span class="o">{</span><span class="n">E</span><span class="w"> </span><span class="o">:</span><span class="w"> </span><span class="kt">Type</span><span class="bp">*</span><span class="o">}</span><span class="w"> </span><span class="o">[</span><span class="n">NormedAddCommGroup</span><span class="w"> </span><span class="n">E</span><span class="o">]</span><span class="w"> </span><span class="o">[</span><span class="n">NormedSpace</span><span class="w"> </span><span class="n">&#8477;</span><span class="w"> </span><span class="n">E</span><span class="o">]</span><span class="w"> </span><span class="o">[</span><span class="n">CompleteSpace</span><span class="w"> </span><span class="n">E</span><span class="o">]</span><span class="w"> </span><span class="o">{</span><span class="n">f</span><span class="w"> </span><span class="o">:</span><span class="w"> </span><span class="n">&#945;</span><span class="w"> </span><span class="bp">&#8594;</span><span class="w"> </span><span class="n">E</span><span class="o">}</span>

<span class="kd">example</span><span class="w"> </span><span class="o">{</span><span class="n">f</span><span class="w"> </span><span class="n">g</span><span class="w"> </span><span class="o">:</span><span class="w"> </span><span class="n">&#945;</span><span class="w"> </span><span class="bp">&#8594;</span><span class="w"> </span><span class="n">E</span><span class="o">}</span><span class="w"> </span><span class="o">(</span><span class="n">hf</span><span class="w"> </span><span class="o">:</span><span class="w"> </span><span class="n">Integrable</span><span class="w"> </span><span class="n">f</span><span class="w"> </span><span class="n">&#956;</span><span class="o">)</span><span class="w"> </span><span class="o">(</span><span class="n">hg</span><span class="w"> </span><span class="o">:</span><span class="w"> </span><span class="n">Integrable</span><span class="w"> </span><span class="n">g</span><span class="w"> </span><span class="n">&#956;</span><span class="o">)</span><span class="w"> </span><span class="o">:</span>
<span class="w">    </span><span class="bp">&#8747;</span><span class="w"> </span><span class="n">a</span><span class="o">,</span><span class="w"> </span><span class="n">f</span><span class="w"> </span><span class="n">a</span><span class="w"> </span><span class="bp">+</span><span class="w"> </span><span class="n">g</span><span class="w"> </span><span class="n">a</span><span class="w"> </span><span class="bp">&#8706;</span><span class="n">&#956;</span><span class="w"> </span><span class="bp">=</span><span class="w"> </span><span class="bp">&#8747;</span><span class="w"> </span><span class="n">a</span><span class="o">,</span><span class="w"> </span><span class="n">f</span><span class="w"> </span><span class="n">a</span><span class="w"> </span><span class="bp">&#8706;</span><span class="n">&#956;</span><span class="w"> </span><span class="bp">+</span><span class="w"> </span><span class="bp">&#8747;</span><span class="w"> </span><span class="n">a</span><span class="o">,</span><span class="w"> </span><span class="n">g</span><span class="w"> </span><span class="n">a</span><span class="w"> </span><span class="bp">&#8706;</span><span class="n">&#956;</span><span class="w"> </span><span class="o">:=</span>
<span class="w">  </span><span class="n">integral_add</span><span class="w"> </span><span class="n">hf</span><span class="w"> </span><span class="n">hg</span>
</pre></div>
</div>
<p>&#20316;&#20026;&#25105;&#20204;&#20570;&#20986;&#30340;&#21508;&#31181;&#32422;&#23450;&#20043;&#38388;&#22797;&#26434;&#20132;&#20114;&#30340;&#19968;&#20010;&#20363;&#23376;&#65292;&#35753;&#25105;&#20204;&#30475;&#30475;&#22914;&#20309;&#31215;&#20998;&#24120;&#20540;&#20989;&#25968;&#12290;&#22238;&#39038;&#19968;&#19979;&#27979;&#24230; <cite>&#956;</cite> &#26159;&#22312;&#25193;&#23637;&#30340;&#38750;&#36127;&#23454;&#25968; <cite>&#8477;&#8805;0&#8734;</cite> &#19978;&#21462;&#20540;&#30340;&#65292;&#23384;&#22312;&#19968;&#20010;&#20989;&#25968; <cite>ENNReal.toReal : &#8477;&#8805;0&#8734; &#8594; &#8477;</cite> &#25226;&#26080;&#31351;&#28857; <cite>&#8868;</cite> &#26144;&#21040;0&#12290;&#23545;&#20219;&#24847; <cite>s : Set &#945;</cite>&#65292;&#22914;&#26524; <cite>&#956; s = &#8868;</cite> &#65292;&#21017;&#38750;&#38646;&#30340;&#24120;&#20540;&#20989;&#25968;&#22312; <cite>s</cite> &#19978;&#19981;&#21487;&#31215;&#65292;&#22240;&#27492;&#26681;&#25454;&#32422;&#23450;&#31215;&#20998;&#20540;&#20026;0&#65292;&#21018;&#22909;&#26159; <cite>(&#956; s).toReal</cite> &#30340;&#32467;&#26524;&#12290;&#25152;&#20197;&#25105;&#20204;&#26377;&#19979;&#38754;&#30340;&#24341;&#29702;&#12290;</p>
<div class="highlight-lean notranslate"><div class="highlight"><pre><span></span><span class="kd">example</span><span class="w"> </span><span class="o">{</span><span class="n">s</span><span class="w"> </span><span class="o">:</span><span class="w"> </span><span class="n">Set</span><span class="w"> </span><span class="n">&#945;</span><span class="o">}</span><span class="w"> </span><span class="o">(</span><span class="n">c</span><span class="w"> </span><span class="o">:</span><span class="w"> </span><span class="n">E</span><span class="o">)</span><span class="w"> </span><span class="o">:</span><span class="w"> </span><span class="bp">&#8747;</span><span class="w"> </span><span class="n">x</span><span class="w"> </span><span class="k">in</span><span class="w"> </span><span class="n">s</span><span class="o">,</span><span class="w"> </span><span class="n">c</span><span class="w"> </span><span class="bp">&#8706;</span><span class="n">&#956;</span><span class="w"> </span><span class="bp">=</span><span class="w"> </span><span class="o">(</span><span class="n">&#956;</span><span class="w"> </span><span class="n">s</span><span class="o">)</span><span class="bp">.</span><span class="n">toReal</span><span class="w"> </span><span class="bp">&#8226;</span><span class="w"> </span><span class="n">c</span><span class="w"> </span><span class="o">:=</span>
<span class="w">  </span><span class="n">setIntegral_const</span><span class="w"> </span><span class="n">c</span>
</pre></div>
</div>
<p>&#29616;&#22312;&#25105;&#20204;&#24555;&#36895;&#22320;&#35299;&#37322;&#22914;&#20309;&#33719;&#24471;&#31215;&#20998;&#29702;&#35770;&#20013;&#26368;&#37325;&#35201;&#30340;&#23450;&#29702;&#65292;&#20174;&#25511;&#21046;&#25910;&#25947;&#23450;&#29702;&#24320;&#22987; &#65288;dominated convergence theorem&#65289;&#12290;Mathlib &#20013;&#26377;&#20960;&#20010;&#29256;&#26412;&#65292;&#36825;&#37324;&#25105;&#20204;&#21482;&#23637;&#31034;&#26368;&#22522;&#26412;&#30340;&#19968;&#20010;&#12290;</p>
<div class="highlight-lean notranslate"><div class="highlight"><pre><span></span><span class="kn">open</span><span class="w"> </span><span class="n">Filter</span>

<span class="kd">example</span><span class="w"> </span><span class="o">{</span><span class="n">F</span><span class="w"> </span><span class="o">:</span><span class="w"> </span><span class="n">&#8469;</span><span class="w"> </span><span class="bp">&#8594;</span><span class="w"> </span><span class="n">&#945;</span><span class="w"> </span><span class="bp">&#8594;</span><span class="w"> </span><span class="n">E</span><span class="o">}</span><span class="w"> </span><span class="o">{</span><span class="n">f</span><span class="w"> </span><span class="o">:</span><span class="w"> </span><span class="n">&#945;</span><span class="w"> </span><span class="bp">&#8594;</span><span class="w"> </span><span class="n">E</span><span class="o">}</span><span class="w"> </span><span class="o">(</span><span class="n">bound</span><span class="w"> </span><span class="o">:</span><span class="w"> </span><span class="n">&#945;</span><span class="w"> </span><span class="bp">&#8594;</span><span class="w"> </span><span class="n">&#8477;</span><span class="o">)</span><span class="w"> </span><span class="o">(</span><span class="n">hmeas</span><span class="w"> </span><span class="o">:</span><span class="w"> </span><span class="bp">&#8704;</span><span class="w"> </span><span class="n">n</span><span class="o">,</span><span class="w"> </span><span class="n">AEStronglyMeasurable</span><span class="w"> </span><span class="o">(</span><span class="n">F</span><span class="w"> </span><span class="n">n</span><span class="o">)</span><span class="w"> </span><span class="n">&#956;</span><span class="o">)</span>
<span class="w">    </span><span class="o">(</span><span class="n">hint</span><span class="w"> </span><span class="o">:</span><span class="w"> </span><span class="n">Integrable</span><span class="w"> </span><span class="n">bound</span><span class="w"> </span><span class="n">&#956;</span><span class="o">)</span><span class="w"> </span><span class="o">(</span><span class="n">hbound</span><span class="w"> </span><span class="o">:</span><span class="w"> </span><span class="bp">&#8704;</span><span class="w"> </span><span class="n">n</span><span class="o">,</span><span class="w"> </span><span class="bp">&#8704;&#7504;</span><span class="w"> </span><span class="n">a</span><span class="w"> </span><span class="bp">&#8706;</span><span class="n">&#956;</span><span class="o">,</span><span class="w"> </span><span class="bp">&#8214;</span><span class="n">F</span><span class="w"> </span><span class="n">n</span><span class="w"> </span><span class="n">a</span><span class="bp">&#8214;</span><span class="w"> </span><span class="bp">&#8804;</span><span class="w"> </span><span class="n">bound</span><span class="w"> </span><span class="n">a</span><span class="o">)</span>
<span class="w">    </span><span class="o">(</span><span class="n">hlim</span><span class="w"> </span><span class="o">:</span><span class="w"> </span><span class="bp">&#8704;&#7504;</span><span class="w"> </span><span class="n">a</span><span class="w"> </span><span class="bp">&#8706;</span><span class="n">&#956;</span><span class="o">,</span><span class="w"> </span><span class="n">Tendsto</span><span class="w"> </span><span class="o">(</span><span class="k">fun</span><span class="w"> </span><span class="n">n</span><span class="w"> </span><span class="o">:</span><span class="w"> </span><span class="n">&#8469;</span><span class="w"> </span><span class="bp">&#8614;</span><span class="w"> </span><span class="n">F</span><span class="w"> </span><span class="n">n</span><span class="w"> </span><span class="n">a</span><span class="o">)</span><span class="w"> </span><span class="n">atTop</span><span class="w"> </span><span class="o">(</span><span class="n">&#120029;</span><span class="w"> </span><span class="o">(</span><span class="n">f</span><span class="w"> </span><span class="n">a</span><span class="o">)))</span><span class="w"> </span><span class="o">:</span>
<span class="w">    </span><span class="n">Tendsto</span><span class="w"> </span><span class="o">(</span><span class="k">fun</span><span class="w"> </span><span class="n">n</span><span class="w"> </span><span class="bp">&#8614;</span><span class="w"> </span><span class="bp">&#8747;</span><span class="w"> </span><span class="n">a</span><span class="o">,</span><span class="w"> </span><span class="n">F</span><span class="w"> </span><span class="n">n</span><span class="w"> </span><span class="n">a</span><span class="w"> </span><span class="bp">&#8706;</span><span class="n">&#956;</span><span class="o">)</span><span class="w"> </span><span class="n">atTop</span><span class="w"> </span><span class="o">(</span><span class="n">&#120029;</span><span class="w"> </span><span class="o">(</span><span class="bp">&#8747;</span><span class="w"> </span><span class="n">a</span><span class="o">,</span><span class="w"> </span><span class="n">f</span><span class="w"> </span><span class="n">a</span><span class="w"> </span><span class="bp">&#8706;</span><span class="n">&#956;</span><span class="o">))</span><span class="w"> </span><span class="o">:=</span>
<span class="w">  </span><span class="n">tendsto_integral_of_dominated_convergence</span><span class="w"> </span><span class="n">bound</span><span class="w"> </span><span class="n">hmeas</span><span class="w"> </span><span class="n">hint</span><span class="w"> </span><span class="n">hbound</span><span class="w"> </span><span class="n">hlim</span>
</pre></div>
</div>
<p>&#36824;&#26377;&#19968;&#20010;&#31215;&#31867;&#22411;&#19978;&#30340;&#31215;&#20998;&#30340; Fubini &#23450;&#29702;&#65306;</p>
<div class="highlight-lean notranslate"><div class="highlight"><pre><span></span><span class="kd">example</span><span class="w"> </span><span class="o">{</span><span class="n">&#945;</span><span class="w"> </span><span class="o">:</span><span class="w"> </span><span class="kt">Type</span><span class="bp">*</span><span class="o">}</span><span class="w"> </span><span class="o">[</span><span class="n">MeasurableSpace</span><span class="w"> </span><span class="n">&#945;</span><span class="o">]</span><span class="w"> </span><span class="o">{</span><span class="n">&#956;</span><span class="w"> </span><span class="o">:</span><span class="w"> </span><span class="n">Measure</span><span class="w"> </span><span class="n">&#945;</span><span class="o">}</span><span class="w"> </span><span class="o">[</span><span class="n">SigmaFinite</span><span class="w"> </span><span class="n">&#956;</span><span class="o">]</span><span class="w"> </span><span class="o">{</span><span class="n">&#946;</span><span class="w"> </span><span class="o">:</span><span class="w"> </span><span class="kt">Type</span><span class="bp">*</span><span class="o">}</span>
<span class="w">    </span><span class="o">[</span><span class="n">MeasurableSpace</span><span class="w"> </span><span class="n">&#946;</span><span class="o">]</span><span class="w"> </span><span class="o">{</span><span class="n">&#957;</span><span class="w"> </span><span class="o">:</span><span class="w"> </span><span class="n">Measure</span><span class="w"> </span><span class="n">&#946;</span><span class="o">}</span><span class="w"> </span><span class="o">[</span><span class="n">SigmaFinite</span><span class="w"> </span><span class="n">&#957;</span><span class="o">]</span><span class="w"> </span><span class="o">(</span><span class="n">f</span><span class="w"> </span><span class="o">:</span><span class="w"> </span><span class="n">&#945;</span><span class="w"> </span><span class="bp">&#215;</span><span class="w"> </span><span class="n">&#946;</span><span class="w"> </span><span class="bp">&#8594;</span><span class="w"> </span><span class="n">E</span><span class="o">)</span>
<span class="w">    </span><span class="o">(</span><span class="n">hf</span><span class="w"> </span><span class="o">:</span><span class="w"> </span><span class="n">Integrable</span><span class="w"> </span><span class="n">f</span><span class="w"> </span><span class="o">(</span><span class="n">&#956;.prod</span><span class="w"> </span><span class="n">&#957;</span><span class="o">))</span><span class="w"> </span><span class="o">:</span><span class="w"> </span><span class="bp">&#8747;</span><span class="w"> </span><span class="n">z</span><span class="o">,</span><span class="w"> </span><span class="n">f</span><span class="w"> </span><span class="n">z</span><span class="w"> </span><span class="bp">&#8706;</span><span class="w"> </span><span class="n">&#956;.prod</span><span class="w"> </span><span class="n">&#957;</span><span class="w"> </span><span class="bp">=</span><span class="w"> </span><span class="bp">&#8747;</span><span class="w"> </span><span class="n">x</span><span class="o">,</span><span class="w"> </span><span class="bp">&#8747;</span><span class="w"> </span><span class="n">y</span><span class="o">,</span><span class="w"> </span><span class="n">f</span><span class="w"> </span><span class="o">(</span><span class="n">x</span><span class="o">,</span><span class="w"> </span><span class="n">y</span><span class="o">)</span><span class="w"> </span><span class="bp">&#8706;</span><span class="n">&#957;</span><span class="w"> </span><span class="bp">&#8706;</span><span class="n">&#956;</span><span class="w"> </span><span class="o">:=</span>
<span class="w">  </span><span class="n">integral_prod</span><span class="w"> </span><span class="n">f</span><span class="w"> </span><span class="n">hf</span>
</pre></div>
</div>
<p>&#26377;&#19968;&#20010;&#38750;&#24120;&#19968;&#33324;&#30340;&#29256;&#26412;&#30340;&#21367;&#31215;&#36866;&#29992;&#20110;&#20219;&#20309;&#36830;&#32493;&#21452;&#32447;&#24615;&#24418;&#24335;&#12290;</p>
<div class="highlight-lean notranslate"><div class="highlight"><pre><span></span><span class="kn">open</span><span class="w"> </span><span class="n">Convolution</span>

<span class="kd">variable</span><span class="w"> </span><span class="o">{</span><span class="n">&#120156;</span><span class="w"> </span><span class="o">:</span><span class="w"> </span><span class="kt">Type</span><span class="bp">*</span><span class="o">}</span><span class="w"> </span><span class="o">{</span><span class="n">G</span><span class="w"> </span><span class="o">:</span><span class="w"> </span><span class="kt">Type</span><span class="bp">*</span><span class="o">}</span><span class="w"> </span><span class="o">{</span><span class="n">E</span><span class="w"> </span><span class="o">:</span><span class="w"> </span><span class="kt">Type</span><span class="bp">*</span><span class="o">}</span><span class="w"> </span><span class="o">{</span><span class="n">E&#39;</span><span class="w"> </span><span class="o">:</span><span class="w"> </span><span class="kt">Type</span><span class="bp">*</span><span class="o">}</span><span class="w"> </span><span class="o">{</span><span class="n">F</span><span class="w"> </span><span class="o">:</span><span class="w"> </span><span class="kt">Type</span><span class="bp">*</span><span class="o">}</span><span class="w"> </span><span class="o">[</span><span class="n">NormedAddCommGroup</span><span class="w"> </span><span class="n">E</span><span class="o">]</span>
<span class="w">  </span><span class="o">[</span><span class="n">NormedAddCommGroup</span><span class="w"> </span><span class="n">E&#39;</span><span class="o">]</span><span class="w"> </span><span class="o">[</span><span class="n">NormedAddCommGroup</span><span class="w"> </span><span class="n">F</span><span class="o">]</span><span class="w"> </span><span class="o">[</span><span class="n">NontriviallyNormedField</span><span class="w"> </span><span class="n">&#120156;</span><span class="o">]</span><span class="w"> </span><span class="o">[</span><span class="n">NormedSpace</span><span class="w"> </span><span class="n">&#120156;</span><span class="w"> </span><span class="n">E</span><span class="o">]</span>
<span class="w">  </span><span class="o">[</span><span class="n">NormedSpace</span><span class="w"> </span><span class="n">&#120156;</span><span class="w"> </span><span class="n">E&#39;</span><span class="o">]</span><span class="w"> </span><span class="o">[</span><span class="n">NormedSpace</span><span class="w"> </span><span class="n">&#120156;</span><span class="w"> </span><span class="n">F</span><span class="o">]</span><span class="w"> </span><span class="o">[</span><span class="n">MeasurableSpace</span><span class="w"> </span><span class="n">G</span><span class="o">]</span><span class="w"> </span><span class="o">[</span><span class="n">NormedSpace</span><span class="w"> </span><span class="n">&#8477;</span><span class="w"> </span><span class="n">F</span><span class="o">]</span><span class="w"> </span><span class="o">[</span><span class="n">CompleteSpace</span><span class="w"> </span><span class="n">F</span><span class="o">]</span>
<span class="w">  </span><span class="o">[</span><span class="n">Sub</span><span class="w"> </span><span class="n">G</span><span class="o">]</span>

<span class="kd">example</span><span class="w"> </span><span class="o">(</span><span class="n">f</span><span class="w"> </span><span class="o">:</span><span class="w"> </span><span class="n">G</span><span class="w"> </span><span class="bp">&#8594;</span><span class="w"> </span><span class="n">E</span><span class="o">)</span><span class="w"> </span><span class="o">(</span><span class="n">g</span><span class="w"> </span><span class="o">:</span><span class="w"> </span><span class="n">G</span><span class="w"> </span><span class="bp">&#8594;</span><span class="w"> </span><span class="n">E&#39;</span><span class="o">)</span><span class="w"> </span><span class="o">(</span><span class="n">L</span><span class="w"> </span><span class="o">:</span><span class="w"> </span><span class="n">E</span><span class="w"> </span><span class="bp">&#8594;</span><span class="n">L</span><span class="o">[</span><span class="n">&#120156;</span><span class="o">]</span><span class="w"> </span><span class="n">E&#39;</span><span class="w"> </span><span class="bp">&#8594;</span><span class="n">L</span><span class="o">[</span><span class="n">&#120156;</span><span class="o">]</span><span class="w"> </span><span class="n">F</span><span class="o">)</span><span class="w"> </span><span class="o">(</span><span class="n">&#956;</span><span class="w"> </span><span class="o">:</span><span class="w"> </span><span class="n">Measure</span><span class="w"> </span><span class="n">G</span><span class="o">)</span><span class="w"> </span><span class="o">:</span>
<span class="w">    </span><span class="n">f</span><span class="w"> </span><span class="bp">&#8902;</span><span class="o">[</span><span class="n">L</span><span class="o">,</span><span class="w"> </span><span class="n">&#956;</span><span class="o">]</span><span class="w"> </span><span class="n">g</span><span class="w"> </span><span class="bp">=</span><span class="w"> </span><span class="k">fun</span><span class="w"> </span><span class="n">x</span><span class="w"> </span><span class="bp">&#8614;</span><span class="w"> </span><span class="bp">&#8747;</span><span class="w"> </span><span class="n">t</span><span class="o">,</span><span class="w"> </span><span class="n">L</span><span class="w"> </span><span class="o">(</span><span class="n">f</span><span class="w"> </span><span class="n">t</span><span class="o">)</span><span class="w"> </span><span class="o">(</span><span class="n">g</span><span class="w"> </span><span class="o">(</span><span class="n">x</span><span class="w"> </span><span class="bp">-</span><span class="w"> </span><span class="n">t</span><span class="o">))</span><span class="w"> </span><span class="bp">&#8706;</span><span class="n">&#956;</span><span class="w"> </span><span class="o">:=</span>
<span class="w">  </span><span class="n">rfl</span>
</pre></div>
</div>
<p>&#26368;&#21518;&#65292;Mathlib &#26377;&#19968;&#20010;&#38750;&#24120;&#19968;&#33324;&#30340;&#25442;&#20803;&#20844;&#24335;&#12290;&#19979;&#38754;&#30340;&#21629;&#39064;&#20013;&#65292;<cite>BorelSpace E</cite> &#24847;&#20026;&#30001;&#24320;&#38598; <cite>E</cite> &#29983;&#25104;&#30340; <cite>E</cite> &#19978;&#30340; <span class="math notranslate nohighlight">\(\sigma\)</span>-&#20195;&#25968;&#65292;<cite>IsAddHaarMeasure &#956;</cite> &#24847;&#20026;&#27979;&#24230; <cite>&#956;</cite> &#26159;&#24038;&#19981;&#21464;&#30340;(left-invariant)&#65292;&#22312;&#32039;&#38598;&#19978;&#26377;&#38480;&#65292;&#22312;&#24320;&#38598;&#19978;&#20026;&#27491;&#25968;&#12290;</p>
<div class="highlight-lean notranslate"><div class="highlight"><pre><span></span><span class="kd">example</span><span class="w"> </span><span class="o">{</span><span class="n">E</span><span class="w"> </span><span class="o">:</span><span class="w"> </span><span class="kt">Type</span><span class="bp">*</span><span class="o">}</span><span class="w"> </span><span class="o">[</span><span class="n">NormedAddCommGroup</span><span class="w"> </span><span class="n">E</span><span class="o">]</span><span class="w"> </span><span class="o">[</span><span class="n">NormedSpace</span><span class="w"> </span><span class="n">&#8477;</span><span class="w"> </span><span class="n">E</span><span class="o">]</span><span class="w"> </span><span class="o">[</span><span class="n">FiniteDimensional</span><span class="w"> </span><span class="n">&#8477;</span><span class="w"> </span><span class="n">E</span><span class="o">]</span>
<span class="w">    </span><span class="o">[</span><span class="n">MeasurableSpace</span><span class="w"> </span><span class="n">E</span><span class="o">]</span><span class="w"> </span><span class="o">[</span><span class="n">BorelSpace</span><span class="w"> </span><span class="n">E</span><span class="o">]</span><span class="w"> </span><span class="o">(</span><span class="n">&#956;</span><span class="w"> </span><span class="o">:</span><span class="w"> </span><span class="n">Measure</span><span class="w"> </span><span class="n">E</span><span class="o">)</span><span class="w"> </span><span class="o">[</span><span class="n">&#956;.IsAddHaarMeasure</span><span class="o">]</span><span class="w"> </span><span class="o">{</span><span class="n">F</span><span class="w"> </span><span class="o">:</span><span class="w"> </span><span class="kt">Type</span><span class="bp">*</span><span class="o">}</span>
<span class="w">    </span><span class="o">[</span><span class="n">NormedAddCommGroup</span><span class="w"> </span><span class="n">F</span><span class="o">]</span><span class="w"> </span><span class="o">[</span><span class="n">NormedSpace</span><span class="w"> </span><span class="n">&#8477;</span><span class="w"> </span><span class="n">F</span><span class="o">]</span><span class="w"> </span><span class="o">[</span><span class="n">CompleteSpace</span><span class="w"> </span><span class="n">F</span><span class="o">]</span><span class="w"> </span><span class="o">{</span><span class="n">s</span><span class="w"> </span><span class="o">:</span><span class="w"> </span><span class="n">Set</span><span class="w"> </span><span class="n">E</span><span class="o">}</span><span class="w"> </span><span class="o">{</span><span class="n">f</span><span class="w"> </span><span class="o">:</span><span class="w"> </span><span class="n">E</span><span class="w"> </span><span class="bp">&#8594;</span><span class="w"> </span><span class="n">E</span><span class="o">}</span>
<span class="w">    </span><span class="o">{</span><span class="n">f&#39;</span><span class="w"> </span><span class="o">:</span><span class="w"> </span><span class="n">E</span><span class="w"> </span><span class="bp">&#8594;</span><span class="w"> </span><span class="n">E</span><span class="w"> </span><span class="bp">&#8594;</span><span class="n">L</span><span class="o">[</span><span class="n">&#8477;</span><span class="o">]</span><span class="w"> </span><span class="n">E</span><span class="o">}</span><span class="w"> </span><span class="o">(</span><span class="n">hs</span><span class="w"> </span><span class="o">:</span><span class="w"> </span><span class="n">MeasurableSet</span><span class="w"> </span><span class="n">s</span><span class="o">)</span>
<span class="w">    </span><span class="o">(</span><span class="n">hf</span><span class="w"> </span><span class="o">:</span><span class="w"> </span><span class="bp">&#8704;</span><span class="w"> </span><span class="n">x</span><span class="w"> </span><span class="o">:</span><span class="w"> </span><span class="n">E</span><span class="o">,</span><span class="w"> </span><span class="n">x</span><span class="w"> </span><span class="bp">&#8712;</span><span class="w"> </span><span class="n">s</span><span class="w"> </span><span class="bp">&#8594;</span><span class="w"> </span><span class="n">HasFDerivWithinAt</span><span class="w"> </span><span class="n">f</span><span class="w"> </span><span class="o">(</span><span class="n">f&#39;</span><span class="w"> </span><span class="n">x</span><span class="o">)</span><span class="w"> </span><span class="n">s</span><span class="w"> </span><span class="n">x</span><span class="o">)</span><span class="w"> </span><span class="o">(</span><span class="n">h_inj</span><span class="w"> </span><span class="o">:</span><span class="w"> </span><span class="n">InjOn</span><span class="w"> </span><span class="n">f</span><span class="w"> </span><span class="n">s</span><span class="o">)</span><span class="w"> </span><span class="o">(</span><span class="n">g</span><span class="w"> </span><span class="o">:</span><span class="w"> </span><span class="n">E</span><span class="w"> </span><span class="bp">&#8594;</span><span class="w"> </span><span class="n">F</span><span class="o">)</span><span class="w"> </span><span class="o">:</span>
<span class="w">    </span><span class="bp">&#8747;</span><span class="w"> </span><span class="n">x</span><span class="w"> </span><span class="k">in</span><span class="w"> </span><span class="n">f</span><span class="w"> </span><span class="bp">&#39;&#39;</span><span class="w"> </span><span class="n">s</span><span class="o">,</span><span class="w"> </span><span class="n">g</span><span class="w"> </span><span class="n">x</span><span class="w"> </span><span class="bp">&#8706;</span><span class="n">&#956;</span><span class="w"> </span><span class="bp">=</span><span class="w"> </span><span class="bp">&#8747;</span><span class="w"> </span><span class="n">x</span><span class="w"> </span><span class="k">in</span><span class="w"> </span><span class="n">s</span><span class="o">,</span><span class="w"> </span><span class="bp">|</span><span class="o">(</span><span class="n">f&#39;</span><span class="w"> </span><span class="n">x</span><span class="o">)</span><span class="bp">.</span><span class="n">det</span><span class="bp">|</span><span class="w"> </span><span class="bp">&#8226;</span><span class="w"> </span><span class="n">g</span><span class="w"> </span><span class="o">(</span><span class="n">f</span><span class="w"> </span><span class="n">x</span><span class="o">)</span><span class="w"> </span><span class="bp">&#8706;</span><span class="n">&#956;</span><span class="w"> </span><span class="o">:=</span>
<span class="w">  </span><span class="n">integral_image_eq_integral_abs_det_fderiv_smul</span><span class="w"> </span><span class="n">&#956;</span><span class="w"> </span><span class="n">hs</span><span class="w"> </span><span class="n">hf</span><span class="w"> </span><span class="n">h_inj</span><span class="w"> </span><span class="n">g</span>
</pre></div>
</div>
</section>
</section>


           </div>
          </div>
          <footer><div class="rst-footer-buttons" role="navigation" aria-label="Footer">
        <a href="C11_Differential_Calculus.html" class="btn btn-neutral float-left" title="11. Differential Calculus" accesskey="p" rel="prev"><span class="fa fa-arrow-circle-left" aria-hidden="true"></span> Previous</a>
        <a href="genindex.html" class="btn btn-neutral float-right" title="Index" accesskey="n" rel="next">Next <span class="fa fa-arrow-circle-right" aria-hidden="true"></span></a>
    </div>

  <hr/>

  <div role="contentinfo">
    <p>&#169; Copyright 2020, Jeremy Avigad, Patrick Massot.</p>
  </div>

  Built with <a href="https://www.sphinx-doc.org/">Sphinx</a> using a
    <a href="https://github.com/readthedocs/sphinx_rtd_theme">theme</a>
    provided by <a href="https://readthedocs.org">Read the Docs</a>.
   

</footer>
        </div>
      </div>
    </section>
  </div>
  <script>
      jQuery(function () {
          SphinxRtdTheme.Navigation.enable(true);
      });
  </script> 

</body>
</html>